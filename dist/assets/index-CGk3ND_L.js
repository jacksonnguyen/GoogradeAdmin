(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();function Kf(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var lh={exports:{}},To={},uh={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jy;function ob(){if(jy)return we;jy=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function y(N){return N===null||typeof N!="object"?null:(N=m&&N[m]||N["@@iterator"],typeof N=="function"?N:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,x={};function b(N,B,ye){this.props=N,this.context=B,this.refs=x,this.updater=ye||w}b.prototype.isReactComponent={},b.prototype.setState=function(N,B){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,B,"setState")},b.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function C(){}C.prototype=b.prototype;function A(N,B,ye){this.props=N,this.context=B,this.refs=x,this.updater=ye||w}var O=A.prototype=new C;O.constructor=A,k(O,b.prototype),O.isPureReactComponent=!0;var j=Array.isArray,F=Object.prototype.hasOwnProperty,W={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};function q(N,B,ye){var xe,be={},Ee=null,Re=null;if(B!=null)for(xe in B.ref!==void 0&&(Re=B.ref),B.key!==void 0&&(Ee=""+B.key),B)F.call(B,xe)&&!L.hasOwnProperty(xe)&&(be[xe]=B[xe]);var _e=arguments.length-2;if(_e===1)be.children=ye;else if(1<_e){for(var Le=Array(_e),Kt=0;Kt<_e;Kt++)Le[Kt]=arguments[Kt+2];be.children=Le}if(N&&N.defaultProps)for(xe in _e=N.defaultProps,_e)be[xe]===void 0&&(be[xe]=_e[xe]);return{$$typeof:n,type:N,key:Ee,ref:Re,props:be,_owner:W.current}}function he(N,B){return{$$typeof:n,type:N.type,key:B,ref:N.ref,props:N.props,_owner:N._owner}}function De(N){return typeof N=="object"&&N!==null&&N.$$typeof===n}function Ke(N){var B={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(ye){return B[ye]})}var ft=/\/+/g;function nt(N,B){return typeof N=="object"&&N!==null&&N.key!=null?Ke(""+N.key):B.toString(36)}function pt(N,B,ye,xe,be){var Ee=typeof N;(Ee==="undefined"||Ee==="boolean")&&(N=null);var Re=!1;if(N===null)Re=!0;else switch(Ee){case"string":case"number":Re=!0;break;case"object":switch(N.$$typeof){case n:case e:Re=!0}}if(Re)return Re=N,be=be(Re),N=xe===""?"."+nt(Re,0):xe,j(be)?(ye="",N!=null&&(ye=N.replace(ft,"$&/")+"/"),pt(be,B,ye,"",function(Kt){return Kt})):be!=null&&(De(be)&&(be=he(be,ye+(!be.key||Re&&Re.key===be.key?"":(""+be.key).replace(ft,"$&/")+"/")+N)),B.push(be)),1;if(Re=0,xe=xe===""?".":xe+":",j(N))for(var _e=0;_e<N.length;_e++){Ee=N[_e];var Le=xe+nt(Ee,_e);Re+=pt(Ee,B,ye,Le,be)}else if(Le=y(N),typeof Le=="function")for(N=Le.call(N),_e=0;!(Ee=N.next()).done;)Ee=Ee.value,Le=xe+nt(Ee,_e++),Re+=pt(Ee,B,ye,Le,be);else if(Ee==="object")throw B=String(N),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.");return Re}function rt(N,B,ye){if(N==null)return N;var xe=[],be=0;return pt(N,xe,"","",function(Ee){return B.call(ye,Ee,be++)}),xe}function te(N){if(N._status===-1){var B=N._result;B=B(),B.then(function(ye){(N._status===0||N._status===-1)&&(N._status=1,N._result=ye)},function(ye){(N._status===0||N._status===-1)&&(N._status=2,N._result=ye)}),N._status===-1&&(N._status=0,N._result=B)}if(N._status===1)return N._result.default;throw N._result}var fe={current:null},G={transition:null},ce={ReactCurrentDispatcher:fe,ReactCurrentBatchConfig:G,ReactCurrentOwner:W};function X(){throw Error("act(...) is not supported in production builds of React.")}return we.Children={map:rt,forEach:function(N,B,ye){rt(N,function(){B.apply(this,arguments)},ye)},count:function(N){var B=0;return rt(N,function(){B++}),B},toArray:function(N){return rt(N,function(B){return B})||[]},only:function(N){if(!De(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},we.Component=b,we.Fragment=t,we.Profiler=s,we.PureComponent=A,we.StrictMode=r,we.Suspense=c,we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ce,we.act=X,we.cloneElement=function(N,B,ye){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var xe=k({},N.props),be=N.key,Ee=N.ref,Re=N._owner;if(B!=null){if(B.ref!==void 0&&(Ee=B.ref,Re=W.current),B.key!==void 0&&(be=""+B.key),N.type&&N.type.defaultProps)var _e=N.type.defaultProps;for(Le in B)F.call(B,Le)&&!L.hasOwnProperty(Le)&&(xe[Le]=B[Le]===void 0&&_e!==void 0?_e[Le]:B[Le])}var Le=arguments.length-2;if(Le===1)xe.children=ye;else if(1<Le){_e=Array(Le);for(var Kt=0;Kt<Le;Kt++)_e[Kt]=arguments[Kt+2];xe.children=_e}return{$$typeof:n,type:N.type,key:be,ref:Ee,props:xe,_owner:Re}},we.createContext=function(N){return N={$$typeof:a,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:i,_context:N},N.Consumer=N},we.createElement=q,we.createFactory=function(N){var B=q.bind(null,N);return B.type=N,B},we.createRef=function(){return{current:null}},we.forwardRef=function(N){return{$$typeof:u,render:N}},we.isValidElement=De,we.lazy=function(N){return{$$typeof:p,_payload:{_status:-1,_result:N},_init:te}},we.memo=function(N,B){return{$$typeof:h,type:N,compare:B===void 0?null:B}},we.startTransition=function(N){var B=G.transition;G.transition={};try{N()}finally{G.transition=B}},we.unstable_act=X,we.useCallback=function(N,B){return fe.current.useCallback(N,B)},we.useContext=function(N){return fe.current.useContext(N)},we.useDebugValue=function(){},we.useDeferredValue=function(N){return fe.current.useDeferredValue(N)},we.useEffect=function(N,B){return fe.current.useEffect(N,B)},we.useId=function(){return fe.current.useId()},we.useImperativeHandle=function(N,B,ye){return fe.current.useImperativeHandle(N,B,ye)},we.useInsertionEffect=function(N,B){return fe.current.useInsertionEffect(N,B)},we.useLayoutEffect=function(N,B){return fe.current.useLayoutEffect(N,B)},we.useMemo=function(N,B){return fe.current.useMemo(N,B)},we.useReducer=function(N,B,ye){return fe.current.useReducer(N,B,ye)},we.useRef=function(N){return fe.current.useRef(N)},we.useState=function(N){return fe.current.useState(N)},we.useSyncExternalStore=function(N,B,ye){return fe.current.useSyncExternalStore(N,B,ye)},we.useTransition=function(){return fe.current.useTransition()},we.version="18.3.1",we}var $y;function qf(){return $y||($y=1,uh.exports=ob()),uh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var By;function ab(){if(By)return To;By=1;var n=qf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function a(u,c,h){var p,m={},y=null,w=null;h!==void 0&&(y=""+h),c.key!==void 0&&(y=""+c.key),c.ref!==void 0&&(w=c.ref);for(p in c)r.call(c,p)&&!i.hasOwnProperty(p)&&(m[p]=c[p]);if(u&&u.defaultProps)for(p in c=u.defaultProps,c)m[p]===void 0&&(m[p]=c[p]);return{$$typeof:e,type:u,key:y,ref:w,props:m,_owner:s.current}}return To.Fragment=t,To.jsx=a,To.jsxs=a,To}var zy;function lb(){return zy||(zy=1,lh.exports=ab()),lh.exports}var E=lb(),M=qf();const kt=Kf(M);var Dl={},ch={exports:{}},Ft={},dh={exports:{}},hh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uy;function ub(){return Uy||(Uy=1,(function(n){function e(G,ce){var X=G.length;G.push(ce);e:for(;0<X;){var N=X-1>>>1,B=G[N];if(0<s(B,ce))G[N]=ce,G[X]=B,X=N;else break e}}function t(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var ce=G[0],X=G.pop();if(X!==ce){G[0]=X;e:for(var N=0,B=G.length,ye=B>>>1;N<ye;){var xe=2*(N+1)-1,be=G[xe],Ee=xe+1,Re=G[Ee];if(0>s(be,X))Ee<B&&0>s(Re,be)?(G[N]=Re,G[Ee]=X,N=Ee):(G[N]=be,G[xe]=X,N=xe);else if(Ee<B&&0>s(Re,X))G[N]=Re,G[Ee]=X,N=Ee;else break e}}return ce}function s(G,ce){var X=G.sortIndex-ce.sortIndex;return X!==0?X:G.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var a=Date,u=a.now();n.unstable_now=function(){return a.now()-u}}var c=[],h=[],p=1,m=null,y=3,w=!1,k=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(G){for(var ce=t(h);ce!==null;){if(ce.callback===null)r(h);else if(ce.startTime<=G)r(h),ce.sortIndex=ce.expirationTime,e(c,ce);else break;ce=t(h)}}function j(G){if(x=!1,O(G),!k)if(t(c)!==null)k=!0,te(F);else{var ce=t(h);ce!==null&&fe(j,ce.startTime-G)}}function F(G,ce){k=!1,x&&(x=!1,C(q),q=-1),w=!0;var X=y;try{for(O(ce),m=t(c);m!==null&&(!(m.expirationTime>ce)||G&&!Ke());){var N=m.callback;if(typeof N=="function"){m.callback=null,y=m.priorityLevel;var B=N(m.expirationTime<=ce);ce=n.unstable_now(),typeof B=="function"?m.callback=B:m===t(c)&&r(c),O(ce)}else r(c);m=t(c)}if(m!==null)var ye=!0;else{var xe=t(h);xe!==null&&fe(j,xe.startTime-ce),ye=!1}return ye}finally{m=null,y=X,w=!1}}var W=!1,L=null,q=-1,he=5,De=-1;function Ke(){return!(n.unstable_now()-De<he)}function ft(){if(L!==null){var G=n.unstable_now();De=G;var ce=!0;try{ce=L(!0,G)}finally{ce?nt():(W=!1,L=null)}}else W=!1}var nt;if(typeof A=="function")nt=function(){A(ft)};else if(typeof MessageChannel<"u"){var pt=new MessageChannel,rt=pt.port2;pt.port1.onmessage=ft,nt=function(){rt.postMessage(null)}}else nt=function(){b(ft,0)};function te(G){L=G,W||(W=!0,nt())}function fe(G,ce){q=b(function(){G(n.unstable_now())},ce)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_continueExecution=function(){k||w||(k=!0,te(F))},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):he=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(G){switch(y){case 1:case 2:case 3:var ce=3;break;default:ce=y}var X=y;y=ce;try{return G()}finally{y=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(G,ce){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var X=y;y=G;try{return ce()}finally{y=X}},n.unstable_scheduleCallback=function(G,ce,X){var N=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?N+X:N):X=N,G){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=X+B,G={id:p++,callback:ce,priorityLevel:G,startTime:X,expirationTime:B,sortIndex:-1},X>N?(G.sortIndex=X,e(h,G),t(c)===null&&G===t(h)&&(x?(C(q),q=-1):x=!0,fe(j,X-N))):(G.sortIndex=B,e(c,G),k||w||(k=!0,te(F))),G},n.unstable_shouldYield=Ke,n.unstable_wrapCallback=function(G){var ce=y;return function(){var X=y;y=ce;try{return G.apply(this,arguments)}finally{y=X}}}})(hh)),hh}var Fy;function cb(){return Fy||(Fy=1,dh.exports=ub()),dh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hy;function db(){if(Hy)return Ft;Hy=1;var n=qf(),e=cb();function t(o){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+o,d=1;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function i(o,l){a(o,l),a(o+"Capture",l)}function a(o,l){for(s[o]=l,o=0;o<l.length;o++)r.add(l[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function y(o){return c.call(m,o)?!0:c.call(p,o)?!1:h.test(o)?m[o]=!0:(p[o]=!0,!1)}function w(o,l,d,f){if(d!==null&&d.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return f?!1:d!==null?!d.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function k(o,l,d,f){if(l===null||typeof l>"u"||w(o,l,d,f))return!0;if(f)return!1;if(d!==null)switch(d.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function x(o,l,d,f,g,v,S){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=d,this.propertyName=o,this.type=l,this.sanitizeURL=v,this.removeEmptyString=S}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){b[o]=new x(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var l=o[0];b[l]=new x(l,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){b[o]=new x(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){b[o]=new x(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){b[o]=new x(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){b[o]=new x(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){b[o]=new x(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){b[o]=new x(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){b[o]=new x(o,5,!1,o.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function A(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var l=o.replace(C,A);b[l]=new x(l,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var l=o.replace(C,A);b[l]=new x(l,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var l=o.replace(C,A);b[l]=new x(l,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){b[o]=new x(o,1,!1,o.toLowerCase(),null,!1,!1)}),b.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){b[o]=new x(o,1,!1,o.toLowerCase(),null,!0,!0)});function O(o,l,d,f){var g=b.hasOwnProperty(l)?b[l]:null;(g!==null?g.type!==0:f||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(k(l,d,g,f)&&(d=null),f||g===null?y(l)&&(d===null?o.removeAttribute(l):o.setAttribute(l,""+d)):g.mustUseProperty?o[g.propertyName]=d===null?g.type===3?!1:"":d:(l=g.attributeName,f=g.attributeNamespace,d===null?o.removeAttribute(l):(g=g.type,d=g===3||g===4&&d===!0?"":""+d,f?o.setAttributeNS(f,l,d):o.setAttribute(l,d))))}var j=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,F=Symbol.for("react.element"),W=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),he=Symbol.for("react.profiler"),De=Symbol.for("react.provider"),Ke=Symbol.for("react.context"),ft=Symbol.for("react.forward_ref"),nt=Symbol.for("react.suspense"),pt=Symbol.for("react.suspense_list"),rt=Symbol.for("react.memo"),te=Symbol.for("react.lazy"),fe=Symbol.for("react.offscreen"),G=Symbol.iterator;function ce(o){return o===null||typeof o!="object"?null:(o=G&&o[G]||o["@@iterator"],typeof o=="function"?o:null)}var X=Object.assign,N;function B(o){if(N===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);N=l&&l[1]||""}return`
`+N+o}var ye=!1;function xe(o,l){if(!o||ye)return"";ye=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(D){var f=D}Reflect.construct(o,[],l)}else{try{l.call()}catch(D){f=D}o.call(l.prototype)}else{try{throw Error()}catch(D){f=D}o()}}catch(D){if(D&&f&&typeof D.stack=="string"){for(var g=D.stack.split(`
`),v=f.stack.split(`
`),S=g.length-1,_=v.length-1;1<=S&&0<=_&&g[S]!==v[_];)_--;for(;1<=S&&0<=_;S--,_--)if(g[S]!==v[_]){if(S!==1||_!==1)do if(S--,_--,0>_||g[S]!==v[_]){var T=`
`+g[S].replace(" at new "," at ");return o.displayName&&T.includes("<anonymous>")&&(T=T.replace("<anonymous>",o.displayName)),T}while(1<=S&&0<=_);break}}}finally{ye=!1,Error.prepareStackTrace=d}return(o=o?o.displayName||o.name:"")?B(o):""}function be(o){switch(o.tag){case 5:return B(o.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return o=xe(o.type,!1),o;case 11:return o=xe(o.type.render,!1),o;case 1:return o=xe(o.type,!0),o;default:return""}}function Ee(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case L:return"Fragment";case W:return"Portal";case he:return"Profiler";case q:return"StrictMode";case nt:return"Suspense";case pt:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case Ke:return(o.displayName||"Context")+".Consumer";case De:return(o._context.displayName||"Context")+".Provider";case ft:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case rt:return l=o.displayName||null,l!==null?l:Ee(o.type)||"Memo";case te:l=o._payload,o=o._init;try{return Ee(o(l))}catch{}}return null}function Re(o){var l=o.type;switch(o.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=l.render,o=o.displayName||o.name||"",l.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ee(l);case 8:return l===q?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function _e(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Le(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Kt(o){var l=Le(o)?"checked":"value",d=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),f=""+o[l];if(!o.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var g=d.get,v=d.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return g.call(this)},set:function(S){f=""+S,v.call(this,S)}}),Object.defineProperty(o,l,{enumerable:d.enumerable}),{getValue:function(){return f},setValue:function(S){f=""+S},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function Ca(o){o._valueTracker||(o._valueTracker=Kt(o))}function Hp(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var d=l.getValue(),f="";return o&&(f=Le(o)?o.checked?"true":"false":o.value),o=f,o!==d?(l.setValue(o),!0):!1}function _a(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function mc(o,l){var d=l.checked;return X({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??o._wrapperState.initialChecked})}function Vp(o,l){var d=l.defaultValue==null?"":l.defaultValue,f=l.checked!=null?l.checked:l.defaultChecked;d=_e(l.value!=null?l.value:d),o._wrapperState={initialChecked:f,initialValue:d,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Wp(o,l){l=l.checked,l!=null&&O(o,"checked",l,!1)}function gc(o,l){Wp(o,l);var d=_e(l.value),f=l.type;if(d!=null)f==="number"?(d===0&&o.value===""||o.value!=d)&&(o.value=""+d):o.value!==""+d&&(o.value=""+d);else if(f==="submit"||f==="reset"){o.removeAttribute("value");return}l.hasOwnProperty("value")?yc(o,l.type,d):l.hasOwnProperty("defaultValue")&&yc(o,l.type,_e(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(o.defaultChecked=!!l.defaultChecked)}function Kp(o,l,d){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var f=l.type;if(!(f!=="submit"&&f!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+o._wrapperState.initialValue,d||l===o.value||(o.value=l),o.defaultValue=l}d=o.name,d!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,d!==""&&(o.name=d)}function yc(o,l,d){(l!=="number"||_a(o.ownerDocument)!==o)&&(d==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+d&&(o.defaultValue=""+d))}var Ui=Array.isArray;function zs(o,l,d,f){if(o=o.options,l){l={};for(var g=0;g<d.length;g++)l["$"+d[g]]=!0;for(d=0;d<o.length;d++)g=l.hasOwnProperty("$"+o[d].value),o[d].selected!==g&&(o[d].selected=g),g&&f&&(o[d].defaultSelected=!0)}else{for(d=""+_e(d),l=null,g=0;g<o.length;g++){if(o[g].value===d){o[g].selected=!0,f&&(o[g].defaultSelected=!0);return}l!==null||o[g].disabled||(l=o[g])}l!==null&&(l.selected=!0)}}function vc(o,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return X({},l,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function qp(o,l){var d=l.value;if(d==null){if(d=l.children,l=l.defaultValue,d!=null){if(l!=null)throw Error(t(92));if(Ui(d)){if(1<d.length)throw Error(t(93));d=d[0]}l=d}l==null&&(l=""),d=l}o._wrapperState={initialValue:_e(d)}}function Gp(o,l){var d=_e(l.value),f=_e(l.defaultValue);d!=null&&(d=""+d,d!==o.value&&(o.value=d),l.defaultValue==null&&o.defaultValue!==d&&(o.defaultValue=d)),f!=null&&(o.defaultValue=""+f)}function Jp(o){var l=o.textContent;l===o._wrapperState.initialValue&&l!==""&&l!==null&&(o.value=l)}function Yp(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wc(o,l){return o==null||o==="http://www.w3.org/1999/xhtml"?Yp(l):o==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Ta,Qp=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,d,f,g){MSApp.execUnsafeLocalFunction(function(){return o(l,d,f,g)})}:o})(function(o,l){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=l;else{for(Ta=Ta||document.createElement("div"),Ta.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Ta.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;l.firstChild;)o.appendChild(l.firstChild)}});function Fi(o,l){if(l){var d=o.firstChild;if(d&&d===o.lastChild&&d.nodeType===3){d.nodeValue=l;return}}o.textContent=l}var Hi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cx=["Webkit","ms","Moz","O"];Object.keys(Hi).forEach(function(o){cx.forEach(function(l){l=l+o.charAt(0).toUpperCase()+o.substring(1),Hi[l]=Hi[o]})});function Xp(o,l,d){return l==null||typeof l=="boolean"||l===""?"":d||typeof l!="number"||l===0||Hi.hasOwnProperty(o)&&Hi[o]?(""+l).trim():l+"px"}function Zp(o,l){o=o.style;for(var d in l)if(l.hasOwnProperty(d)){var f=d.indexOf("--")===0,g=Xp(d,l[d],f);d==="float"&&(d="cssFloat"),f?o.setProperty(d,g):o[d]=g}}var dx=X({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kc(o,l){if(l){if(dx[o]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function xc(o,l){if(o.indexOf("-")===-1)return typeof l.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sc=null;function bc(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ec=null,Us=null,Fs=null;function em(o){if(o=ho(o)){if(typeof Ec!="function")throw Error(t(280));var l=o.stateNode;l&&(l=Ya(l),Ec(o.stateNode,o.type,l))}}function tm(o){Us?Fs?Fs.push(o):Fs=[o]:Us=o}function nm(){if(Us){var o=Us,l=Fs;if(Fs=Us=null,em(o),l)for(o=0;o<l.length;o++)em(l[o])}}function rm(o,l){return o(l)}function sm(){}var Cc=!1;function im(o,l,d){if(Cc)return o(l,d);Cc=!0;try{return rm(o,l,d)}finally{Cc=!1,(Us!==null||Fs!==null)&&(sm(),nm())}}function Vi(o,l){var d=o.stateNode;if(d===null)return null;var f=Ya(d);if(f===null)return null;d=f[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(o=o.type,f=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!f;break e;default:o=!1}if(o)return null;if(d&&typeof d!="function")throw Error(t(231,l,typeof d));return d}var _c=!1;if(u)try{var Wi={};Object.defineProperty(Wi,"passive",{get:function(){_c=!0}}),window.addEventListener("test",Wi,Wi),window.removeEventListener("test",Wi,Wi)}catch{_c=!1}function hx(o,l,d,f,g,v,S,_,T){var D=Array.prototype.slice.call(arguments,3);try{l.apply(d,D)}catch(z){this.onError(z)}}var Ki=!1,Oa=null,Ra=!1,Tc=null,fx={onError:function(o){Ki=!0,Oa=o}};function px(o,l,d,f,g,v,S,_,T){Ki=!1,Oa=null,hx.apply(fx,arguments)}function mx(o,l,d,f,g,v,S,_,T){if(px.apply(this,arguments),Ki){if(Ki){var D=Oa;Ki=!1,Oa=null}else throw Error(t(198));Ra||(Ra=!0,Tc=D)}}function es(o){var l=o,d=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(d=l.return),o=l.return;while(o)}return l.tag===3?d:null}function om(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function am(o){if(es(o)!==o)throw Error(t(188))}function gx(o){var l=o.alternate;if(!l){if(l=es(o),l===null)throw Error(t(188));return l!==o?null:o}for(var d=o,f=l;;){var g=d.return;if(g===null)break;var v=g.alternate;if(v===null){if(f=g.return,f!==null){d=f;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===d)return am(g),o;if(v===f)return am(g),l;v=v.sibling}throw Error(t(188))}if(d.return!==f.return)d=g,f=v;else{for(var S=!1,_=g.child;_;){if(_===d){S=!0,d=g,f=v;break}if(_===f){S=!0,f=g,d=v;break}_=_.sibling}if(!S){for(_=v.child;_;){if(_===d){S=!0,d=v,f=g;break}if(_===f){S=!0,f=v,d=g;break}_=_.sibling}if(!S)throw Error(t(189))}}if(d.alternate!==f)throw Error(t(190))}if(d.tag!==3)throw Error(t(188));return d.stateNode.current===d?o:l}function lm(o){return o=gx(o),o!==null?um(o):null}function um(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var l=um(o);if(l!==null)return l;o=o.sibling}return null}var cm=e.unstable_scheduleCallback,dm=e.unstable_cancelCallback,yx=e.unstable_shouldYield,vx=e.unstable_requestPaint,qe=e.unstable_now,wx=e.unstable_getCurrentPriorityLevel,Oc=e.unstable_ImmediatePriority,hm=e.unstable_UserBlockingPriority,Na=e.unstable_NormalPriority,kx=e.unstable_LowPriority,fm=e.unstable_IdlePriority,Aa=null,An=null;function xx(o){if(An&&typeof An.onCommitFiberRoot=="function")try{An.onCommitFiberRoot(Aa,o,void 0,(o.current.flags&128)===128)}catch{}}var vn=Math.clz32?Math.clz32:Ex,Sx=Math.log,bx=Math.LN2;function Ex(o){return o>>>=0,o===0?32:31-(Sx(o)/bx|0)|0}var Ma=64,Ia=4194304;function qi(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Pa(o,l){var d=o.pendingLanes;if(d===0)return 0;var f=0,g=o.suspendedLanes,v=o.pingedLanes,S=d&268435455;if(S!==0){var _=S&~g;_!==0?f=qi(_):(v&=S,v!==0&&(f=qi(v)))}else S=d&~g,S!==0?f=qi(S):v!==0&&(f=qi(v));if(f===0)return 0;if(l!==0&&l!==f&&(l&g)===0&&(g=f&-f,v=l&-l,g>=v||g===16&&(v&4194240)!==0))return l;if((f&4)!==0&&(f|=d&16),l=o.entangledLanes,l!==0)for(o=o.entanglements,l&=f;0<l;)d=31-vn(l),g=1<<d,f|=o[d],l&=~g;return f}function Cx(o,l){switch(o){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _x(o,l){for(var d=o.suspendedLanes,f=o.pingedLanes,g=o.expirationTimes,v=o.pendingLanes;0<v;){var S=31-vn(v),_=1<<S,T=g[S];T===-1?((_&d)===0||(_&f)!==0)&&(g[S]=Cx(_,l)):T<=l&&(o.expiredLanes|=_),v&=~_}}function Rc(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function pm(){var o=Ma;return Ma<<=1,(Ma&4194240)===0&&(Ma=64),o}function Nc(o){for(var l=[],d=0;31>d;d++)l.push(o);return l}function Gi(o,l,d){o.pendingLanes|=l,l!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,l=31-vn(l),o[l]=d}function Tx(o,l){var d=o.pendingLanes&~l;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=l,o.mutableReadLanes&=l,o.entangledLanes&=l,l=o.entanglements;var f=o.eventTimes;for(o=o.expirationTimes;0<d;){var g=31-vn(d),v=1<<g;l[g]=0,f[g]=-1,o[g]=-1,d&=~v}}function Ac(o,l){var d=o.entangledLanes|=l;for(o=o.entanglements;d;){var f=31-vn(d),g=1<<f;g&l|o[f]&l&&(o[f]|=l),d&=~g}}var Te=0;function mm(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var gm,Mc,ym,vm,wm,Ic=!1,Da=[],cr=null,dr=null,hr=null,Ji=new Map,Yi=new Map,fr=[],Ox="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function km(o,l){switch(o){case"focusin":case"focusout":cr=null;break;case"dragenter":case"dragleave":dr=null;break;case"mouseover":case"mouseout":hr=null;break;case"pointerover":case"pointerout":Ji.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yi.delete(l.pointerId)}}function Qi(o,l,d,f,g,v){return o===null||o.nativeEvent!==v?(o={blockedOn:l,domEventName:d,eventSystemFlags:f,nativeEvent:v,targetContainers:[g]},l!==null&&(l=ho(l),l!==null&&Mc(l)),o):(o.eventSystemFlags|=f,l=o.targetContainers,g!==null&&l.indexOf(g)===-1&&l.push(g),o)}function Rx(o,l,d,f,g){switch(l){case"focusin":return cr=Qi(cr,o,l,d,f,g),!0;case"dragenter":return dr=Qi(dr,o,l,d,f,g),!0;case"mouseover":return hr=Qi(hr,o,l,d,f,g),!0;case"pointerover":var v=g.pointerId;return Ji.set(v,Qi(Ji.get(v)||null,o,l,d,f,g)),!0;case"gotpointercapture":return v=g.pointerId,Yi.set(v,Qi(Yi.get(v)||null,o,l,d,f,g)),!0}return!1}function xm(o){var l=ts(o.target);if(l!==null){var d=es(l);if(d!==null){if(l=d.tag,l===13){if(l=om(d),l!==null){o.blockedOn=l,wm(o.priority,function(){ym(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){o.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}o.blockedOn=null}function La(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var d=Dc(o.domEventName,o.eventSystemFlags,l[0],o.nativeEvent);if(d===null){d=o.nativeEvent;var f=new d.constructor(d.type,d);Sc=f,d.target.dispatchEvent(f),Sc=null}else return l=ho(d),l!==null&&Mc(l),o.blockedOn=d,!1;l.shift()}return!0}function Sm(o,l,d){La(o)&&d.delete(l)}function Nx(){Ic=!1,cr!==null&&La(cr)&&(cr=null),dr!==null&&La(dr)&&(dr=null),hr!==null&&La(hr)&&(hr=null),Ji.forEach(Sm),Yi.forEach(Sm)}function Xi(o,l){o.blockedOn===l&&(o.blockedOn=null,Ic||(Ic=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Nx)))}function Zi(o){function l(g){return Xi(g,o)}if(0<Da.length){Xi(Da[0],o);for(var d=1;d<Da.length;d++){var f=Da[d];f.blockedOn===o&&(f.blockedOn=null)}}for(cr!==null&&Xi(cr,o),dr!==null&&Xi(dr,o),hr!==null&&Xi(hr,o),Ji.forEach(l),Yi.forEach(l),d=0;d<fr.length;d++)f=fr[d],f.blockedOn===o&&(f.blockedOn=null);for(;0<fr.length&&(d=fr[0],d.blockedOn===null);)xm(d),d.blockedOn===null&&fr.shift()}var Hs=j.ReactCurrentBatchConfig,ja=!0;function Ax(o,l,d,f){var g=Te,v=Hs.transition;Hs.transition=null;try{Te=1,Pc(o,l,d,f)}finally{Te=g,Hs.transition=v}}function Mx(o,l,d,f){var g=Te,v=Hs.transition;Hs.transition=null;try{Te=4,Pc(o,l,d,f)}finally{Te=g,Hs.transition=v}}function Pc(o,l,d,f){if(ja){var g=Dc(o,l,d,f);if(g===null)Xc(o,l,f,$a,d),km(o,f);else if(Rx(g,o,l,d,f))f.stopPropagation();else if(km(o,f),l&4&&-1<Ox.indexOf(o)){for(;g!==null;){var v=ho(g);if(v!==null&&gm(v),v=Dc(o,l,d,f),v===null&&Xc(o,l,f,$a,d),v===g)break;g=v}g!==null&&f.stopPropagation()}else Xc(o,l,f,null,d)}}var $a=null;function Dc(o,l,d,f){if($a=null,o=bc(f),o=ts(o),o!==null)if(l=es(o),l===null)o=null;else if(d=l.tag,d===13){if(o=om(l),o!==null)return o;o=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null);return $a=o,null}function bm(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wx()){case Oc:return 1;case hm:return 4;case Na:case kx:return 16;case fm:return 536870912;default:return 16}default:return 16}}var pr=null,Lc=null,Ba=null;function Em(){if(Ba)return Ba;var o,l=Lc,d=l.length,f,g="value"in pr?pr.value:pr.textContent,v=g.length;for(o=0;o<d&&l[o]===g[o];o++);var S=d-o;for(f=1;f<=S&&l[d-f]===g[v-f];f++);return Ba=g.slice(o,1<f?1-f:void 0)}function za(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function Ua(){return!0}function Cm(){return!1}function qt(o){function l(d,f,g,v,S){this._reactName=d,this._targetInst=g,this.type=f,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var _ in o)o.hasOwnProperty(_)&&(d=o[_],this[_]=d?d(v):v[_]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Ua:Cm,this.isPropagationStopped=Cm,this}return X(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Ua)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Ua)},persist:function(){},isPersistent:Ua}),l}var Vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jc=qt(Vs),eo=X({},Vs,{view:0,detail:0}),Ix=qt(eo),$c,Bc,to,Fa=X({},eo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uc,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==to&&(to&&o.type==="mousemove"?($c=o.screenX-to.screenX,Bc=o.screenY-to.screenY):Bc=$c=0,to=o),$c)},movementY:function(o){return"movementY"in o?o.movementY:Bc}}),_m=qt(Fa),Px=X({},Fa,{dataTransfer:0}),Dx=qt(Px),Lx=X({},eo,{relatedTarget:0}),zc=qt(Lx),jx=X({},Vs,{animationName:0,elapsedTime:0,pseudoElement:0}),$x=qt(jx),Bx=X({},Vs,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),zx=qt(Bx),Ux=X({},Vs,{data:0}),Tm=qt(Ux),Fx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wx(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=Vx[o])?!!l[o]:!1}function Uc(){return Wx}var Kx=X({},eo,{key:function(o){if(o.key){var l=Fx[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=za(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Hx[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uc,charCode:function(o){return o.type==="keypress"?za(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?za(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),qx=qt(Kx),Gx=X({},Fa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Om=qt(Gx),Jx=X({},eo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uc}),Yx=qt(Jx),Qx=X({},Vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xx=qt(Qx),Zx=X({},Fa,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),eS=qt(Zx),tS=[9,13,27,32],Fc=u&&"CompositionEvent"in window,no=null;u&&"documentMode"in document&&(no=document.documentMode);var nS=u&&"TextEvent"in window&&!no,Rm=u&&(!Fc||no&&8<no&&11>=no),Nm=" ",Am=!1;function Mm(o,l){switch(o){case"keyup":return tS.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Im(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Ws=!1;function rS(o,l){switch(o){case"compositionend":return Im(l);case"keypress":return l.which!==32?null:(Am=!0,Nm);case"textInput":return o=l.data,o===Nm&&Am?null:o;default:return null}}function sS(o,l){if(Ws)return o==="compositionend"||!Fc&&Mm(o,l)?(o=Em(),Ba=Lc=pr=null,Ws=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Rm&&l.locale!=="ko"?null:l.data;default:return null}}var iS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pm(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!iS[o.type]:l==="textarea"}function Dm(o,l,d,f){tm(f),l=qa(l,"onChange"),0<l.length&&(d=new jc("onChange","change",null,d,f),o.push({event:d,listeners:l}))}var ro=null,so=null;function oS(o){Zm(o,0)}function Ha(o){var l=Ys(o);if(Hp(l))return o}function aS(o,l){if(o==="change")return l}var Lm=!1;if(u){var Hc;if(u){var Vc="oninput"in document;if(!Vc){var jm=document.createElement("div");jm.setAttribute("oninput","return;"),Vc=typeof jm.oninput=="function"}Hc=Vc}else Hc=!1;Lm=Hc&&(!document.documentMode||9<document.documentMode)}function $m(){ro&&(ro.detachEvent("onpropertychange",Bm),so=ro=null)}function Bm(o){if(o.propertyName==="value"&&Ha(so)){var l=[];Dm(l,so,o,bc(o)),im(oS,l)}}function lS(o,l,d){o==="focusin"?($m(),ro=l,so=d,ro.attachEvent("onpropertychange",Bm)):o==="focusout"&&$m()}function uS(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Ha(so)}function cS(o,l){if(o==="click")return Ha(l)}function dS(o,l){if(o==="input"||o==="change")return Ha(l)}function hS(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var wn=typeof Object.is=="function"?Object.is:hS;function io(o,l){if(wn(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var d=Object.keys(o),f=Object.keys(l);if(d.length!==f.length)return!1;for(f=0;f<d.length;f++){var g=d[f];if(!c.call(l,g)||!wn(o[g],l[g]))return!1}return!0}function zm(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Um(o,l){var d=zm(o);o=0;for(var f;d;){if(d.nodeType===3){if(f=o+d.textContent.length,o<=l&&f>=l)return{node:d,offset:l-o};o=f}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=zm(d)}}function Fm(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?Fm(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function Hm(){for(var o=window,l=_a();l instanceof o.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)o=l.contentWindow;else break;l=_a(o.document)}return l}function Wc(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}function fS(o){var l=Hm(),d=o.focusedElem,f=o.selectionRange;if(l!==d&&d&&d.ownerDocument&&Fm(d.ownerDocument.documentElement,d)){if(f!==null&&Wc(d)){if(l=f.start,o=f.end,o===void 0&&(o=l),"selectionStart"in d)d.selectionStart=l,d.selectionEnd=Math.min(o,d.value.length);else if(o=(l=d.ownerDocument||document)&&l.defaultView||window,o.getSelection){o=o.getSelection();var g=d.textContent.length,v=Math.min(f.start,g);f=f.end===void 0?v:Math.min(f.end,g),!o.extend&&v>f&&(g=f,f=v,v=g),g=Um(d,v);var S=Um(d,f);g&&S&&(o.rangeCount!==1||o.anchorNode!==g.node||o.anchorOffset!==g.offset||o.focusNode!==S.node||o.focusOffset!==S.offset)&&(l=l.createRange(),l.setStart(g.node,g.offset),o.removeAllRanges(),v>f?(o.addRange(l),o.extend(S.node,S.offset)):(l.setEnd(S.node,S.offset),o.addRange(l)))}}for(l=[],o=d;o=o.parentNode;)o.nodeType===1&&l.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<l.length;d++)o=l[d],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var pS=u&&"documentMode"in document&&11>=document.documentMode,Ks=null,Kc=null,oo=null,qc=!1;function Vm(o,l,d){var f=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;qc||Ks==null||Ks!==_a(f)||(f=Ks,"selectionStart"in f&&Wc(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),oo&&io(oo,f)||(oo=f,f=qa(Kc,"onSelect"),0<f.length&&(l=new jc("onSelect","select",null,l,d),o.push({event:l,listeners:f}),l.target=Ks)))}function Va(o,l){var d={};return d[o.toLowerCase()]=l.toLowerCase(),d["Webkit"+o]="webkit"+l,d["Moz"+o]="moz"+l,d}var qs={animationend:Va("Animation","AnimationEnd"),animationiteration:Va("Animation","AnimationIteration"),animationstart:Va("Animation","AnimationStart"),transitionend:Va("Transition","TransitionEnd")},Gc={},Wm={};u&&(Wm=document.createElement("div").style,"AnimationEvent"in window||(delete qs.animationend.animation,delete qs.animationiteration.animation,delete qs.animationstart.animation),"TransitionEvent"in window||delete qs.transitionend.transition);function Wa(o){if(Gc[o])return Gc[o];if(!qs[o])return o;var l=qs[o],d;for(d in l)if(l.hasOwnProperty(d)&&d in Wm)return Gc[o]=l[d];return o}var Km=Wa("animationend"),qm=Wa("animationiteration"),Gm=Wa("animationstart"),Jm=Wa("transitionend"),Ym=new Map,Qm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mr(o,l){Ym.set(o,l),i(l,[o])}for(var Jc=0;Jc<Qm.length;Jc++){var Yc=Qm[Jc],mS=Yc.toLowerCase(),gS=Yc[0].toUpperCase()+Yc.slice(1);mr(mS,"on"+gS)}mr(Km,"onAnimationEnd"),mr(qm,"onAnimationIteration"),mr(Gm,"onAnimationStart"),mr("dblclick","onDoubleClick"),mr("focusin","onFocus"),mr("focusout","onBlur"),mr(Jm,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ao="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yS=new Set("cancel close invalid load scroll toggle".split(" ").concat(ao));function Xm(o,l,d){var f=o.type||"unknown-event";o.currentTarget=d,mx(f,l,void 0,o),o.currentTarget=null}function Zm(o,l){l=(l&4)!==0;for(var d=0;d<o.length;d++){var f=o[d],g=f.event;f=f.listeners;e:{var v=void 0;if(l)for(var S=f.length-1;0<=S;S--){var _=f[S],T=_.instance,D=_.currentTarget;if(_=_.listener,T!==v&&g.isPropagationStopped())break e;Xm(g,_,D),v=T}else for(S=0;S<f.length;S++){if(_=f[S],T=_.instance,D=_.currentTarget,_=_.listener,T!==v&&g.isPropagationStopped())break e;Xm(g,_,D),v=T}}}if(Ra)throw o=Tc,Ra=!1,Tc=null,o}function Me(o,l){var d=l[sd];d===void 0&&(d=l[sd]=new Set);var f=o+"__bubble";d.has(f)||(eg(l,o,2,!1),d.add(f))}function Qc(o,l,d){var f=0;l&&(f|=4),eg(d,o,f,l)}var Ka="_reactListening"+Math.random().toString(36).slice(2);function lo(o){if(!o[Ka]){o[Ka]=!0,r.forEach(function(d){d!=="selectionchange"&&(yS.has(d)||Qc(d,!1,o),Qc(d,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[Ka]||(l[Ka]=!0,Qc("selectionchange",!1,l))}}function eg(o,l,d,f){switch(bm(l)){case 1:var g=Ax;break;case 4:g=Mx;break;default:g=Pc}d=g.bind(null,l,d,o),g=void 0,!_c||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(g=!0),f?g!==void 0?o.addEventListener(l,d,{capture:!0,passive:g}):o.addEventListener(l,d,!0):g!==void 0?o.addEventListener(l,d,{passive:g}):o.addEventListener(l,d,!1)}function Xc(o,l,d,f,g){var v=f;if((l&1)===0&&(l&2)===0&&f!==null)e:for(;;){if(f===null)return;var S=f.tag;if(S===3||S===4){var _=f.stateNode.containerInfo;if(_===g||_.nodeType===8&&_.parentNode===g)break;if(S===4)for(S=f.return;S!==null;){var T=S.tag;if((T===3||T===4)&&(T=S.stateNode.containerInfo,T===g||T.nodeType===8&&T.parentNode===g))return;S=S.return}for(;_!==null;){if(S=ts(_),S===null)return;if(T=S.tag,T===5||T===6){f=v=S;continue e}_=_.parentNode}}f=f.return}im(function(){var D=v,z=bc(d),H=[];e:{var $=Ym.get(o);if($!==void 0){var J=jc,Z=o;switch(o){case"keypress":if(za(d)===0)break e;case"keydown":case"keyup":J=qx;break;case"focusin":Z="focus",J=zc;break;case"focusout":Z="blur",J=zc;break;case"beforeblur":case"afterblur":J=zc;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=_m;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=Dx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=Yx;break;case Km:case qm:case Gm:J=$x;break;case Jm:J=Xx;break;case"scroll":J=Ix;break;case"wheel":J=eS;break;case"copy":case"cut":case"paste":J=zx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=Om}var ne=(l&4)!==0,Ge=!ne&&o==="scroll",I=ne?$!==null?$+"Capture":null:$;ne=[];for(var R=D,P;R!==null;){P=R;var K=P.stateNode;if(P.tag===5&&K!==null&&(P=K,I!==null&&(K=Vi(R,I),K!=null&&ne.push(uo(R,K,P)))),Ge)break;R=R.return}0<ne.length&&($=new J($,Z,null,d,z),H.push({event:$,listeners:ne}))}}if((l&7)===0){e:{if($=o==="mouseover"||o==="pointerover",J=o==="mouseout"||o==="pointerout",$&&d!==Sc&&(Z=d.relatedTarget||d.fromElement)&&(ts(Z)||Z[Hn]))break e;if((J||$)&&($=z.window===z?z:($=z.ownerDocument)?$.defaultView||$.parentWindow:window,J?(Z=d.relatedTarget||d.toElement,J=D,Z=Z?ts(Z):null,Z!==null&&(Ge=es(Z),Z!==Ge||Z.tag!==5&&Z.tag!==6)&&(Z=null)):(J=null,Z=D),J!==Z)){if(ne=_m,K="onMouseLeave",I="onMouseEnter",R="mouse",(o==="pointerout"||o==="pointerover")&&(ne=Om,K="onPointerLeave",I="onPointerEnter",R="pointer"),Ge=J==null?$:Ys(J),P=Z==null?$:Ys(Z),$=new ne(K,R+"leave",J,d,z),$.target=Ge,$.relatedTarget=P,K=null,ts(z)===D&&(ne=new ne(I,R+"enter",Z,d,z),ne.target=P,ne.relatedTarget=Ge,K=ne),Ge=K,J&&Z)t:{for(ne=J,I=Z,R=0,P=ne;P;P=Gs(P))R++;for(P=0,K=I;K;K=Gs(K))P++;for(;0<R-P;)ne=Gs(ne),R--;for(;0<P-R;)I=Gs(I),P--;for(;R--;){if(ne===I||I!==null&&ne===I.alternate)break t;ne=Gs(ne),I=Gs(I)}ne=null}else ne=null;J!==null&&tg(H,$,J,ne,!1),Z!==null&&Ge!==null&&tg(H,Ge,Z,ne,!0)}}e:{if($=D?Ys(D):window,J=$.nodeName&&$.nodeName.toLowerCase(),J==="select"||J==="input"&&$.type==="file")var re=aS;else if(Pm($))if(Lm)re=dS;else{re=uS;var oe=lS}else(J=$.nodeName)&&J.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(re=cS);if(re&&(re=re(o,D))){Dm(H,re,d,z);break e}oe&&oe(o,$,D),o==="focusout"&&(oe=$._wrapperState)&&oe.controlled&&$.type==="number"&&yc($,"number",$.value)}switch(oe=D?Ys(D):window,o){case"focusin":(Pm(oe)||oe.contentEditable==="true")&&(Ks=oe,Kc=D,oo=null);break;case"focusout":oo=Kc=Ks=null;break;case"mousedown":qc=!0;break;case"contextmenu":case"mouseup":case"dragend":qc=!1,Vm(H,d,z);break;case"selectionchange":if(pS)break;case"keydown":case"keyup":Vm(H,d,z)}var ae;if(Fc)e:{switch(o){case"compositionstart":var de="onCompositionStart";break e;case"compositionend":de="onCompositionEnd";break e;case"compositionupdate":de="onCompositionUpdate";break e}de=void 0}else Ws?Mm(o,d)&&(de="onCompositionEnd"):o==="keydown"&&d.keyCode===229&&(de="onCompositionStart");de&&(Rm&&d.locale!=="ko"&&(Ws||de!=="onCompositionStart"?de==="onCompositionEnd"&&Ws&&(ae=Em()):(pr=z,Lc="value"in pr?pr.value:pr.textContent,Ws=!0)),oe=qa(D,de),0<oe.length&&(de=new Tm(de,o,null,d,z),H.push({event:de,listeners:oe}),ae?de.data=ae:(ae=Im(d),ae!==null&&(de.data=ae)))),(ae=nS?rS(o,d):sS(o,d))&&(D=qa(D,"onBeforeInput"),0<D.length&&(z=new Tm("onBeforeInput","beforeinput",null,d,z),H.push({event:z,listeners:D}),z.data=ae))}Zm(H,l)})}function uo(o,l,d){return{instance:o,listener:l,currentTarget:d}}function qa(o,l){for(var d=l+"Capture",f=[];o!==null;){var g=o,v=g.stateNode;g.tag===5&&v!==null&&(g=v,v=Vi(o,d),v!=null&&f.unshift(uo(o,v,g)),v=Vi(o,l),v!=null&&f.push(uo(o,v,g))),o=o.return}return f}function Gs(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function tg(o,l,d,f,g){for(var v=l._reactName,S=[];d!==null&&d!==f;){var _=d,T=_.alternate,D=_.stateNode;if(T!==null&&T===f)break;_.tag===5&&D!==null&&(_=D,g?(T=Vi(d,v),T!=null&&S.unshift(uo(d,T,_))):g||(T=Vi(d,v),T!=null&&S.push(uo(d,T,_)))),d=d.return}S.length!==0&&o.push({event:l,listeners:S})}var vS=/\r\n?/g,wS=/\u0000|\uFFFD/g;function ng(o){return(typeof o=="string"?o:""+o).replace(vS,`
`).replace(wS,"")}function Ga(o,l,d){if(l=ng(l),ng(o)!==l&&d)throw Error(t(425))}function Ja(){}var Zc=null,ed=null;function td(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var nd=typeof setTimeout=="function"?setTimeout:void 0,kS=typeof clearTimeout=="function"?clearTimeout:void 0,rg=typeof Promise=="function"?Promise:void 0,xS=typeof queueMicrotask=="function"?queueMicrotask:typeof rg<"u"?function(o){return rg.resolve(null).then(o).catch(SS)}:nd;function SS(o){setTimeout(function(){throw o})}function rd(o,l){var d=l,f=0;do{var g=d.nextSibling;if(o.removeChild(d),g&&g.nodeType===8)if(d=g.data,d==="/$"){if(f===0){o.removeChild(g),Zi(l);return}f--}else d!=="$"&&d!=="$?"&&d!=="$!"||f++;d=g}while(d);Zi(l)}function gr(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return o}function sg(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var d=o.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return o;l--}else d==="/$"&&l++}o=o.previousSibling}return null}var Js=Math.random().toString(36).slice(2),Mn="__reactFiber$"+Js,co="__reactProps$"+Js,Hn="__reactContainer$"+Js,sd="__reactEvents$"+Js,bS="__reactListeners$"+Js,ES="__reactHandles$"+Js;function ts(o){var l=o[Mn];if(l)return l;for(var d=o.parentNode;d;){if(l=d[Hn]||d[Mn]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(o=sg(o);o!==null;){if(d=o[Mn])return d;o=sg(o)}return l}o=d,d=o.parentNode}return null}function ho(o){return o=o[Mn]||o[Hn],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Ys(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function Ya(o){return o[co]||null}var id=[],Qs=-1;function yr(o){return{current:o}}function Ie(o){0>Qs||(o.current=id[Qs],id[Qs]=null,Qs--)}function Ne(o,l){Qs++,id[Qs]=o.current,o.current=l}var vr={},Et=yr(vr),jt=yr(!1),ns=vr;function Xs(o,l){var d=o.type.contextTypes;if(!d)return vr;var f=o.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===l)return f.__reactInternalMemoizedMaskedChildContext;var g={},v;for(v in d)g[v]=l[v];return f&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=l,o.__reactInternalMemoizedMaskedChildContext=g),g}function $t(o){return o=o.childContextTypes,o!=null}function Qa(){Ie(jt),Ie(Et)}function ig(o,l,d){if(Et.current!==vr)throw Error(t(168));Ne(Et,l),Ne(jt,d)}function og(o,l,d){var f=o.stateNode;if(l=l.childContextTypes,typeof f.getChildContext!="function")return d;f=f.getChildContext();for(var g in f)if(!(g in l))throw Error(t(108,Re(o)||"Unknown",g));return X({},d,f)}function Xa(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||vr,ns=Et.current,Ne(Et,o),Ne(jt,jt.current),!0}function ag(o,l,d){var f=o.stateNode;if(!f)throw Error(t(169));d?(o=og(o,l,ns),f.__reactInternalMemoizedMergedChildContext=o,Ie(jt),Ie(Et),Ne(Et,o)):Ie(jt),Ne(jt,d)}var Vn=null,Za=!1,od=!1;function lg(o){Vn===null?Vn=[o]:Vn.push(o)}function CS(o){Za=!0,lg(o)}function wr(){if(!od&&Vn!==null){od=!0;var o=0,l=Te;try{var d=Vn;for(Te=1;o<d.length;o++){var f=d[o];do f=f(!0);while(f!==null)}Vn=null,Za=!1}catch(g){throw Vn!==null&&(Vn=Vn.slice(o+1)),cm(Oc,wr),g}finally{Te=l,od=!1}}return null}var Zs=[],ei=0,el=null,tl=0,rn=[],sn=0,rs=null,Wn=1,Kn="";function ss(o,l){Zs[ei++]=tl,Zs[ei++]=el,el=o,tl=l}function ug(o,l,d){rn[sn++]=Wn,rn[sn++]=Kn,rn[sn++]=rs,rs=o;var f=Wn;o=Kn;var g=32-vn(f)-1;f&=~(1<<g),d+=1;var v=32-vn(l)+g;if(30<v){var S=g-g%5;v=(f&(1<<S)-1).toString(32),f>>=S,g-=S,Wn=1<<32-vn(l)+g|d<<g|f,Kn=v+o}else Wn=1<<v|d<<g|f,Kn=o}function ad(o){o.return!==null&&(ss(o,1),ug(o,1,0))}function ld(o){for(;o===el;)el=Zs[--ei],Zs[ei]=null,tl=Zs[--ei],Zs[ei]=null;for(;o===rs;)rs=rn[--sn],rn[sn]=null,Kn=rn[--sn],rn[sn]=null,Wn=rn[--sn],rn[sn]=null}var Gt=null,Jt=null,je=!1,kn=null;function cg(o,l){var d=un(5,null,null,0);d.elementType="DELETED",d.stateNode=l,d.return=o,l=o.deletions,l===null?(o.deletions=[d],o.flags|=16):l.push(d)}function dg(o,l){switch(o.tag){case 5:var d=o.type;return l=l.nodeType!==1||d.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(o.stateNode=l,Gt=o,Jt=gr(l.firstChild),!0):!1;case 6:return l=o.pendingProps===""||l.nodeType!==3?null:l,l!==null?(o.stateNode=l,Gt=o,Jt=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(d=rs!==null?{id:Wn,overflow:Kn}:null,o.memoizedState={dehydrated:l,treeContext:d,retryLane:1073741824},d=un(18,null,null,0),d.stateNode=l,d.return=o,o.child=d,Gt=o,Jt=null,!0):!1;default:return!1}}function ud(o){return(o.mode&1)!==0&&(o.flags&128)===0}function cd(o){if(je){var l=Jt;if(l){var d=l;if(!dg(o,l)){if(ud(o))throw Error(t(418));l=gr(d.nextSibling);var f=Gt;l&&dg(o,l)?cg(f,d):(o.flags=o.flags&-4097|2,je=!1,Gt=o)}}else{if(ud(o))throw Error(t(418));o.flags=o.flags&-4097|2,je=!1,Gt=o}}}function hg(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;Gt=o}function nl(o){if(o!==Gt)return!1;if(!je)return hg(o),je=!0,!1;var l;if((l=o.tag!==3)&&!(l=o.tag!==5)&&(l=o.type,l=l!=="head"&&l!=="body"&&!td(o.type,o.memoizedProps)),l&&(l=Jt)){if(ud(o))throw fg(),Error(t(418));for(;l;)cg(o,l),l=gr(l.nextSibling)}if(hg(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8){var d=o.data;if(d==="/$"){if(l===0){Jt=gr(o.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++}o=o.nextSibling}Jt=null}}else Jt=Gt?gr(o.stateNode.nextSibling):null;return!0}function fg(){for(var o=Jt;o;)o=gr(o.nextSibling)}function ti(){Jt=Gt=null,je=!1}function dd(o){kn===null?kn=[o]:kn.push(o)}var _S=j.ReactCurrentBatchConfig;function fo(o,l,d){if(o=d.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(t(309));var f=d.stateNode}if(!f)throw Error(t(147,o));var g=f,v=""+o;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===v?l.ref:(l=function(S){var _=g.refs;S===null?delete _[v]:_[v]=S},l._stringRef=v,l)}if(typeof o!="string")throw Error(t(284));if(!d._owner)throw Error(t(290,o))}return o}function rl(o,l){throw o=Object.prototype.toString.call(l),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o))}function pg(o){var l=o._init;return l(o._payload)}function mg(o){function l(I,R){if(o){var P=I.deletions;P===null?(I.deletions=[R],I.flags|=16):P.push(R)}}function d(I,R){if(!o)return null;for(;R!==null;)l(I,R),R=R.sibling;return null}function f(I,R){for(I=new Map;R!==null;)R.key!==null?I.set(R.key,R):I.set(R.index,R),R=R.sibling;return I}function g(I,R){return I=Tr(I,R),I.index=0,I.sibling=null,I}function v(I,R,P){return I.index=P,o?(P=I.alternate,P!==null?(P=P.index,P<R?(I.flags|=2,R):P):(I.flags|=2,R)):(I.flags|=1048576,R)}function S(I){return o&&I.alternate===null&&(I.flags|=2),I}function _(I,R,P,K){return R===null||R.tag!==6?(R=nh(P,I.mode,K),R.return=I,R):(R=g(R,P),R.return=I,R)}function T(I,R,P,K){var re=P.type;return re===L?z(I,R,P.props.children,K,P.key):R!==null&&(R.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===te&&pg(re)===R.type)?(K=g(R,P.props),K.ref=fo(I,R,P),K.return=I,K):(K=Tl(P.type,P.key,P.props,null,I.mode,K),K.ref=fo(I,R,P),K.return=I,K)}function D(I,R,P,K){return R===null||R.tag!==4||R.stateNode.containerInfo!==P.containerInfo||R.stateNode.implementation!==P.implementation?(R=rh(P,I.mode,K),R.return=I,R):(R=g(R,P.children||[]),R.return=I,R)}function z(I,R,P,K,re){return R===null||R.tag!==7?(R=fs(P,I.mode,K,re),R.return=I,R):(R=g(R,P),R.return=I,R)}function H(I,R,P){if(typeof R=="string"&&R!==""||typeof R=="number")return R=nh(""+R,I.mode,P),R.return=I,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case F:return P=Tl(R.type,R.key,R.props,null,I.mode,P),P.ref=fo(I,null,R),P.return=I,P;case W:return R=rh(R,I.mode,P),R.return=I,R;case te:var K=R._init;return H(I,K(R._payload),P)}if(Ui(R)||ce(R))return R=fs(R,I.mode,P,null),R.return=I,R;rl(I,R)}return null}function $(I,R,P,K){var re=R!==null?R.key:null;if(typeof P=="string"&&P!==""||typeof P=="number")return re!==null?null:_(I,R,""+P,K);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case F:return P.key===re?T(I,R,P,K):null;case W:return P.key===re?D(I,R,P,K):null;case te:return re=P._init,$(I,R,re(P._payload),K)}if(Ui(P)||ce(P))return re!==null?null:z(I,R,P,K,null);rl(I,P)}return null}function J(I,R,P,K,re){if(typeof K=="string"&&K!==""||typeof K=="number")return I=I.get(P)||null,_(R,I,""+K,re);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case F:return I=I.get(K.key===null?P:K.key)||null,T(R,I,K,re);case W:return I=I.get(K.key===null?P:K.key)||null,D(R,I,K,re);case te:var oe=K._init;return J(I,R,P,oe(K._payload),re)}if(Ui(K)||ce(K))return I=I.get(P)||null,z(R,I,K,re,null);rl(R,K)}return null}function Z(I,R,P,K){for(var re=null,oe=null,ae=R,de=R=0,ot=null;ae!==null&&de<P.length;de++){ae.index>de?(ot=ae,ae=null):ot=ae.sibling;var Ce=$(I,ae,P[de],K);if(Ce===null){ae===null&&(ae=ot);break}o&&ae&&Ce.alternate===null&&l(I,ae),R=v(Ce,R,de),oe===null?re=Ce:oe.sibling=Ce,oe=Ce,ae=ot}if(de===P.length)return d(I,ae),je&&ss(I,de),re;if(ae===null){for(;de<P.length;de++)ae=H(I,P[de],K),ae!==null&&(R=v(ae,R,de),oe===null?re=ae:oe.sibling=ae,oe=ae);return je&&ss(I,de),re}for(ae=f(I,ae);de<P.length;de++)ot=J(ae,I,de,P[de],K),ot!==null&&(o&&ot.alternate!==null&&ae.delete(ot.key===null?de:ot.key),R=v(ot,R,de),oe===null?re=ot:oe.sibling=ot,oe=ot);return o&&ae.forEach(function(Or){return l(I,Or)}),je&&ss(I,de),re}function ne(I,R,P,K){var re=ce(P);if(typeof re!="function")throw Error(t(150));if(P=re.call(P),P==null)throw Error(t(151));for(var oe=re=null,ae=R,de=R=0,ot=null,Ce=P.next();ae!==null&&!Ce.done;de++,Ce=P.next()){ae.index>de?(ot=ae,ae=null):ot=ae.sibling;var Or=$(I,ae,Ce.value,K);if(Or===null){ae===null&&(ae=ot);break}o&&ae&&Or.alternate===null&&l(I,ae),R=v(Or,R,de),oe===null?re=Or:oe.sibling=Or,oe=Or,ae=ot}if(Ce.done)return d(I,ae),je&&ss(I,de),re;if(ae===null){for(;!Ce.done;de++,Ce=P.next())Ce=H(I,Ce.value,K),Ce!==null&&(R=v(Ce,R,de),oe===null?re=Ce:oe.sibling=Ce,oe=Ce);return je&&ss(I,de),re}for(ae=f(I,ae);!Ce.done;de++,Ce=P.next())Ce=J(ae,I,de,Ce.value,K),Ce!==null&&(o&&Ce.alternate!==null&&ae.delete(Ce.key===null?de:Ce.key),R=v(Ce,R,de),oe===null?re=Ce:oe.sibling=Ce,oe=Ce);return o&&ae.forEach(function(ib){return l(I,ib)}),je&&ss(I,de),re}function Ge(I,R,P,K){if(typeof P=="object"&&P!==null&&P.type===L&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case F:e:{for(var re=P.key,oe=R;oe!==null;){if(oe.key===re){if(re=P.type,re===L){if(oe.tag===7){d(I,oe.sibling),R=g(oe,P.props.children),R.return=I,I=R;break e}}else if(oe.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===te&&pg(re)===oe.type){d(I,oe.sibling),R=g(oe,P.props),R.ref=fo(I,oe,P),R.return=I,I=R;break e}d(I,oe);break}else l(I,oe);oe=oe.sibling}P.type===L?(R=fs(P.props.children,I.mode,K,P.key),R.return=I,I=R):(K=Tl(P.type,P.key,P.props,null,I.mode,K),K.ref=fo(I,R,P),K.return=I,I=K)}return S(I);case W:e:{for(oe=P.key;R!==null;){if(R.key===oe)if(R.tag===4&&R.stateNode.containerInfo===P.containerInfo&&R.stateNode.implementation===P.implementation){d(I,R.sibling),R=g(R,P.children||[]),R.return=I,I=R;break e}else{d(I,R);break}else l(I,R);R=R.sibling}R=rh(P,I.mode,K),R.return=I,I=R}return S(I);case te:return oe=P._init,Ge(I,R,oe(P._payload),K)}if(Ui(P))return Z(I,R,P,K);if(ce(P))return ne(I,R,P,K);rl(I,P)}return typeof P=="string"&&P!==""||typeof P=="number"?(P=""+P,R!==null&&R.tag===6?(d(I,R.sibling),R=g(R,P),R.return=I,I=R):(d(I,R),R=nh(P,I.mode,K),R.return=I,I=R),S(I)):d(I,R)}return Ge}var ni=mg(!0),gg=mg(!1),sl=yr(null),il=null,ri=null,hd=null;function fd(){hd=ri=il=null}function pd(o){var l=sl.current;Ie(sl),o._currentValue=l}function md(o,l,d){for(;o!==null;){var f=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,f!==null&&(f.childLanes|=l)):f!==null&&(f.childLanes&l)!==l&&(f.childLanes|=l),o===d)break;o=o.return}}function si(o,l){il=o,hd=ri=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&l)!==0&&(Bt=!0),o.firstContext=null)}function on(o){var l=o._currentValue;if(hd!==o)if(o={context:o,memoizedValue:l,next:null},ri===null){if(il===null)throw Error(t(308));ri=o,il.dependencies={lanes:0,firstContext:o}}else ri=ri.next=o;return l}var is=null;function gd(o){is===null?is=[o]:is.push(o)}function yg(o,l,d,f){var g=l.interleaved;return g===null?(d.next=d,gd(l)):(d.next=g.next,g.next=d),l.interleaved=d,qn(o,f)}function qn(o,l){o.lanes|=l;var d=o.alternate;for(d!==null&&(d.lanes|=l),d=o,o=o.return;o!==null;)o.childLanes|=l,d=o.alternate,d!==null&&(d.childLanes|=l),d=o,o=o.return;return d.tag===3?d.stateNode:null}var kr=!1;function yd(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vg(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Gn(o,l){return{eventTime:o,lane:l,tag:0,payload:null,callback:null,next:null}}function xr(o,l,d){var f=o.updateQueue;if(f===null)return null;if(f=f.shared,(Se&2)!==0){var g=f.pending;return g===null?l.next=l:(l.next=g.next,g.next=l),f.pending=l,qn(o,d)}return g=f.interleaved,g===null?(l.next=l,gd(f)):(l.next=g.next,g.next=l),f.interleaved=l,qn(o,d)}function ol(o,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194240)!==0)){var f=l.lanes;f&=o.pendingLanes,d|=f,l.lanes=d,Ac(o,d)}}function wg(o,l){var d=o.updateQueue,f=o.alternate;if(f!==null&&(f=f.updateQueue,d===f)){var g=null,v=null;if(d=d.firstBaseUpdate,d!==null){do{var S={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};v===null?g=v=S:v=v.next=S,d=d.next}while(d!==null);v===null?g=v=l:v=v.next=l}else g=v=l;d={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:f.shared,effects:f.effects},o.updateQueue=d;return}o=d.lastBaseUpdate,o===null?d.firstBaseUpdate=l:o.next=l,d.lastBaseUpdate=l}function al(o,l,d,f){var g=o.updateQueue;kr=!1;var v=g.firstBaseUpdate,S=g.lastBaseUpdate,_=g.shared.pending;if(_!==null){g.shared.pending=null;var T=_,D=T.next;T.next=null,S===null?v=D:S.next=D,S=T;var z=o.alternate;z!==null&&(z=z.updateQueue,_=z.lastBaseUpdate,_!==S&&(_===null?z.firstBaseUpdate=D:_.next=D,z.lastBaseUpdate=T))}if(v!==null){var H=g.baseState;S=0,z=D=T=null,_=v;do{var $=_.lane,J=_.eventTime;if((f&$)===$){z!==null&&(z=z.next={eventTime:J,lane:0,tag:_.tag,payload:_.payload,callback:_.callback,next:null});e:{var Z=o,ne=_;switch($=l,J=d,ne.tag){case 1:if(Z=ne.payload,typeof Z=="function"){H=Z.call(J,H,$);break e}H=Z;break e;case 3:Z.flags=Z.flags&-65537|128;case 0:if(Z=ne.payload,$=typeof Z=="function"?Z.call(J,H,$):Z,$==null)break e;H=X({},H,$);break e;case 2:kr=!0}}_.callback!==null&&_.lane!==0&&(o.flags|=64,$=g.effects,$===null?g.effects=[_]:$.push(_))}else J={eventTime:J,lane:$,tag:_.tag,payload:_.payload,callback:_.callback,next:null},z===null?(D=z=J,T=H):z=z.next=J,S|=$;if(_=_.next,_===null){if(_=g.shared.pending,_===null)break;$=_,_=$.next,$.next=null,g.lastBaseUpdate=$,g.shared.pending=null}}while(!0);if(z===null&&(T=H),g.baseState=T,g.firstBaseUpdate=D,g.lastBaseUpdate=z,l=g.shared.interleaved,l!==null){g=l;do S|=g.lane,g=g.next;while(g!==l)}else v===null&&(g.shared.lanes=0);us|=S,o.lanes=S,o.memoizedState=H}}function kg(o,l,d){if(o=l.effects,l.effects=null,o!==null)for(l=0;l<o.length;l++){var f=o[l],g=f.callback;if(g!==null){if(f.callback=null,f=d,typeof g!="function")throw Error(t(191,g));g.call(f)}}}var po={},In=yr(po),mo=yr(po),go=yr(po);function as(o){if(o===po)throw Error(t(174));return o}function vd(o,l){switch(Ne(go,l),Ne(mo,o),Ne(In,po),o=l.nodeType,o){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:wc(null,"");break;default:o=o===8?l.parentNode:l,l=o.namespaceURI||null,o=o.tagName,l=wc(l,o)}Ie(In),Ne(In,l)}function ii(){Ie(In),Ie(mo),Ie(go)}function xg(o){as(go.current);var l=as(In.current),d=wc(l,o.type);l!==d&&(Ne(mo,o),Ne(In,d))}function wd(o){mo.current===o&&(Ie(In),Ie(mo))}var $e=yr(0);function ll(o){for(var l=o;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var kd=[];function xd(){for(var o=0;o<kd.length;o++)kd[o]._workInProgressVersionPrimary=null;kd.length=0}var ul=j.ReactCurrentDispatcher,Sd=j.ReactCurrentBatchConfig,ls=0,Be=null,Xe=null,st=null,cl=!1,yo=!1,vo=0,TS=0;function Ct(){throw Error(t(321))}function bd(o,l){if(l===null)return!1;for(var d=0;d<l.length&&d<o.length;d++)if(!wn(o[d],l[d]))return!1;return!0}function Ed(o,l,d,f,g,v){if(ls=v,Be=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,ul.current=o===null||o.memoizedState===null?AS:MS,o=d(f,g),yo){v=0;do{if(yo=!1,vo=0,25<=v)throw Error(t(301));v+=1,st=Xe=null,l.updateQueue=null,ul.current=IS,o=d(f,g)}while(yo)}if(ul.current=fl,l=Xe!==null&&Xe.next!==null,ls=0,st=Xe=Be=null,cl=!1,l)throw Error(t(300));return o}function Cd(){var o=vo!==0;return vo=0,o}function Pn(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?Be.memoizedState=st=o:st=st.next=o,st}function an(){if(Xe===null){var o=Be.alternate;o=o!==null?o.memoizedState:null}else o=Xe.next;var l=st===null?Be.memoizedState:st.next;if(l!==null)st=l,Xe=o;else{if(o===null)throw Error(t(310));Xe=o,o={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},st===null?Be.memoizedState=st=o:st=st.next=o}return st}function wo(o,l){return typeof l=="function"?l(o):l}function _d(o){var l=an(),d=l.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=o;var f=Xe,g=f.baseQueue,v=d.pending;if(v!==null){if(g!==null){var S=g.next;g.next=v.next,v.next=S}f.baseQueue=g=v,d.pending=null}if(g!==null){v=g.next,f=f.baseState;var _=S=null,T=null,D=v;do{var z=D.lane;if((ls&z)===z)T!==null&&(T=T.next={lane:0,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null}),f=D.hasEagerState?D.eagerState:o(f,D.action);else{var H={lane:z,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null};T===null?(_=T=H,S=f):T=T.next=H,Be.lanes|=z,us|=z}D=D.next}while(D!==null&&D!==v);T===null?S=f:T.next=_,wn(f,l.memoizedState)||(Bt=!0),l.memoizedState=f,l.baseState=S,l.baseQueue=T,d.lastRenderedState=f}if(o=d.interleaved,o!==null){g=o;do v=g.lane,Be.lanes|=v,us|=v,g=g.next;while(g!==o)}else g===null&&(d.lanes=0);return[l.memoizedState,d.dispatch]}function Td(o){var l=an(),d=l.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=o;var f=d.dispatch,g=d.pending,v=l.memoizedState;if(g!==null){d.pending=null;var S=g=g.next;do v=o(v,S.action),S=S.next;while(S!==g);wn(v,l.memoizedState)||(Bt=!0),l.memoizedState=v,l.baseQueue===null&&(l.baseState=v),d.lastRenderedState=v}return[v,f]}function Sg(){}function bg(o,l){var d=Be,f=an(),g=l(),v=!wn(f.memoizedState,g);if(v&&(f.memoizedState=g,Bt=!0),f=f.queue,Od(_g.bind(null,d,f,o),[o]),f.getSnapshot!==l||v||st!==null&&st.memoizedState.tag&1){if(d.flags|=2048,ko(9,Cg.bind(null,d,f,g,l),void 0,null),it===null)throw Error(t(349));(ls&30)!==0||Eg(d,l,g)}return g}function Eg(o,l,d){o.flags|=16384,o={getSnapshot:l,value:d},l=Be.updateQueue,l===null?(l={lastEffect:null,stores:null},Be.updateQueue=l,l.stores=[o]):(d=l.stores,d===null?l.stores=[o]:d.push(o))}function Cg(o,l,d,f){l.value=d,l.getSnapshot=f,Tg(l)&&Og(o)}function _g(o,l,d){return d(function(){Tg(l)&&Og(o)})}function Tg(o){var l=o.getSnapshot;o=o.value;try{var d=l();return!wn(o,d)}catch{return!0}}function Og(o){var l=qn(o,1);l!==null&&En(l,o,1,-1)}function Rg(o){var l=Pn();return typeof o=="function"&&(o=o()),l.memoizedState=l.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:o},l.queue=o,o=o.dispatch=NS.bind(null,Be,o),[l.memoizedState,o]}function ko(o,l,d,f){return o={tag:o,create:l,destroy:d,deps:f,next:null},l=Be.updateQueue,l===null?(l={lastEffect:null,stores:null},Be.updateQueue=l,l.lastEffect=o.next=o):(d=l.lastEffect,d===null?l.lastEffect=o.next=o:(f=d.next,d.next=o,o.next=f,l.lastEffect=o)),o}function Ng(){return an().memoizedState}function dl(o,l,d,f){var g=Pn();Be.flags|=o,g.memoizedState=ko(1|l,d,void 0,f===void 0?null:f)}function hl(o,l,d,f){var g=an();f=f===void 0?null:f;var v=void 0;if(Xe!==null){var S=Xe.memoizedState;if(v=S.destroy,f!==null&&bd(f,S.deps)){g.memoizedState=ko(l,d,v,f);return}}Be.flags|=o,g.memoizedState=ko(1|l,d,v,f)}function Ag(o,l){return dl(8390656,8,o,l)}function Od(o,l){return hl(2048,8,o,l)}function Mg(o,l){return hl(4,2,o,l)}function Ig(o,l){return hl(4,4,o,l)}function Pg(o,l){if(typeof l=="function")return o=o(),l(o),function(){l(null)};if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function Dg(o,l,d){return d=d!=null?d.concat([o]):null,hl(4,4,Pg.bind(null,l,o),d)}function Rd(){}function Lg(o,l){var d=an();l=l===void 0?null:l;var f=d.memoizedState;return f!==null&&l!==null&&bd(l,f[1])?f[0]:(d.memoizedState=[o,l],o)}function jg(o,l){var d=an();l=l===void 0?null:l;var f=d.memoizedState;return f!==null&&l!==null&&bd(l,f[1])?f[0]:(o=o(),d.memoizedState=[o,l],o)}function $g(o,l,d){return(ls&21)===0?(o.baseState&&(o.baseState=!1,Bt=!0),o.memoizedState=d):(wn(d,l)||(d=pm(),Be.lanes|=d,us|=d,o.baseState=!0),l)}function OS(o,l){var d=Te;Te=d!==0&&4>d?d:4,o(!0);var f=Sd.transition;Sd.transition={};try{o(!1),l()}finally{Te=d,Sd.transition=f}}function Bg(){return an().memoizedState}function RS(o,l,d){var f=Cr(o);if(d={lane:f,action:d,hasEagerState:!1,eagerState:null,next:null},zg(o))Ug(l,d);else if(d=yg(o,l,d,f),d!==null){var g=Pt();En(d,o,f,g),Fg(d,l,f)}}function NS(o,l,d){var f=Cr(o),g={lane:f,action:d,hasEagerState:!1,eagerState:null,next:null};if(zg(o))Ug(l,g);else{var v=o.alternate;if(o.lanes===0&&(v===null||v.lanes===0)&&(v=l.lastRenderedReducer,v!==null))try{var S=l.lastRenderedState,_=v(S,d);if(g.hasEagerState=!0,g.eagerState=_,wn(_,S)){var T=l.interleaved;T===null?(g.next=g,gd(l)):(g.next=T.next,T.next=g),l.interleaved=g;return}}catch{}finally{}d=yg(o,l,g,f),d!==null&&(g=Pt(),En(d,o,f,g),Fg(d,l,f))}}function zg(o){var l=o.alternate;return o===Be||l!==null&&l===Be}function Ug(o,l){yo=cl=!0;var d=o.pending;d===null?l.next=l:(l.next=d.next,d.next=l),o.pending=l}function Fg(o,l,d){if((d&4194240)!==0){var f=l.lanes;f&=o.pendingLanes,d|=f,l.lanes=d,Ac(o,d)}}var fl={readContext:on,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useInsertionEffect:Ct,useLayoutEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useMutableSource:Ct,useSyncExternalStore:Ct,useId:Ct,unstable_isNewReconciler:!1},AS={readContext:on,useCallback:function(o,l){return Pn().memoizedState=[o,l===void 0?null:l],o},useContext:on,useEffect:Ag,useImperativeHandle:function(o,l,d){return d=d!=null?d.concat([o]):null,dl(4194308,4,Pg.bind(null,l,o),d)},useLayoutEffect:function(o,l){return dl(4194308,4,o,l)},useInsertionEffect:function(o,l){return dl(4,2,o,l)},useMemo:function(o,l){var d=Pn();return l=l===void 0?null:l,o=o(),d.memoizedState=[o,l],o},useReducer:function(o,l,d){var f=Pn();return l=d!==void 0?d(l):l,f.memoizedState=f.baseState=l,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:l},f.queue=o,o=o.dispatch=RS.bind(null,Be,o),[f.memoizedState,o]},useRef:function(o){var l=Pn();return o={current:o},l.memoizedState=o},useState:Rg,useDebugValue:Rd,useDeferredValue:function(o){return Pn().memoizedState=o},useTransition:function(){var o=Rg(!1),l=o[0];return o=OS.bind(null,o[1]),Pn().memoizedState=o,[l,o]},useMutableSource:function(){},useSyncExternalStore:function(o,l,d){var f=Be,g=Pn();if(je){if(d===void 0)throw Error(t(407));d=d()}else{if(d=l(),it===null)throw Error(t(349));(ls&30)!==0||Eg(f,l,d)}g.memoizedState=d;var v={value:d,getSnapshot:l};return g.queue=v,Ag(_g.bind(null,f,v,o),[o]),f.flags|=2048,ko(9,Cg.bind(null,f,v,d,l),void 0,null),d},useId:function(){var o=Pn(),l=it.identifierPrefix;if(je){var d=Kn,f=Wn;d=(f&~(1<<32-vn(f)-1)).toString(32)+d,l=":"+l+"R"+d,d=vo++,0<d&&(l+="H"+d.toString(32)),l+=":"}else d=TS++,l=":"+l+"r"+d.toString(32)+":";return o.memoizedState=l},unstable_isNewReconciler:!1},MS={readContext:on,useCallback:Lg,useContext:on,useEffect:Od,useImperativeHandle:Dg,useInsertionEffect:Mg,useLayoutEffect:Ig,useMemo:jg,useReducer:_d,useRef:Ng,useState:function(){return _d(wo)},useDebugValue:Rd,useDeferredValue:function(o){var l=an();return $g(l,Xe.memoizedState,o)},useTransition:function(){var o=_d(wo)[0],l=an().memoizedState;return[o,l]},useMutableSource:Sg,useSyncExternalStore:bg,useId:Bg,unstable_isNewReconciler:!1},IS={readContext:on,useCallback:Lg,useContext:on,useEffect:Od,useImperativeHandle:Dg,useInsertionEffect:Mg,useLayoutEffect:Ig,useMemo:jg,useReducer:Td,useRef:Ng,useState:function(){return Td(wo)},useDebugValue:Rd,useDeferredValue:function(o){var l=an();return Xe===null?l.memoizedState=o:$g(l,Xe.memoizedState,o)},useTransition:function(){var o=Td(wo)[0],l=an().memoizedState;return[o,l]},useMutableSource:Sg,useSyncExternalStore:bg,useId:Bg,unstable_isNewReconciler:!1};function xn(o,l){if(o&&o.defaultProps){l=X({},l),o=o.defaultProps;for(var d in o)l[d]===void 0&&(l[d]=o[d]);return l}return l}function Nd(o,l,d,f){l=o.memoizedState,d=d(f,l),d=d==null?l:X({},l,d),o.memoizedState=d,o.lanes===0&&(o.updateQueue.baseState=d)}var pl={isMounted:function(o){return(o=o._reactInternals)?es(o)===o:!1},enqueueSetState:function(o,l,d){o=o._reactInternals;var f=Pt(),g=Cr(o),v=Gn(f,g);v.payload=l,d!=null&&(v.callback=d),l=xr(o,v,g),l!==null&&(En(l,o,g,f),ol(l,o,g))},enqueueReplaceState:function(o,l,d){o=o._reactInternals;var f=Pt(),g=Cr(o),v=Gn(f,g);v.tag=1,v.payload=l,d!=null&&(v.callback=d),l=xr(o,v,g),l!==null&&(En(l,o,g,f),ol(l,o,g))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var d=Pt(),f=Cr(o),g=Gn(d,f);g.tag=2,l!=null&&(g.callback=l),l=xr(o,g,f),l!==null&&(En(l,o,f,d),ol(l,o,f))}};function Hg(o,l,d,f,g,v,S){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(f,v,S):l.prototype&&l.prototype.isPureReactComponent?!io(d,f)||!io(g,v):!0}function Vg(o,l,d){var f=!1,g=vr,v=l.contextType;return typeof v=="object"&&v!==null?v=on(v):(g=$t(l)?ns:Et.current,f=l.contextTypes,v=(f=f!=null)?Xs(o,g):vr),l=new l(d,v),o.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=pl,o.stateNode=l,l._reactInternals=o,f&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=g,o.__reactInternalMemoizedMaskedChildContext=v),l}function Wg(o,l,d,f){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,f),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,f),l.state!==o&&pl.enqueueReplaceState(l,l.state,null)}function Ad(o,l,d,f){var g=o.stateNode;g.props=d,g.state=o.memoizedState,g.refs={},yd(o);var v=l.contextType;typeof v=="object"&&v!==null?g.context=on(v):(v=$t(l)?ns:Et.current,g.context=Xs(o,v)),g.state=o.memoizedState,v=l.getDerivedStateFromProps,typeof v=="function"&&(Nd(o,l,v,d),g.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(l=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),l!==g.state&&pl.enqueueReplaceState(g,g.state,null),al(o,d,g,f),g.state=o.memoizedState),typeof g.componentDidMount=="function"&&(o.flags|=4194308)}function oi(o,l){try{var d="",f=l;do d+=be(f),f=f.return;while(f);var g=d}catch(v){g=`
Error generating stack: `+v.message+`
`+v.stack}return{value:o,source:l,stack:g,digest:null}}function Md(o,l,d){return{value:o,source:null,stack:d??null,digest:l??null}}function Id(o,l){try{console.error(l.value)}catch(d){setTimeout(function(){throw d})}}var PS=typeof WeakMap=="function"?WeakMap:Map;function Kg(o,l,d){d=Gn(-1,d),d.tag=3,d.payload={element:null};var f=l.value;return d.callback=function(){xl||(xl=!0,Gd=f),Id(o,l)},d}function qg(o,l,d){d=Gn(-1,d),d.tag=3;var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var g=l.value;d.payload=function(){return f(g)},d.callback=function(){Id(o,l)}}var v=o.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(d.callback=function(){Id(o,l),typeof f!="function"&&(br===null?br=new Set([this]):br.add(this));var S=l.stack;this.componentDidCatch(l.value,{componentStack:S!==null?S:""})}),d}function Gg(o,l,d){var f=o.pingCache;if(f===null){f=o.pingCache=new PS;var g=new Set;f.set(l,g)}else g=f.get(l),g===void 0&&(g=new Set,f.set(l,g));g.has(d)||(g.add(d),o=GS.bind(null,o,l,d),l.then(o,o))}function Jg(o){do{var l;if((l=o.tag===13)&&(l=o.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return o;o=o.return}while(o!==null);return null}function Yg(o,l,d,f,g){return(o.mode&1)===0?(o===l?o.flags|=65536:(o.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(l=Gn(-1,1),l.tag=2,xr(d,l,1))),d.lanes|=1),o):(o.flags|=65536,o.lanes=g,o)}var DS=j.ReactCurrentOwner,Bt=!1;function It(o,l,d,f){l.child=o===null?gg(l,null,d,f):ni(l,o.child,d,f)}function Qg(o,l,d,f,g){d=d.render;var v=l.ref;return si(l,g),f=Ed(o,l,d,f,v,g),d=Cd(),o!==null&&!Bt?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~g,Jn(o,l,g)):(je&&d&&ad(l),l.flags|=1,It(o,l,f,g),l.child)}function Xg(o,l,d,f,g){if(o===null){var v=d.type;return typeof v=="function"&&!th(v)&&v.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(l.tag=15,l.type=v,Zg(o,l,v,f,g)):(o=Tl(d.type,null,f,l,l.mode,g),o.ref=l.ref,o.return=l,l.child=o)}if(v=o.child,(o.lanes&g)===0){var S=v.memoizedProps;if(d=d.compare,d=d!==null?d:io,d(S,f)&&o.ref===l.ref)return Jn(o,l,g)}return l.flags|=1,o=Tr(v,f),o.ref=l.ref,o.return=l,l.child=o}function Zg(o,l,d,f,g){if(o!==null){var v=o.memoizedProps;if(io(v,f)&&o.ref===l.ref)if(Bt=!1,l.pendingProps=f=v,(o.lanes&g)!==0)(o.flags&131072)!==0&&(Bt=!0);else return l.lanes=o.lanes,Jn(o,l,g)}return Pd(o,l,d,f,g)}function ey(o,l,d){var f=l.pendingProps,g=f.children,v=o!==null?o.memoizedState:null;if(f.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(li,Yt),Yt|=d;else{if((d&1073741824)===0)return o=v!==null?v.baseLanes|d:d,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:o,cachePool:null,transitions:null},l.updateQueue=null,Ne(li,Yt),Yt|=o,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=v!==null?v.baseLanes:d,Ne(li,Yt),Yt|=f}else v!==null?(f=v.baseLanes|d,l.memoizedState=null):f=d,Ne(li,Yt),Yt|=f;return It(o,l,g,d),l.child}function ty(o,l){var d=l.ref;(o===null&&d!==null||o!==null&&o.ref!==d)&&(l.flags|=512,l.flags|=2097152)}function Pd(o,l,d,f,g){var v=$t(d)?ns:Et.current;return v=Xs(l,v),si(l,g),d=Ed(o,l,d,f,v,g),f=Cd(),o!==null&&!Bt?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~g,Jn(o,l,g)):(je&&f&&ad(l),l.flags|=1,It(o,l,d,g),l.child)}function ny(o,l,d,f,g){if($t(d)){var v=!0;Xa(l)}else v=!1;if(si(l,g),l.stateNode===null)gl(o,l),Vg(l,d,f),Ad(l,d,f,g),f=!0;else if(o===null){var S=l.stateNode,_=l.memoizedProps;S.props=_;var T=S.context,D=d.contextType;typeof D=="object"&&D!==null?D=on(D):(D=$t(d)?ns:Et.current,D=Xs(l,D));var z=d.getDerivedStateFromProps,H=typeof z=="function"||typeof S.getSnapshotBeforeUpdate=="function";H||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(_!==f||T!==D)&&Wg(l,S,f,D),kr=!1;var $=l.memoizedState;S.state=$,al(l,f,S,g),T=l.memoizedState,_!==f||$!==T||jt.current||kr?(typeof z=="function"&&(Nd(l,d,z,f),T=l.memoizedState),(_=kr||Hg(l,d,_,f,$,T,D))?(H||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(l.flags|=4194308)):(typeof S.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=f,l.memoizedState=T),S.props=f,S.state=T,S.context=D,f=_):(typeof S.componentDidMount=="function"&&(l.flags|=4194308),f=!1)}else{S=l.stateNode,vg(o,l),_=l.memoizedProps,D=l.type===l.elementType?_:xn(l.type,_),S.props=D,H=l.pendingProps,$=S.context,T=d.contextType,typeof T=="object"&&T!==null?T=on(T):(T=$t(d)?ns:Et.current,T=Xs(l,T));var J=d.getDerivedStateFromProps;(z=typeof J=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(_!==H||$!==T)&&Wg(l,S,f,T),kr=!1,$=l.memoizedState,S.state=$,al(l,f,S,g);var Z=l.memoizedState;_!==H||$!==Z||jt.current||kr?(typeof J=="function"&&(Nd(l,d,J,f),Z=l.memoizedState),(D=kr||Hg(l,d,D,f,$,Z,T)||!1)?(z||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(f,Z,T),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(f,Z,T)),typeof S.componentDidUpdate=="function"&&(l.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof S.componentDidUpdate!="function"||_===o.memoizedProps&&$===o.memoizedState||(l.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||_===o.memoizedProps&&$===o.memoizedState||(l.flags|=1024),l.memoizedProps=f,l.memoizedState=Z),S.props=f,S.state=Z,S.context=T,f=D):(typeof S.componentDidUpdate!="function"||_===o.memoizedProps&&$===o.memoizedState||(l.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||_===o.memoizedProps&&$===o.memoizedState||(l.flags|=1024),f=!1)}return Dd(o,l,d,f,v,g)}function Dd(o,l,d,f,g,v){ty(o,l);var S=(l.flags&128)!==0;if(!f&&!S)return g&&ag(l,d,!1),Jn(o,l,v);f=l.stateNode,DS.current=l;var _=S&&typeof d.getDerivedStateFromError!="function"?null:f.render();return l.flags|=1,o!==null&&S?(l.child=ni(l,o.child,null,v),l.child=ni(l,null,_,v)):It(o,l,_,v),l.memoizedState=f.state,g&&ag(l,d,!0),l.child}function ry(o){var l=o.stateNode;l.pendingContext?ig(o,l.pendingContext,l.pendingContext!==l.context):l.context&&ig(o,l.context,!1),vd(o,l.containerInfo)}function sy(o,l,d,f,g){return ti(),dd(g),l.flags|=256,It(o,l,d,f),l.child}var Ld={dehydrated:null,treeContext:null,retryLane:0};function jd(o){return{baseLanes:o,cachePool:null,transitions:null}}function iy(o,l,d){var f=l.pendingProps,g=$e.current,v=!1,S=(l.flags&128)!==0,_;if((_=S)||(_=o!==null&&o.memoizedState===null?!1:(g&2)!==0),_?(v=!0,l.flags&=-129):(o===null||o.memoizedState!==null)&&(g|=1),Ne($e,g&1),o===null)return cd(l),o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((l.mode&1)===0?l.lanes=1:o.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(S=f.children,o=f.fallback,v?(f=l.mode,v=l.child,S={mode:"hidden",children:S},(f&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=S):v=Ol(S,f,0,null),o=fs(o,f,d,null),v.return=l,o.return=l,v.sibling=o,l.child=v,l.child.memoizedState=jd(d),l.memoizedState=Ld,o):$d(l,S));if(g=o.memoizedState,g!==null&&(_=g.dehydrated,_!==null))return LS(o,l,S,f,_,g,d);if(v){v=f.fallback,S=l.mode,g=o.child,_=g.sibling;var T={mode:"hidden",children:f.children};return(S&1)===0&&l.child!==g?(f=l.child,f.childLanes=0,f.pendingProps=T,l.deletions=null):(f=Tr(g,T),f.subtreeFlags=g.subtreeFlags&14680064),_!==null?v=Tr(_,v):(v=fs(v,S,d,null),v.flags|=2),v.return=l,f.return=l,f.sibling=v,l.child=f,f=v,v=l.child,S=o.child.memoizedState,S=S===null?jd(d):{baseLanes:S.baseLanes|d,cachePool:null,transitions:S.transitions},v.memoizedState=S,v.childLanes=o.childLanes&~d,l.memoizedState=Ld,f}return v=o.child,o=v.sibling,f=Tr(v,{mode:"visible",children:f.children}),(l.mode&1)===0&&(f.lanes=d),f.return=l,f.sibling=null,o!==null&&(d=l.deletions,d===null?(l.deletions=[o],l.flags|=16):d.push(o)),l.child=f,l.memoizedState=null,f}function $d(o,l){return l=Ol({mode:"visible",children:l},o.mode,0,null),l.return=o,o.child=l}function ml(o,l,d,f){return f!==null&&dd(f),ni(l,o.child,null,d),o=$d(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function LS(o,l,d,f,g,v,S){if(d)return l.flags&256?(l.flags&=-257,f=Md(Error(t(422))),ml(o,l,S,f)):l.memoizedState!==null?(l.child=o.child,l.flags|=128,null):(v=f.fallback,g=l.mode,f=Ol({mode:"visible",children:f.children},g,0,null),v=fs(v,g,S,null),v.flags|=2,f.return=l,v.return=l,f.sibling=v,l.child=f,(l.mode&1)!==0&&ni(l,o.child,null,S),l.child.memoizedState=jd(S),l.memoizedState=Ld,v);if((l.mode&1)===0)return ml(o,l,S,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var _=f.dgst;return f=_,v=Error(t(419)),f=Md(v,f,void 0),ml(o,l,S,f)}if(_=(S&o.childLanes)!==0,Bt||_){if(f=it,f!==null){switch(S&-S){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|S))!==0?0:g,g!==0&&g!==v.retryLane&&(v.retryLane=g,qn(o,g),En(f,o,g,-1))}return eh(),f=Md(Error(t(421))),ml(o,l,S,f)}return g.data==="$?"?(l.flags|=128,l.child=o.child,l=JS.bind(null,o),g._reactRetry=l,null):(o=v.treeContext,Jt=gr(g.nextSibling),Gt=l,je=!0,kn=null,o!==null&&(rn[sn++]=Wn,rn[sn++]=Kn,rn[sn++]=rs,Wn=o.id,Kn=o.overflow,rs=l),l=$d(l,f.children),l.flags|=4096,l)}function oy(o,l,d){o.lanes|=l;var f=o.alternate;f!==null&&(f.lanes|=l),md(o.return,l,d)}function Bd(o,l,d,f,g){var v=o.memoizedState;v===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:f,tail:d,tailMode:g}:(v.isBackwards=l,v.rendering=null,v.renderingStartTime=0,v.last=f,v.tail=d,v.tailMode=g)}function ay(o,l,d){var f=l.pendingProps,g=f.revealOrder,v=f.tail;if(It(o,l,f.children,d),f=$e.current,(f&2)!==0)f=f&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&oy(o,d,l);else if(o.tag===19)oy(o,d,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}f&=1}if(Ne($e,f),(l.mode&1)===0)l.memoizedState=null;else switch(g){case"forwards":for(d=l.child,g=null;d!==null;)o=d.alternate,o!==null&&ll(o)===null&&(g=d),d=d.sibling;d=g,d===null?(g=l.child,l.child=null):(g=d.sibling,d.sibling=null),Bd(l,!1,g,d,v);break;case"backwards":for(d=null,g=l.child,l.child=null;g!==null;){if(o=g.alternate,o!==null&&ll(o)===null){l.child=g;break}o=g.sibling,g.sibling=d,d=g,g=o}Bd(l,!0,d,null,v);break;case"together":Bd(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function gl(o,l){(l.mode&1)===0&&o!==null&&(o.alternate=null,l.alternate=null,l.flags|=2)}function Jn(o,l,d){if(o!==null&&(l.dependencies=o.dependencies),us|=l.lanes,(d&l.childLanes)===0)return null;if(o!==null&&l.child!==o.child)throw Error(t(153));if(l.child!==null){for(o=l.child,d=Tr(o,o.pendingProps),l.child=d,d.return=l;o.sibling!==null;)o=o.sibling,d=d.sibling=Tr(o,o.pendingProps),d.return=l;d.sibling=null}return l.child}function jS(o,l,d){switch(l.tag){case 3:ry(l),ti();break;case 5:xg(l);break;case 1:$t(l.type)&&Xa(l);break;case 4:vd(l,l.stateNode.containerInfo);break;case 10:var f=l.type._context,g=l.memoizedProps.value;Ne(sl,f._currentValue),f._currentValue=g;break;case 13:if(f=l.memoizedState,f!==null)return f.dehydrated!==null?(Ne($e,$e.current&1),l.flags|=128,null):(d&l.child.childLanes)!==0?iy(o,l,d):(Ne($e,$e.current&1),o=Jn(o,l,d),o!==null?o.sibling:null);Ne($e,$e.current&1);break;case 19:if(f=(d&l.childLanes)!==0,(o.flags&128)!==0){if(f)return ay(o,l,d);l.flags|=128}if(g=l.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Ne($e,$e.current),f)break;return null;case 22:case 23:return l.lanes=0,ey(o,l,d)}return Jn(o,l,d)}var ly,zd,uy,cy;ly=function(o,l){for(var d=l.child;d!==null;){if(d.tag===5||d.tag===6)o.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},zd=function(){},uy=function(o,l,d,f){var g=o.memoizedProps;if(g!==f){o=l.stateNode,as(In.current);var v=null;switch(d){case"input":g=mc(o,g),f=mc(o,f),v=[];break;case"select":g=X({},g,{value:void 0}),f=X({},f,{value:void 0}),v=[];break;case"textarea":g=vc(o,g),f=vc(o,f),v=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(o.onclick=Ja)}kc(d,f);var S;d=null;for(D in g)if(!f.hasOwnProperty(D)&&g.hasOwnProperty(D)&&g[D]!=null)if(D==="style"){var _=g[D];for(S in _)_.hasOwnProperty(S)&&(d||(d={}),d[S]="")}else D!=="dangerouslySetInnerHTML"&&D!=="children"&&D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&D!=="autoFocus"&&(s.hasOwnProperty(D)?v||(v=[]):(v=v||[]).push(D,null));for(D in f){var T=f[D];if(_=g!=null?g[D]:void 0,f.hasOwnProperty(D)&&T!==_&&(T!=null||_!=null))if(D==="style")if(_){for(S in _)!_.hasOwnProperty(S)||T&&T.hasOwnProperty(S)||(d||(d={}),d[S]="");for(S in T)T.hasOwnProperty(S)&&_[S]!==T[S]&&(d||(d={}),d[S]=T[S])}else d||(v||(v=[]),v.push(D,d)),d=T;else D==="dangerouslySetInnerHTML"?(T=T?T.__html:void 0,_=_?_.__html:void 0,T!=null&&_!==T&&(v=v||[]).push(D,T)):D==="children"?typeof T!="string"&&typeof T!="number"||(v=v||[]).push(D,""+T):D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&(s.hasOwnProperty(D)?(T!=null&&D==="onScroll"&&Me("scroll",o),v||_===T||(v=[])):(v=v||[]).push(D,T))}d&&(v=v||[]).push("style",d);var D=v;(l.updateQueue=D)&&(l.flags|=4)}},cy=function(o,l,d,f){d!==f&&(l.flags|=4)};function xo(o,l){if(!je)switch(o.tailMode){case"hidden":l=o.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?o.tail=null:d.sibling=null;break;case"collapsed":d=o.tail;for(var f=null;d!==null;)d.alternate!==null&&(f=d),d=d.sibling;f===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:f.sibling=null}}function _t(o){var l=o.alternate!==null&&o.alternate.child===o.child,d=0,f=0;if(l)for(var g=o.child;g!==null;)d|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=o,g=g.sibling;else for(g=o.child;g!==null;)d|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=o,g=g.sibling;return o.subtreeFlags|=f,o.childLanes=d,l}function $S(o,l,d){var f=l.pendingProps;switch(ld(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(l),null;case 1:return $t(l.type)&&Qa(),_t(l),null;case 3:return f=l.stateNode,ii(),Ie(jt),Ie(Et),xd(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(o===null||o.child===null)&&(nl(l)?l.flags|=4:o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,kn!==null&&(Qd(kn),kn=null))),zd(o,l),_t(l),null;case 5:wd(l);var g=as(go.current);if(d=l.type,o!==null&&l.stateNode!=null)uy(o,l,d,f,g),o.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!f){if(l.stateNode===null)throw Error(t(166));return _t(l),null}if(o=as(In.current),nl(l)){f=l.stateNode,d=l.type;var v=l.memoizedProps;switch(f[Mn]=l,f[co]=v,o=(l.mode&1)!==0,d){case"dialog":Me("cancel",f),Me("close",f);break;case"iframe":case"object":case"embed":Me("load",f);break;case"video":case"audio":for(g=0;g<ao.length;g++)Me(ao[g],f);break;case"source":Me("error",f);break;case"img":case"image":case"link":Me("error",f),Me("load",f);break;case"details":Me("toggle",f);break;case"input":Vp(f,v),Me("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!v.multiple},Me("invalid",f);break;case"textarea":qp(f,v),Me("invalid",f)}kc(d,v),g=null;for(var S in v)if(v.hasOwnProperty(S)){var _=v[S];S==="children"?typeof _=="string"?f.textContent!==_&&(v.suppressHydrationWarning!==!0&&Ga(f.textContent,_,o),g=["children",_]):typeof _=="number"&&f.textContent!==""+_&&(v.suppressHydrationWarning!==!0&&Ga(f.textContent,_,o),g=["children",""+_]):s.hasOwnProperty(S)&&_!=null&&S==="onScroll"&&Me("scroll",f)}switch(d){case"input":Ca(f),Kp(f,v,!0);break;case"textarea":Ca(f),Jp(f);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(f.onclick=Ja)}f=g,l.updateQueue=f,f!==null&&(l.flags|=4)}else{S=g.nodeType===9?g:g.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=Yp(d)),o==="http://www.w3.org/1999/xhtml"?d==="script"?(o=S.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof f.is=="string"?o=S.createElement(d,{is:f.is}):(o=S.createElement(d),d==="select"&&(S=o,f.multiple?S.multiple=!0:f.size&&(S.size=f.size))):o=S.createElementNS(o,d),o[Mn]=l,o[co]=f,ly(o,l,!1,!1),l.stateNode=o;e:{switch(S=xc(d,f),d){case"dialog":Me("cancel",o),Me("close",o),g=f;break;case"iframe":case"object":case"embed":Me("load",o),g=f;break;case"video":case"audio":for(g=0;g<ao.length;g++)Me(ao[g],o);g=f;break;case"source":Me("error",o),g=f;break;case"img":case"image":case"link":Me("error",o),Me("load",o),g=f;break;case"details":Me("toggle",o),g=f;break;case"input":Vp(o,f),g=mc(o,f),Me("invalid",o);break;case"option":g=f;break;case"select":o._wrapperState={wasMultiple:!!f.multiple},g=X({},f,{value:void 0}),Me("invalid",o);break;case"textarea":qp(o,f),g=vc(o,f),Me("invalid",o);break;default:g=f}kc(d,g),_=g;for(v in _)if(_.hasOwnProperty(v)){var T=_[v];v==="style"?Zp(o,T):v==="dangerouslySetInnerHTML"?(T=T?T.__html:void 0,T!=null&&Qp(o,T)):v==="children"?typeof T=="string"?(d!=="textarea"||T!=="")&&Fi(o,T):typeof T=="number"&&Fi(o,""+T):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(s.hasOwnProperty(v)?T!=null&&v==="onScroll"&&Me("scroll",o):T!=null&&O(o,v,T,S))}switch(d){case"input":Ca(o),Kp(o,f,!1);break;case"textarea":Ca(o),Jp(o);break;case"option":f.value!=null&&o.setAttribute("value",""+_e(f.value));break;case"select":o.multiple=!!f.multiple,v=f.value,v!=null?zs(o,!!f.multiple,v,!1):f.defaultValue!=null&&zs(o,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(o.onclick=Ja)}switch(d){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return _t(l),null;case 6:if(o&&l.stateNode!=null)cy(o,l,o.memoizedProps,f);else{if(typeof f!="string"&&l.stateNode===null)throw Error(t(166));if(d=as(go.current),as(In.current),nl(l)){if(f=l.stateNode,d=l.memoizedProps,f[Mn]=l,(v=f.nodeValue!==d)&&(o=Gt,o!==null))switch(o.tag){case 3:Ga(f.nodeValue,d,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Ga(f.nodeValue,d,(o.mode&1)!==0)}v&&(l.flags|=4)}else f=(d.nodeType===9?d:d.ownerDocument).createTextNode(f),f[Mn]=l,l.stateNode=f}return _t(l),null;case 13:if(Ie($e),f=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(je&&Jt!==null&&(l.mode&1)!==0&&(l.flags&128)===0)fg(),ti(),l.flags|=98560,v=!1;else if(v=nl(l),f!==null&&f.dehydrated!==null){if(o===null){if(!v)throw Error(t(318));if(v=l.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[Mn]=l}else ti(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;_t(l),v=!1}else kn!==null&&(Qd(kn),kn=null),v=!0;if(!v)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=d,l):(f=f!==null,f!==(o!==null&&o.memoizedState!==null)&&f&&(l.child.flags|=8192,(l.mode&1)!==0&&(o===null||($e.current&1)!==0?Ze===0&&(Ze=3):eh())),l.updateQueue!==null&&(l.flags|=4),_t(l),null);case 4:return ii(),zd(o,l),o===null&&lo(l.stateNode.containerInfo),_t(l),null;case 10:return pd(l.type._context),_t(l),null;case 17:return $t(l.type)&&Qa(),_t(l),null;case 19:if(Ie($e),v=l.memoizedState,v===null)return _t(l),null;if(f=(l.flags&128)!==0,S=v.rendering,S===null)if(f)xo(v,!1);else{if(Ze!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(S=ll(o),S!==null){for(l.flags|=128,xo(v,!1),f=S.updateQueue,f!==null&&(l.updateQueue=f,l.flags|=4),l.subtreeFlags=0,f=d,d=l.child;d!==null;)v=d,o=f,v.flags&=14680066,S=v.alternate,S===null?(v.childLanes=0,v.lanes=o,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=S.childLanes,v.lanes=S.lanes,v.child=S.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=S.memoizedProps,v.memoizedState=S.memoizedState,v.updateQueue=S.updateQueue,v.type=S.type,o=S.dependencies,v.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),d=d.sibling;return Ne($e,$e.current&1|2),l.child}o=o.sibling}v.tail!==null&&qe()>ui&&(l.flags|=128,f=!0,xo(v,!1),l.lanes=4194304)}else{if(!f)if(o=ll(S),o!==null){if(l.flags|=128,f=!0,d=o.updateQueue,d!==null&&(l.updateQueue=d,l.flags|=4),xo(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!je)return _t(l),null}else 2*qe()-v.renderingStartTime>ui&&d!==1073741824&&(l.flags|=128,f=!0,xo(v,!1),l.lanes=4194304);v.isBackwards?(S.sibling=l.child,l.child=S):(d=v.last,d!==null?d.sibling=S:l.child=S,v.last=S)}return v.tail!==null?(l=v.tail,v.rendering=l,v.tail=l.sibling,v.renderingStartTime=qe(),l.sibling=null,d=$e.current,Ne($e,f?d&1|2:d&1),l):(_t(l),null);case 22:case 23:return Zd(),f=l.memoizedState!==null,o!==null&&o.memoizedState!==null!==f&&(l.flags|=8192),f&&(l.mode&1)!==0?(Yt&1073741824)!==0&&(_t(l),l.subtreeFlags&6&&(l.flags|=8192)):_t(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function BS(o,l){switch(ld(l),l.tag){case 1:return $t(l.type)&&Qa(),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return ii(),Ie(jt),Ie(Et),xd(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 5:return wd(l),null;case 13:if(Ie($e),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(t(340));ti()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return Ie($e),null;case 4:return ii(),null;case 10:return pd(l.type._context),null;case 22:case 23:return Zd(),null;case 24:return null;default:return null}}var yl=!1,Tt=!1,zS=typeof WeakSet=="function"?WeakSet:Set,Q=null;function ai(o,l){var d=o.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(f){Fe(o,l,f)}else d.current=null}function Ud(o,l,d){try{d()}catch(f){Fe(o,l,f)}}var dy=!1;function US(o,l){if(Zc=ja,o=Hm(),Wc(o)){if("selectionStart"in o)var d={start:o.selectionStart,end:o.selectionEnd};else e:{d=(d=o.ownerDocument)&&d.defaultView||window;var f=d.getSelection&&d.getSelection();if(f&&f.rangeCount!==0){d=f.anchorNode;var g=f.anchorOffset,v=f.focusNode;f=f.focusOffset;try{d.nodeType,v.nodeType}catch{d=null;break e}var S=0,_=-1,T=-1,D=0,z=0,H=o,$=null;t:for(;;){for(var J;H!==d||g!==0&&H.nodeType!==3||(_=S+g),H!==v||f!==0&&H.nodeType!==3||(T=S+f),H.nodeType===3&&(S+=H.nodeValue.length),(J=H.firstChild)!==null;)$=H,H=J;for(;;){if(H===o)break t;if($===d&&++D===g&&(_=S),$===v&&++z===f&&(T=S),(J=H.nextSibling)!==null)break;H=$,$=H.parentNode}H=J}d=_===-1||T===-1?null:{start:_,end:T}}else d=null}d=d||{start:0,end:0}}else d=null;for(ed={focusedElem:o,selectionRange:d},ja=!1,Q=l;Q!==null;)if(l=Q,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,Q=o;else for(;Q!==null;){l=Q;try{var Z=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Z!==null){var ne=Z.memoizedProps,Ge=Z.memoizedState,I=l.stateNode,R=I.getSnapshotBeforeUpdate(l.elementType===l.type?ne:xn(l.type,ne),Ge);I.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var P=l.stateNode.containerInfo;P.nodeType===1?P.textContent="":P.nodeType===9&&P.documentElement&&P.removeChild(P.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(K){Fe(l,l.return,K)}if(o=l.sibling,o!==null){o.return=l.return,Q=o;break}Q=l.return}return Z=dy,dy=!1,Z}function So(o,l,d){var f=l.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&o)===o){var v=g.destroy;g.destroy=void 0,v!==void 0&&Ud(l,d,v)}g=g.next}while(g!==f)}}function vl(o,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&o)===o){var f=d.create;d.destroy=f()}d=d.next}while(d!==l)}}function Fd(o){var l=o.ref;if(l!==null){var d=o.stateNode;switch(o.tag){case 5:o=d;break;default:o=d}typeof l=="function"?l(o):l.current=o}}function hy(o){var l=o.alternate;l!==null&&(o.alternate=null,hy(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&(delete l[Mn],delete l[co],delete l[sd],delete l[bS],delete l[ES])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function fy(o){return o.tag===5||o.tag===3||o.tag===4}function py(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||fy(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Hd(o,l,d){var f=o.tag;if(f===5||f===6)o=o.stateNode,l?d.nodeType===8?d.parentNode.insertBefore(o,l):d.insertBefore(o,l):(d.nodeType===8?(l=d.parentNode,l.insertBefore(o,d)):(l=d,l.appendChild(o)),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=Ja));else if(f!==4&&(o=o.child,o!==null))for(Hd(o,l,d),o=o.sibling;o!==null;)Hd(o,l,d),o=o.sibling}function Vd(o,l,d){var f=o.tag;if(f===5||f===6)o=o.stateNode,l?d.insertBefore(o,l):d.appendChild(o);else if(f!==4&&(o=o.child,o!==null))for(Vd(o,l,d),o=o.sibling;o!==null;)Vd(o,l,d),o=o.sibling}var mt=null,Sn=!1;function Sr(o,l,d){for(d=d.child;d!==null;)my(o,l,d),d=d.sibling}function my(o,l,d){if(An&&typeof An.onCommitFiberUnmount=="function")try{An.onCommitFiberUnmount(Aa,d)}catch{}switch(d.tag){case 5:Tt||ai(d,l);case 6:var f=mt,g=Sn;mt=null,Sr(o,l,d),mt=f,Sn=g,mt!==null&&(Sn?(o=mt,d=d.stateNode,o.nodeType===8?o.parentNode.removeChild(d):o.removeChild(d)):mt.removeChild(d.stateNode));break;case 18:mt!==null&&(Sn?(o=mt,d=d.stateNode,o.nodeType===8?rd(o.parentNode,d):o.nodeType===1&&rd(o,d),Zi(o)):rd(mt,d.stateNode));break;case 4:f=mt,g=Sn,mt=d.stateNode.containerInfo,Sn=!0,Sr(o,l,d),mt=f,Sn=g;break;case 0:case 11:case 14:case 15:if(!Tt&&(f=d.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var v=g,S=v.destroy;v=v.tag,S!==void 0&&((v&2)!==0||(v&4)!==0)&&Ud(d,l,S),g=g.next}while(g!==f)}Sr(o,l,d);break;case 1:if(!Tt&&(ai(d,l),f=d.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=d.memoizedProps,f.state=d.memoizedState,f.componentWillUnmount()}catch(_){Fe(d,l,_)}Sr(o,l,d);break;case 21:Sr(o,l,d);break;case 22:d.mode&1?(Tt=(f=Tt)||d.memoizedState!==null,Sr(o,l,d),Tt=f):Sr(o,l,d);break;default:Sr(o,l,d)}}function gy(o){var l=o.updateQueue;if(l!==null){o.updateQueue=null;var d=o.stateNode;d===null&&(d=o.stateNode=new zS),l.forEach(function(f){var g=YS.bind(null,o,f);d.has(f)||(d.add(f),f.then(g,g))})}}function bn(o,l){var d=l.deletions;if(d!==null)for(var f=0;f<d.length;f++){var g=d[f];try{var v=o,S=l,_=S;e:for(;_!==null;){switch(_.tag){case 5:mt=_.stateNode,Sn=!1;break e;case 3:mt=_.stateNode.containerInfo,Sn=!0;break e;case 4:mt=_.stateNode.containerInfo,Sn=!0;break e}_=_.return}if(mt===null)throw Error(t(160));my(v,S,g),mt=null,Sn=!1;var T=g.alternate;T!==null&&(T.return=null),g.return=null}catch(D){Fe(g,l,D)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)yy(l,o),l=l.sibling}function yy(o,l){var d=o.alternate,f=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(bn(l,o),Dn(o),f&4){try{So(3,o,o.return),vl(3,o)}catch(ne){Fe(o,o.return,ne)}try{So(5,o,o.return)}catch(ne){Fe(o,o.return,ne)}}break;case 1:bn(l,o),Dn(o),f&512&&d!==null&&ai(d,d.return);break;case 5:if(bn(l,o),Dn(o),f&512&&d!==null&&ai(d,d.return),o.flags&32){var g=o.stateNode;try{Fi(g,"")}catch(ne){Fe(o,o.return,ne)}}if(f&4&&(g=o.stateNode,g!=null)){var v=o.memoizedProps,S=d!==null?d.memoizedProps:v,_=o.type,T=o.updateQueue;if(o.updateQueue=null,T!==null)try{_==="input"&&v.type==="radio"&&v.name!=null&&Wp(g,v),xc(_,S);var D=xc(_,v);for(S=0;S<T.length;S+=2){var z=T[S],H=T[S+1];z==="style"?Zp(g,H):z==="dangerouslySetInnerHTML"?Qp(g,H):z==="children"?Fi(g,H):O(g,z,H,D)}switch(_){case"input":gc(g,v);break;case"textarea":Gp(g,v);break;case"select":var $=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!v.multiple;var J=v.value;J!=null?zs(g,!!v.multiple,J,!1):$!==!!v.multiple&&(v.defaultValue!=null?zs(g,!!v.multiple,v.defaultValue,!0):zs(g,!!v.multiple,v.multiple?[]:"",!1))}g[co]=v}catch(ne){Fe(o,o.return,ne)}}break;case 6:if(bn(l,o),Dn(o),f&4){if(o.stateNode===null)throw Error(t(162));g=o.stateNode,v=o.memoizedProps;try{g.nodeValue=v}catch(ne){Fe(o,o.return,ne)}}break;case 3:if(bn(l,o),Dn(o),f&4&&d!==null&&d.memoizedState.isDehydrated)try{Zi(l.containerInfo)}catch(ne){Fe(o,o.return,ne)}break;case 4:bn(l,o),Dn(o);break;case 13:bn(l,o),Dn(o),g=o.child,g.flags&8192&&(v=g.memoizedState!==null,g.stateNode.isHidden=v,!v||g.alternate!==null&&g.alternate.memoizedState!==null||(qd=qe())),f&4&&gy(o);break;case 22:if(z=d!==null&&d.memoizedState!==null,o.mode&1?(Tt=(D=Tt)||z,bn(l,o),Tt=D):bn(l,o),Dn(o),f&8192){if(D=o.memoizedState!==null,(o.stateNode.isHidden=D)&&!z&&(o.mode&1)!==0)for(Q=o,z=o.child;z!==null;){for(H=Q=z;Q!==null;){switch($=Q,J=$.child,$.tag){case 0:case 11:case 14:case 15:So(4,$,$.return);break;case 1:ai($,$.return);var Z=$.stateNode;if(typeof Z.componentWillUnmount=="function"){f=$,d=$.return;try{l=f,Z.props=l.memoizedProps,Z.state=l.memoizedState,Z.componentWillUnmount()}catch(ne){Fe(f,d,ne)}}break;case 5:ai($,$.return);break;case 22:if($.memoizedState!==null){ky(H);continue}}J!==null?(J.return=$,Q=J):ky(H)}z=z.sibling}e:for(z=null,H=o;;){if(H.tag===5){if(z===null){z=H;try{g=H.stateNode,D?(v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(_=H.stateNode,T=H.memoizedProps.style,S=T!=null&&T.hasOwnProperty("display")?T.display:null,_.style.display=Xp("display",S))}catch(ne){Fe(o,o.return,ne)}}}else if(H.tag===6){if(z===null)try{H.stateNode.nodeValue=D?"":H.memoizedProps}catch(ne){Fe(o,o.return,ne)}}else if((H.tag!==22&&H.tag!==23||H.memoizedState===null||H===o)&&H.child!==null){H.child.return=H,H=H.child;continue}if(H===o)break e;for(;H.sibling===null;){if(H.return===null||H.return===o)break e;z===H&&(z=null),H=H.return}z===H&&(z=null),H.sibling.return=H.return,H=H.sibling}}break;case 19:bn(l,o),Dn(o),f&4&&gy(o);break;case 21:break;default:bn(l,o),Dn(o)}}function Dn(o){var l=o.flags;if(l&2){try{e:{for(var d=o.return;d!==null;){if(fy(d)){var f=d;break e}d=d.return}throw Error(t(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(Fi(g,""),f.flags&=-33);var v=py(o);Vd(o,v,g);break;case 3:case 4:var S=f.stateNode.containerInfo,_=py(o);Hd(o,_,S);break;default:throw Error(t(161))}}catch(T){Fe(o,o.return,T)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function FS(o,l,d){Q=o,vy(o)}function vy(o,l,d){for(var f=(o.mode&1)!==0;Q!==null;){var g=Q,v=g.child;if(g.tag===22&&f){var S=g.memoizedState!==null||yl;if(!S){var _=g.alternate,T=_!==null&&_.memoizedState!==null||Tt;_=yl;var D=Tt;if(yl=S,(Tt=T)&&!D)for(Q=g;Q!==null;)S=Q,T=S.child,S.tag===22&&S.memoizedState!==null?xy(g):T!==null?(T.return=S,Q=T):xy(g);for(;v!==null;)Q=v,vy(v),v=v.sibling;Q=g,yl=_,Tt=D}wy(o)}else(g.subtreeFlags&8772)!==0&&v!==null?(v.return=g,Q=v):wy(o)}}function wy(o){for(;Q!==null;){var l=Q;if((l.flags&8772)!==0){var d=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Tt||vl(5,l);break;case 1:var f=l.stateNode;if(l.flags&4&&!Tt)if(d===null)f.componentDidMount();else{var g=l.elementType===l.type?d.memoizedProps:xn(l.type,d.memoizedProps);f.componentDidUpdate(g,d.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var v=l.updateQueue;v!==null&&kg(l,v,f);break;case 3:var S=l.updateQueue;if(S!==null){if(d=null,l.child!==null)switch(l.child.tag){case 5:d=l.child.stateNode;break;case 1:d=l.child.stateNode}kg(l,S,d)}break;case 5:var _=l.stateNode;if(d===null&&l.flags&4){d=_;var T=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":T.autoFocus&&d.focus();break;case"img":T.src&&(d.src=T.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var D=l.alternate;if(D!==null){var z=D.memoizedState;if(z!==null){var H=z.dehydrated;H!==null&&Zi(H)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Tt||l.flags&512&&Fd(l)}catch($){Fe(l,l.return,$)}}if(l===o){Q=null;break}if(d=l.sibling,d!==null){d.return=l.return,Q=d;break}Q=l.return}}function ky(o){for(;Q!==null;){var l=Q;if(l===o){Q=null;break}var d=l.sibling;if(d!==null){d.return=l.return,Q=d;break}Q=l.return}}function xy(o){for(;Q!==null;){var l=Q;try{switch(l.tag){case 0:case 11:case 15:var d=l.return;try{vl(4,l)}catch(T){Fe(l,d,T)}break;case 1:var f=l.stateNode;if(typeof f.componentDidMount=="function"){var g=l.return;try{f.componentDidMount()}catch(T){Fe(l,g,T)}}var v=l.return;try{Fd(l)}catch(T){Fe(l,v,T)}break;case 5:var S=l.return;try{Fd(l)}catch(T){Fe(l,S,T)}}}catch(T){Fe(l,l.return,T)}if(l===o){Q=null;break}var _=l.sibling;if(_!==null){_.return=l.return,Q=_;break}Q=l.return}}var HS=Math.ceil,wl=j.ReactCurrentDispatcher,Wd=j.ReactCurrentOwner,ln=j.ReactCurrentBatchConfig,Se=0,it=null,Je=null,gt=0,Yt=0,li=yr(0),Ze=0,bo=null,us=0,kl=0,Kd=0,Eo=null,zt=null,qd=0,ui=1/0,Yn=null,xl=!1,Gd=null,br=null,Sl=!1,Er=null,bl=0,Co=0,Jd=null,El=-1,Cl=0;function Pt(){return(Se&6)!==0?qe():El!==-1?El:El=qe()}function Cr(o){return(o.mode&1)===0?1:(Se&2)!==0&&gt!==0?gt&-gt:_S.transition!==null?(Cl===0&&(Cl=pm()),Cl):(o=Te,o!==0||(o=window.event,o=o===void 0?16:bm(o.type)),o)}function En(o,l,d,f){if(50<Co)throw Co=0,Jd=null,Error(t(185));Gi(o,d,f),((Se&2)===0||o!==it)&&(o===it&&((Se&2)===0&&(kl|=d),Ze===4&&_r(o,gt)),Ut(o,f),d===1&&Se===0&&(l.mode&1)===0&&(ui=qe()+500,Za&&wr()))}function Ut(o,l){var d=o.callbackNode;_x(o,l);var f=Pa(o,o===it?gt:0);if(f===0)d!==null&&dm(d),o.callbackNode=null,o.callbackPriority=0;else if(l=f&-f,o.callbackPriority!==l){if(d!=null&&dm(d),l===1)o.tag===0?CS(by.bind(null,o)):lg(by.bind(null,o)),xS(function(){(Se&6)===0&&wr()}),d=null;else{switch(mm(f)){case 1:d=Oc;break;case 4:d=hm;break;case 16:d=Na;break;case 536870912:d=fm;break;default:d=Na}d=Ay(d,Sy.bind(null,o))}o.callbackPriority=l,o.callbackNode=d}}function Sy(o,l){if(El=-1,Cl=0,(Se&6)!==0)throw Error(t(327));var d=o.callbackNode;if(ci()&&o.callbackNode!==d)return null;var f=Pa(o,o===it?gt:0);if(f===0)return null;if((f&30)!==0||(f&o.expiredLanes)!==0||l)l=_l(o,f);else{l=f;var g=Se;Se|=2;var v=Cy();(it!==o||gt!==l)&&(Yn=null,ui=qe()+500,ds(o,l));do try{KS();break}catch(_){Ey(o,_)}while(!0);fd(),wl.current=v,Se=g,Je!==null?l=0:(it=null,gt=0,l=Ze)}if(l!==0){if(l===2&&(g=Rc(o),g!==0&&(f=g,l=Yd(o,g))),l===1)throw d=bo,ds(o,0),_r(o,f),Ut(o,qe()),d;if(l===6)_r(o,f);else{if(g=o.current.alternate,(f&30)===0&&!VS(g)&&(l=_l(o,f),l===2&&(v=Rc(o),v!==0&&(f=v,l=Yd(o,v))),l===1))throw d=bo,ds(o,0),_r(o,f),Ut(o,qe()),d;switch(o.finishedWork=g,o.finishedLanes=f,l){case 0:case 1:throw Error(t(345));case 2:hs(o,zt,Yn);break;case 3:if(_r(o,f),(f&130023424)===f&&(l=qd+500-qe(),10<l)){if(Pa(o,0)!==0)break;if(g=o.suspendedLanes,(g&f)!==f){Pt(),o.pingedLanes|=o.suspendedLanes&g;break}o.timeoutHandle=nd(hs.bind(null,o,zt,Yn),l);break}hs(o,zt,Yn);break;case 4:if(_r(o,f),(f&4194240)===f)break;for(l=o.eventTimes,g=-1;0<f;){var S=31-vn(f);v=1<<S,S=l[S],S>g&&(g=S),f&=~v}if(f=g,f=qe()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*HS(f/1960))-f,10<f){o.timeoutHandle=nd(hs.bind(null,o,zt,Yn),f);break}hs(o,zt,Yn);break;case 5:hs(o,zt,Yn);break;default:throw Error(t(329))}}}return Ut(o,qe()),o.callbackNode===d?Sy.bind(null,o):null}function Yd(o,l){var d=Eo;return o.current.memoizedState.isDehydrated&&(ds(o,l).flags|=256),o=_l(o,l),o!==2&&(l=zt,zt=d,l!==null&&Qd(l)),o}function Qd(o){zt===null?zt=o:zt.push.apply(zt,o)}function VS(o){for(var l=o;;){if(l.flags&16384){var d=l.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var f=0;f<d.length;f++){var g=d[f],v=g.getSnapshot;g=g.value;try{if(!wn(v(),g))return!1}catch{return!1}}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function _r(o,l){for(l&=~Kd,l&=~kl,o.suspendedLanes|=l,o.pingedLanes&=~l,o=o.expirationTimes;0<l;){var d=31-vn(l),f=1<<d;o[d]=-1,l&=~f}}function by(o){if((Se&6)!==0)throw Error(t(327));ci();var l=Pa(o,0);if((l&1)===0)return Ut(o,qe()),null;var d=_l(o,l);if(o.tag!==0&&d===2){var f=Rc(o);f!==0&&(l=f,d=Yd(o,f))}if(d===1)throw d=bo,ds(o,0),_r(o,l),Ut(o,qe()),d;if(d===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=l,hs(o,zt,Yn),Ut(o,qe()),null}function Xd(o,l){var d=Se;Se|=1;try{return o(l)}finally{Se=d,Se===0&&(ui=qe()+500,Za&&wr())}}function cs(o){Er!==null&&Er.tag===0&&(Se&6)===0&&ci();var l=Se;Se|=1;var d=ln.transition,f=Te;try{if(ln.transition=null,Te=1,o)return o()}finally{Te=f,ln.transition=d,Se=l,(Se&6)===0&&wr()}}function Zd(){Yt=li.current,Ie(li)}function ds(o,l){o.finishedWork=null,o.finishedLanes=0;var d=o.timeoutHandle;if(d!==-1&&(o.timeoutHandle=-1,kS(d)),Je!==null)for(d=Je.return;d!==null;){var f=d;switch(ld(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Qa();break;case 3:ii(),Ie(jt),Ie(Et),xd();break;case 5:wd(f);break;case 4:ii();break;case 13:Ie($e);break;case 19:Ie($e);break;case 10:pd(f.type._context);break;case 22:case 23:Zd()}d=d.return}if(it=o,Je=o=Tr(o.current,null),gt=Yt=l,Ze=0,bo=null,Kd=kl=us=0,zt=Eo=null,is!==null){for(l=0;l<is.length;l++)if(d=is[l],f=d.interleaved,f!==null){d.interleaved=null;var g=f.next,v=d.pending;if(v!==null){var S=v.next;v.next=g,f.next=S}d.pending=f}is=null}return o}function Ey(o,l){do{var d=Je;try{if(fd(),ul.current=fl,cl){for(var f=Be.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}cl=!1}if(ls=0,st=Xe=Be=null,yo=!1,vo=0,Wd.current=null,d===null||d.return===null){Ze=1,bo=l,Je=null;break}e:{var v=o,S=d.return,_=d,T=l;if(l=gt,_.flags|=32768,T!==null&&typeof T=="object"&&typeof T.then=="function"){var D=T,z=_,H=z.tag;if((z.mode&1)===0&&(H===0||H===11||H===15)){var $=z.alternate;$?(z.updateQueue=$.updateQueue,z.memoizedState=$.memoizedState,z.lanes=$.lanes):(z.updateQueue=null,z.memoizedState=null)}var J=Jg(S);if(J!==null){J.flags&=-257,Yg(J,S,_,v,l),J.mode&1&&Gg(v,D,l),l=J,T=D;var Z=l.updateQueue;if(Z===null){var ne=new Set;ne.add(T),l.updateQueue=ne}else Z.add(T);break e}else{if((l&1)===0){Gg(v,D,l),eh();break e}T=Error(t(426))}}else if(je&&_.mode&1){var Ge=Jg(S);if(Ge!==null){(Ge.flags&65536)===0&&(Ge.flags|=256),Yg(Ge,S,_,v,l),dd(oi(T,_));break e}}v=T=oi(T,_),Ze!==4&&(Ze=2),Eo===null?Eo=[v]:Eo.push(v),v=S;do{switch(v.tag){case 3:v.flags|=65536,l&=-l,v.lanes|=l;var I=Kg(v,T,l);wg(v,I);break e;case 1:_=T;var R=v.type,P=v.stateNode;if((v.flags&128)===0&&(typeof R.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(br===null||!br.has(P)))){v.flags|=65536,l&=-l,v.lanes|=l;var K=qg(v,_,l);wg(v,K);break e}}v=v.return}while(v!==null)}Ty(d)}catch(re){l=re,Je===d&&d!==null&&(Je=d=d.return);continue}break}while(!0)}function Cy(){var o=wl.current;return wl.current=fl,o===null?fl:o}function eh(){(Ze===0||Ze===3||Ze===2)&&(Ze=4),it===null||(us&268435455)===0&&(kl&268435455)===0||_r(it,gt)}function _l(o,l){var d=Se;Se|=2;var f=Cy();(it!==o||gt!==l)&&(Yn=null,ds(o,l));do try{WS();break}catch(g){Ey(o,g)}while(!0);if(fd(),Se=d,wl.current=f,Je!==null)throw Error(t(261));return it=null,gt=0,Ze}function WS(){for(;Je!==null;)_y(Je)}function KS(){for(;Je!==null&&!yx();)_y(Je)}function _y(o){var l=Ny(o.alternate,o,Yt);o.memoizedProps=o.pendingProps,l===null?Ty(o):Je=l,Wd.current=null}function Ty(o){var l=o;do{var d=l.alternate;if(o=l.return,(l.flags&32768)===0){if(d=$S(d,l,Yt),d!==null){Je=d;return}}else{if(d=BS(d,l),d!==null){d.flags&=32767,Je=d;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{Ze=6,Je=null;return}}if(l=l.sibling,l!==null){Je=l;return}Je=l=o}while(l!==null);Ze===0&&(Ze=5)}function hs(o,l,d){var f=Te,g=ln.transition;try{ln.transition=null,Te=1,qS(o,l,d,f)}finally{ln.transition=g,Te=f}return null}function qS(o,l,d,f){do ci();while(Er!==null);if((Se&6)!==0)throw Error(t(327));d=o.finishedWork;var g=o.finishedLanes;if(d===null)return null;if(o.finishedWork=null,o.finishedLanes=0,d===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var v=d.lanes|d.childLanes;if(Tx(o,v),o===it&&(Je=it=null,gt=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||Sl||(Sl=!0,Ay(Na,function(){return ci(),null})),v=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||v){v=ln.transition,ln.transition=null;var S=Te;Te=1;var _=Se;Se|=4,Wd.current=null,US(o,d),yy(d,o),fS(ed),ja=!!Zc,ed=Zc=null,o.current=d,FS(d),vx(),Se=_,Te=S,ln.transition=v}else o.current=d;if(Sl&&(Sl=!1,Er=o,bl=g),v=o.pendingLanes,v===0&&(br=null),xx(d.stateNode),Ut(o,qe()),l!==null)for(f=o.onRecoverableError,d=0;d<l.length;d++)g=l[d],f(g.value,{componentStack:g.stack,digest:g.digest});if(xl)throw xl=!1,o=Gd,Gd=null,o;return(bl&1)!==0&&o.tag!==0&&ci(),v=o.pendingLanes,(v&1)!==0?o===Jd?Co++:(Co=0,Jd=o):Co=0,wr(),null}function ci(){if(Er!==null){var o=mm(bl),l=ln.transition,d=Te;try{if(ln.transition=null,Te=16>o?16:o,Er===null)var f=!1;else{if(o=Er,Er=null,bl=0,(Se&6)!==0)throw Error(t(331));var g=Se;for(Se|=4,Q=o.current;Q!==null;){var v=Q,S=v.child;if((Q.flags&16)!==0){var _=v.deletions;if(_!==null){for(var T=0;T<_.length;T++){var D=_[T];for(Q=D;Q!==null;){var z=Q;switch(z.tag){case 0:case 11:case 15:So(8,z,v)}var H=z.child;if(H!==null)H.return=z,Q=H;else for(;Q!==null;){z=Q;var $=z.sibling,J=z.return;if(hy(z),z===D){Q=null;break}if($!==null){$.return=J,Q=$;break}Q=J}}}var Z=v.alternate;if(Z!==null){var ne=Z.child;if(ne!==null){Z.child=null;do{var Ge=ne.sibling;ne.sibling=null,ne=Ge}while(ne!==null)}}Q=v}}if((v.subtreeFlags&2064)!==0&&S!==null)S.return=v,Q=S;else e:for(;Q!==null;){if(v=Q,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:So(9,v,v.return)}var I=v.sibling;if(I!==null){I.return=v.return,Q=I;break e}Q=v.return}}var R=o.current;for(Q=R;Q!==null;){S=Q;var P=S.child;if((S.subtreeFlags&2064)!==0&&P!==null)P.return=S,Q=P;else e:for(S=R;Q!==null;){if(_=Q,(_.flags&2048)!==0)try{switch(_.tag){case 0:case 11:case 15:vl(9,_)}}catch(re){Fe(_,_.return,re)}if(_===S){Q=null;break e}var K=_.sibling;if(K!==null){K.return=_.return,Q=K;break e}Q=_.return}}if(Se=g,wr(),An&&typeof An.onPostCommitFiberRoot=="function")try{An.onPostCommitFiberRoot(Aa,o)}catch{}f=!0}return f}finally{Te=d,ln.transition=l}}return!1}function Oy(o,l,d){l=oi(d,l),l=Kg(o,l,1),o=xr(o,l,1),l=Pt(),o!==null&&(Gi(o,1,l),Ut(o,l))}function Fe(o,l,d){if(o.tag===3)Oy(o,o,d);else for(;l!==null;){if(l.tag===3){Oy(l,o,d);break}else if(l.tag===1){var f=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(br===null||!br.has(f))){o=oi(d,o),o=qg(l,o,1),l=xr(l,o,1),o=Pt(),l!==null&&(Gi(l,1,o),Ut(l,o));break}}l=l.return}}function GS(o,l,d){var f=o.pingCache;f!==null&&f.delete(l),l=Pt(),o.pingedLanes|=o.suspendedLanes&d,it===o&&(gt&d)===d&&(Ze===4||Ze===3&&(gt&130023424)===gt&&500>qe()-qd?ds(o,0):Kd|=d),Ut(o,l)}function Ry(o,l){l===0&&((o.mode&1)===0?l=1:(l=Ia,Ia<<=1,(Ia&130023424)===0&&(Ia=4194304)));var d=Pt();o=qn(o,l),o!==null&&(Gi(o,l,d),Ut(o,d))}function JS(o){var l=o.memoizedState,d=0;l!==null&&(d=l.retryLane),Ry(o,d)}function YS(o,l){var d=0;switch(o.tag){case 13:var f=o.stateNode,g=o.memoizedState;g!==null&&(d=g.retryLane);break;case 19:f=o.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(l),Ry(o,d)}var Ny;Ny=function(o,l,d){if(o!==null)if(o.memoizedProps!==l.pendingProps||jt.current)Bt=!0;else{if((o.lanes&d)===0&&(l.flags&128)===0)return Bt=!1,jS(o,l,d);Bt=(o.flags&131072)!==0}else Bt=!1,je&&(l.flags&1048576)!==0&&ug(l,tl,l.index);switch(l.lanes=0,l.tag){case 2:var f=l.type;gl(o,l),o=l.pendingProps;var g=Xs(l,Et.current);si(l,d),g=Ed(null,l,f,o,g,d);var v=Cd();return l.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,$t(f)?(v=!0,Xa(l)):v=!1,l.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,yd(l),g.updater=pl,l.stateNode=g,g._reactInternals=l,Ad(l,f,o,d),l=Dd(null,l,f,!0,v,d)):(l.tag=0,je&&v&&ad(l),It(null,l,g,d),l=l.child),l;case 16:f=l.elementType;e:{switch(gl(o,l),o=l.pendingProps,g=f._init,f=g(f._payload),l.type=f,g=l.tag=XS(f),o=xn(f,o),g){case 0:l=Pd(null,l,f,o,d);break e;case 1:l=ny(null,l,f,o,d);break e;case 11:l=Qg(null,l,f,o,d);break e;case 14:l=Xg(null,l,f,xn(f.type,o),d);break e}throw Error(t(306,f,""))}return l;case 0:return f=l.type,g=l.pendingProps,g=l.elementType===f?g:xn(f,g),Pd(o,l,f,g,d);case 1:return f=l.type,g=l.pendingProps,g=l.elementType===f?g:xn(f,g),ny(o,l,f,g,d);case 3:e:{if(ry(l),o===null)throw Error(t(387));f=l.pendingProps,v=l.memoizedState,g=v.element,vg(o,l),al(l,f,null,d);var S=l.memoizedState;if(f=S.element,v.isDehydrated)if(v={element:f,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},l.updateQueue.baseState=v,l.memoizedState=v,l.flags&256){g=oi(Error(t(423)),l),l=sy(o,l,f,d,g);break e}else if(f!==g){g=oi(Error(t(424)),l),l=sy(o,l,f,d,g);break e}else for(Jt=gr(l.stateNode.containerInfo.firstChild),Gt=l,je=!0,kn=null,d=gg(l,null,f,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(ti(),f===g){l=Jn(o,l,d);break e}It(o,l,f,d)}l=l.child}return l;case 5:return xg(l),o===null&&cd(l),f=l.type,g=l.pendingProps,v=o!==null?o.memoizedProps:null,S=g.children,td(f,g)?S=null:v!==null&&td(f,v)&&(l.flags|=32),ty(o,l),It(o,l,S,d),l.child;case 6:return o===null&&cd(l),null;case 13:return iy(o,l,d);case 4:return vd(l,l.stateNode.containerInfo),f=l.pendingProps,o===null?l.child=ni(l,null,f,d):It(o,l,f,d),l.child;case 11:return f=l.type,g=l.pendingProps,g=l.elementType===f?g:xn(f,g),Qg(o,l,f,g,d);case 7:return It(o,l,l.pendingProps,d),l.child;case 8:return It(o,l,l.pendingProps.children,d),l.child;case 12:return It(o,l,l.pendingProps.children,d),l.child;case 10:e:{if(f=l.type._context,g=l.pendingProps,v=l.memoizedProps,S=g.value,Ne(sl,f._currentValue),f._currentValue=S,v!==null)if(wn(v.value,S)){if(v.children===g.children&&!jt.current){l=Jn(o,l,d);break e}}else for(v=l.child,v!==null&&(v.return=l);v!==null;){var _=v.dependencies;if(_!==null){S=v.child;for(var T=_.firstContext;T!==null;){if(T.context===f){if(v.tag===1){T=Gn(-1,d&-d),T.tag=2;var D=v.updateQueue;if(D!==null){D=D.shared;var z=D.pending;z===null?T.next=T:(T.next=z.next,z.next=T),D.pending=T}}v.lanes|=d,T=v.alternate,T!==null&&(T.lanes|=d),md(v.return,d,l),_.lanes|=d;break}T=T.next}}else if(v.tag===10)S=v.type===l.type?null:v.child;else if(v.tag===18){if(S=v.return,S===null)throw Error(t(341));S.lanes|=d,_=S.alternate,_!==null&&(_.lanes|=d),md(S,d,l),S=v.sibling}else S=v.child;if(S!==null)S.return=v;else for(S=v;S!==null;){if(S===l){S=null;break}if(v=S.sibling,v!==null){v.return=S.return,S=v;break}S=S.return}v=S}It(o,l,g.children,d),l=l.child}return l;case 9:return g=l.type,f=l.pendingProps.children,si(l,d),g=on(g),f=f(g),l.flags|=1,It(o,l,f,d),l.child;case 14:return f=l.type,g=xn(f,l.pendingProps),g=xn(f.type,g),Xg(o,l,f,g,d);case 15:return Zg(o,l,l.type,l.pendingProps,d);case 17:return f=l.type,g=l.pendingProps,g=l.elementType===f?g:xn(f,g),gl(o,l),l.tag=1,$t(f)?(o=!0,Xa(l)):o=!1,si(l,d),Vg(l,f,g),Ad(l,f,g,d),Dd(null,l,f,!0,o,d);case 19:return ay(o,l,d);case 22:return ey(o,l,d)}throw Error(t(156,l.tag))};function Ay(o,l){return cm(o,l)}function QS(o,l,d,f){this.tag=o,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function un(o,l,d,f){return new QS(o,l,d,f)}function th(o){return o=o.prototype,!(!o||!o.isReactComponent)}function XS(o){if(typeof o=="function")return th(o)?1:0;if(o!=null){if(o=o.$$typeof,o===ft)return 11;if(o===rt)return 14}return 2}function Tr(o,l){var d=o.alternate;return d===null?(d=un(o.tag,l,o.key,o.mode),d.elementType=o.elementType,d.type=o.type,d.stateNode=o.stateNode,d.alternate=o,o.alternate=d):(d.pendingProps=l,d.type=o.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=o.flags&14680064,d.childLanes=o.childLanes,d.lanes=o.lanes,d.child=o.child,d.memoizedProps=o.memoizedProps,d.memoizedState=o.memoizedState,d.updateQueue=o.updateQueue,l=o.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=o.sibling,d.index=o.index,d.ref=o.ref,d}function Tl(o,l,d,f,g,v){var S=2;if(f=o,typeof o=="function")th(o)&&(S=1);else if(typeof o=="string")S=5;else e:switch(o){case L:return fs(d.children,g,v,l);case q:S=8,g|=8;break;case he:return o=un(12,d,l,g|2),o.elementType=he,o.lanes=v,o;case nt:return o=un(13,d,l,g),o.elementType=nt,o.lanes=v,o;case pt:return o=un(19,d,l,g),o.elementType=pt,o.lanes=v,o;case fe:return Ol(d,g,v,l);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case De:S=10;break e;case Ke:S=9;break e;case ft:S=11;break e;case rt:S=14;break e;case te:S=16,f=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return l=un(S,d,l,g),l.elementType=o,l.type=f,l.lanes=v,l}function fs(o,l,d,f){return o=un(7,o,f,l),o.lanes=d,o}function Ol(o,l,d,f){return o=un(22,o,f,l),o.elementType=fe,o.lanes=d,o.stateNode={isHidden:!1},o}function nh(o,l,d){return o=un(6,o,null,l),o.lanes=d,o}function rh(o,l,d){return l=un(4,o.children!==null?o.children:[],o.key,l),l.lanes=d,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}function ZS(o,l,d,f,g){this.tag=l,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nc(0),this.expirationTimes=Nc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nc(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function sh(o,l,d,f,g,v,S,_,T){return o=new ZS(o,l,d,_,T),l===1?(l=1,v===!0&&(l|=8)):l=0,v=un(3,null,null,l),o.current=v,v.stateNode=o,v.memoizedState={element:f,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},yd(v),o}function eb(o,l,d){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:W,key:f==null?null:""+f,children:o,containerInfo:l,implementation:d}}function My(o){if(!o)return vr;o=o._reactInternals;e:{if(es(o)!==o||o.tag!==1)throw Error(t(170));var l=o;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if($t(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(o.tag===1){var d=o.type;if($t(d))return og(o,d,l)}return l}function Iy(o,l,d,f,g,v,S,_,T){return o=sh(d,f,!0,o,g,v,S,_,T),o.context=My(null),d=o.current,f=Pt(),g=Cr(d),v=Gn(f,g),v.callback=l??null,xr(d,v,g),o.current.lanes=g,Gi(o,g,f),Ut(o,f),o}function Rl(o,l,d,f){var g=l.current,v=Pt(),S=Cr(g);return d=My(d),l.context===null?l.context=d:l.pendingContext=d,l=Gn(v,S),l.payload={element:o},f=f===void 0?null:f,f!==null&&(l.callback=f),o=xr(g,l,S),o!==null&&(En(o,g,S,v),ol(o,g,S)),S}function Nl(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function Py(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var d=o.retryLane;o.retryLane=d!==0&&d<l?d:l}}function ih(o,l){Py(o,l),(o=o.alternate)&&Py(o,l)}function tb(){return null}var Dy=typeof reportError=="function"?reportError:function(o){console.error(o)};function oh(o){this._internalRoot=o}Al.prototype.render=oh.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(t(409));Rl(o,l,null,null)},Al.prototype.unmount=oh.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;cs(function(){Rl(null,o,null,null)}),l[Hn]=null}};function Al(o){this._internalRoot=o}Al.prototype.unstable_scheduleHydration=function(o){if(o){var l=vm();o={blockedOn:null,target:o,priority:l};for(var d=0;d<fr.length&&l!==0&&l<fr[d].priority;d++);fr.splice(d,0,o),d===0&&xm(o)}};function ah(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Ml(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function Ly(){}function nb(o,l,d,f,g){if(g){if(typeof f=="function"){var v=f;f=function(){var D=Nl(S);v.call(D)}}var S=Iy(l,f,o,0,null,!1,!1,"",Ly);return o._reactRootContainer=S,o[Hn]=S.current,lo(o.nodeType===8?o.parentNode:o),cs(),S}for(;g=o.lastChild;)o.removeChild(g);if(typeof f=="function"){var _=f;f=function(){var D=Nl(T);_.call(D)}}var T=sh(o,0,!1,null,null,!1,!1,"",Ly);return o._reactRootContainer=T,o[Hn]=T.current,lo(o.nodeType===8?o.parentNode:o),cs(function(){Rl(l,T,d,f)}),T}function Il(o,l,d,f,g){var v=d._reactRootContainer;if(v){var S=v;if(typeof g=="function"){var _=g;g=function(){var T=Nl(S);_.call(T)}}Rl(l,S,o,g)}else S=nb(d,l,o,g,f);return Nl(S)}gm=function(o){switch(o.tag){case 3:var l=o.stateNode;if(l.current.memoizedState.isDehydrated){var d=qi(l.pendingLanes);d!==0&&(Ac(l,d|1),Ut(l,qe()),(Se&6)===0&&(ui=qe()+500,wr()))}break;case 13:cs(function(){var f=qn(o,1);if(f!==null){var g=Pt();En(f,o,1,g)}}),ih(o,1)}},Mc=function(o){if(o.tag===13){var l=qn(o,134217728);if(l!==null){var d=Pt();En(l,o,134217728,d)}ih(o,134217728)}},ym=function(o){if(o.tag===13){var l=Cr(o),d=qn(o,l);if(d!==null){var f=Pt();En(d,o,l,f)}ih(o,l)}},vm=function(){return Te},wm=function(o,l){var d=Te;try{return Te=o,l()}finally{Te=d}},Ec=function(o,l,d){switch(l){case"input":if(gc(o,d),l=d.name,d.type==="radio"&&l!=null){for(d=o;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<d.length;l++){var f=d[l];if(f!==o&&f.form===o.form){var g=Ya(f);if(!g)throw Error(t(90));Hp(f),gc(f,g)}}}break;case"textarea":Gp(o,d);break;case"select":l=d.value,l!=null&&zs(o,!!d.multiple,l,!1)}},rm=Xd,sm=cs;var rb={usingClientEntryPoint:!1,Events:[ho,Ys,Ya,tm,nm,Xd]},_o={findFiberByHostInstance:ts,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sb={bundleType:_o.bundleType,version:_o.version,rendererPackageName:_o.rendererPackageName,rendererConfig:_o.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=lm(o),o===null?null:o.stateNode},findFiberByHostInstance:_o.findFiberByHostInstance||tb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pl.isDisabled&&Pl.supportsFiber)try{Aa=Pl.inject(sb),An=Pl}catch{}}return Ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rb,Ft.createPortal=function(o,l){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ah(l))throw Error(t(200));return eb(o,l,null,d)},Ft.createRoot=function(o,l){if(!ah(o))throw Error(t(299));var d=!1,f="",g=Dy;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(f=l.identifierPrefix),l.onRecoverableError!==void 0&&(g=l.onRecoverableError)),l=sh(o,1,!1,null,null,d,!1,f,g),o[Hn]=l.current,lo(o.nodeType===8?o.parentNode:o),new oh(l)},Ft.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=lm(l),o=o===null?null:o.stateNode,o},Ft.flushSync=function(o){return cs(o)},Ft.hydrate=function(o,l,d){if(!Ml(l))throw Error(t(200));return Il(null,o,l,!0,d)},Ft.hydrateRoot=function(o,l,d){if(!ah(o))throw Error(t(405));var f=d!=null&&d.hydratedSources||null,g=!1,v="",S=Dy;if(d!=null&&(d.unstable_strictMode===!0&&(g=!0),d.identifierPrefix!==void 0&&(v=d.identifierPrefix),d.onRecoverableError!==void 0&&(S=d.onRecoverableError)),l=Iy(l,null,o,1,d??null,g,!1,v,S),o[Hn]=l.current,lo(o),f)for(o=0;o<f.length;o++)d=f[o],g=d._getVersion,g=g(d._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[d,g]:l.mutableSourceEagerHydrationData.push(d,g);return new Al(l)},Ft.render=function(o,l,d){if(!Ml(l))throw Error(t(200));return Il(null,o,l,!1,d)},Ft.unmountComponentAtNode=function(o){if(!Ml(o))throw Error(t(40));return o._reactRootContainer?(cs(function(){Il(null,null,o,!1,function(){o._reactRootContainer=null,o[Hn]=null})}),!0):!1},Ft.unstable_batchedUpdates=Xd,Ft.unstable_renderSubtreeIntoContainer=function(o,l,d,f){if(!Ml(d))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return Il(o,l,d,!1,f)},Ft.version="18.3.1-next-f1338f8080-20240426",Ft}var Vy;function dw(){if(Vy)return ch.exports;Vy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ch.exports=db(),ch.exports}var Wy;function hb(){if(Wy)return Dl;Wy=1;var n=dw();return Dl.createRoot=n.createRoot,Dl.hydrateRoot=n.hydrateRoot,Dl}var fb=hb();const pb=Kf(fb);/**
 * react-router v7.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Ky="popstate";function mb(n={}){function e(r,s){let{pathname:i,search:a,hash:u}=r.location;return ef("",{pathname:i,search:a,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:Jo(s)}return yb(e,t,null,n)}function Ue(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Rn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gb(){return Math.random().toString(36).substring(2,10)}function qy(n,e){return{usr:n.state,key:n.key,idx:e}}function ef(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?ji(e):e,state:t,key:e&&e.key||r||gb()}}function Jo({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function ji(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function yb(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,u="POP",c=null,h=p();h==null&&(h=0,a.replaceState({...a.state,idx:h},""));function p(){return(a.state||{idx:null}).idx}function m(){u="POP";let b=p(),C=b==null?null:b-h;h=b,c&&c({action:u,location:x.location,delta:C})}function y(b,C){u="PUSH";let A=ef(x.location,b,C);h=p()+1;let O=qy(A,h),j=x.createHref(A);try{a.pushState(O,"",j)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;s.location.assign(j)}i&&c&&c({action:u,location:x.location,delta:1})}function w(b,C){u="REPLACE";let A=ef(x.location,b,C);h=p();let O=qy(A,h),j=x.createHref(A);a.replaceState(O,"",j),i&&c&&c({action:u,location:x.location,delta:0})}function k(b){return vb(b)}let x={get action(){return u},get location(){return n(s,a)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Ky,m),c=b,()=>{s.removeEventListener(Ky,m),c=null}},createHref(b){return e(s,b)},createURL:k,encodeLocation(b){let C=k(b);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:y,replace:w,go(b){return a.go(b)}};return x}function vb(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Ue(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Jo(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function hw(n,e,t="/"){return wb(n,e,t,!1)}function wb(n,e,t,r){let s=typeof e=="string"?ji(e):e,i=lr(s.pathname||"/",t);if(i==null)return null;let a=fw(n);kb(a);let u=null;for(let c=0;u==null&&c<a.length;++c){let h=Ab(i);u=Rb(a[c],h,r)}return u}function fw(n,e=[],t=[],r="",s=!1){let i=(a,u,c=s,h)=>{let p={relativePath:h===void 0?a.path||"":h,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(r)&&c)return;Ue(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length)}let m=ir([r,p.relativePath]),y=t.concat(p);a.children&&a.children.length>0&&(Ue(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),fw(a.children,e,y,m,c)),!(a.path==null&&!a.index)&&e.push({path:m,score:Tb(m,a.index),routesMeta:y})};return n.forEach((a,u)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))i(a,u);else for(let h of pw(a.path))i(a,u,!0,h)}),e}function pw(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),i=t.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=pw(r.join("/")),u=[];return u.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&u.push(...a),u.map(c=>n.startsWith("/")&&c===""?"/":c)}function kb(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Ob(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var xb=/^:[\w-]+$/,Sb=3,bb=2,Eb=1,Cb=10,_b=-2,Gy=n=>n==="*";function Tb(n,e){let t=n.split("/"),r=t.length;return t.some(Gy)&&(r+=_b),e&&(r+=bb),t.filter(s=>!Gy(s)).reduce((s,i)=>s+(xb.test(i)?Sb:i===""?Eb:Cb),r)}function Ob(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function Rb(n,e,t=!1){let{routesMeta:r}=n,s={},i="/",a=[];for(let u=0;u<r.length;++u){let c=r[u],h=u===r.length-1,p=i==="/"?e:e.slice(i.length)||"/",m=ou({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},p),y=c.route;if(!m&&h&&t&&!r[r.length-1].route.index&&(m=ou({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},p)),!m)return null;Object.assign(s,m.params),a.push({params:s,pathname:ir([i,m.pathname]),pathnameBase:Db(ir([i,m.pathnameBase])),route:y}),m.pathnameBase!=="/"&&(i=ir([i,m.pathnameBase]))}return a}function ou(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=Nb(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((h,{paramName:p,isOptional:m},y)=>{if(p==="*"){let k=u[y]||"";a=i.slice(0,i.length-k.length).replace(/(.)\/+$/,"$1")}const w=u[y];return m&&!w?h[p]=void 0:h[p]=(w||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:a,pattern:n}}function Nb(n,e=!1,t=!0){Rn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Ab(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Rn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function lr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var mw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Mb=n=>mw.test(n);function Ib(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?ji(n):n,i;if(t)if(Mb(t))i=t;else{if(t.includes("//")){let a=t;t=t.replace(/\/\/+/g,"/"),Rn(!1,`Pathnames cannot have embedded double slashes - normalizing ${a} -> ${t}`)}t.startsWith("/")?i=Jy(t.substring(1),"/"):i=Jy(t,e)}else i=e;return{pathname:i,search:Lb(r),hash:jb(s)}}function Jy(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function fh(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Pb(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function gw(n){let e=Pb(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function yw(n,e,t,r=!1){let s;typeof n=="string"?s=ji(n):(s={...n},Ue(!s.pathname||!s.pathname.includes("?"),fh("?","pathname","search",s)),Ue(!s.pathname||!s.pathname.includes("#"),fh("#","pathname","hash",s)),Ue(!s.search||!s.search.includes("#"),fh("#","search","hash",s)));let i=n===""||s.pathname==="",a=i?"/":s.pathname,u;if(a==null)u=t;else{let m=e.length-1;if(!r&&a.startsWith("..")){let y=a.split("/");for(;y[0]==="..";)y.shift(),m-=1;s.pathname=y.join("/")}u=m>=0?e[m]:"/"}let c=Ib(s,u),h=a&&a!=="/"&&a.endsWith("/"),p=(i||a===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(h||p)&&(c.pathname+="/"),c}var ir=n=>n.join("/").replace(/\/\/+/g,"/"),Db=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Lb=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,jb=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,$b=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function Bb(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function zb(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var vw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ww(n,e){let t=n;if(typeof t!="string"||!mw.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,s=!1;if(vw)try{let i=new URL(window.location.href),a=t.startsWith("//")?new URL(i.protocol+t):new URL(t),u=lr(a.pathname,e);a.origin===i.origin&&u!=null?t=u+a.search+a.hash:s=!0}catch{Rn(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:s,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var kw=["POST","PUT","PATCH","DELETE"];new Set(kw);var Ub=["GET",...kw];new Set(Ub);var $i=M.createContext(null);$i.displayName="DataRouter";var Yu=M.createContext(null);Yu.displayName="DataRouterState";var Fb=M.createContext(!1),xw=M.createContext({isTransitioning:!1});xw.displayName="ViewTransition";var Hb=M.createContext(new Map);Hb.displayName="Fetchers";var Vb=M.createContext(null);Vb.displayName="Await";var yn=M.createContext(null);yn.displayName="Navigation";var ya=M.createContext(null);ya.displayName="Location";var Nn=M.createContext({outlet:null,matches:[],isDataRoute:!1});Nn.displayName="Route";var Gf=M.createContext(null);Gf.displayName="RouteError";var Sw="REACT_ROUTER_ERROR",Wb="REDIRECT",Kb="ROUTE_ERROR_RESPONSE";function qb(n){if(n.startsWith(`${Sw}:${Wb}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function Gb(n){if(n.startsWith(`${Sw}:${Kb}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new $b(e.status,e.statusText,e.data)}catch{}}function Jb(n,{relative:e}={}){Ue(va(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=M.useContext(yn),{hash:s,pathname:i,search:a}=wa(n,{relative:e}),u=i;return t!=="/"&&(u=i==="/"?t:ir([t,i])),r.createHref({pathname:u,search:a,hash:s})}function va(){return M.useContext(ya)!=null}function Yr(){return Ue(va(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(ya).location}var bw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ew(n){M.useContext(yn).static||M.useLayoutEffect(n)}function Bi(){let{isDataRoute:n}=M.useContext(Nn);return n?cE():Yb()}function Yb(){Ue(va(),"useNavigate() may be used only in the context of a <Router> component.");let n=M.useContext($i),{basename:e,navigator:t}=M.useContext(yn),{matches:r}=M.useContext(Nn),{pathname:s}=Yr(),i=JSON.stringify(gw(r)),a=M.useRef(!1);return Ew(()=>{a.current=!0}),M.useCallback((c,h={})=>{if(Rn(a.current,bw),!a.current)return;if(typeof c=="number"){t.go(c);return}let p=yw(c,JSON.parse(i),s,h.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:ir([e,p.pathname])),(h.replace?t.replace:t.push)(p,h.state,h)},[e,t,i,s,n])}var Qb=M.createContext(null);function Xb(n){let e=M.useContext(Nn).outlet;return M.useMemo(()=>e&&M.createElement(Qb.Provider,{value:n},e),[e,n])}function Cw(){let{matches:n}=M.useContext(Nn),e=n[n.length-1];return e?e.params:{}}function wa(n,{relative:e}={}){let{matches:t}=M.useContext(Nn),{pathname:r}=Yr(),s=JSON.stringify(gw(t));return M.useMemo(()=>yw(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function Zb(n,e){return _w(n,e)}function _w(n,e,t,r,s){var A;Ue(va(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=M.useContext(yn),{matches:a}=M.useContext(Nn),u=a[a.length-1],c=u?u.params:{},h=u?u.pathname:"/",p=u?u.pathnameBase:"/",m=u&&u.route;{let O=m&&m.path||"";Ow(h,!m||O.endsWith("*")||O.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${O}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${O}"> to <Route path="${O==="/"?"*":`${O}/*`}">.`)}let y=Yr(),w;if(e){let O=typeof e=="string"?ji(e):e;Ue(p==="/"||((A=O.pathname)==null?void 0:A.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${O.pathname}" was given in the \`location\` prop.`),w=O}else w=y;let k=w.pathname||"/",x=k;if(p!=="/"){let O=p.replace(/^\//,"").split("/");x="/"+k.replace(/^\//,"").split("/").slice(O.length).join("/")}let b=hw(n,{pathname:x});Rn(m||b!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Rn(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=sE(b&&b.map(O=>Object.assign({},O,{params:Object.assign({},c,O.params),pathname:ir([p,i.encodeLocation?i.encodeLocation(O.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?p:ir([p,i.encodeLocation?i.encodeLocation(O.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathnameBase])})),a,t,r,s);return e&&C?M.createElement(ya.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},C):C}function eE(){let n=uE(),e=Bb(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",n),a=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:i},"ErrorBoundary")," or"," ",M.createElement("code",{style:i},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),t?M.createElement("pre",{style:s},t):null,a)}var tE=M.createElement(eE,null),Tw=class extends M.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=Gb(n.digest);t&&(n=t)}let e=n!==void 0?M.createElement(Nn.Provider,{value:this.props.routeContext},M.createElement(Gf.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?M.createElement(nE,{error:n},e):e}};Tw.contextType=Fb;var ph=new WeakMap;function nE({children:n,error:e}){let{basename:t}=M.useContext(yn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=qb(e.digest);if(r){let s=ph.get(e);if(s)throw s;let i=ww(r.location,t);if(vw&&!ph.get(e))if(i.isExternal||r.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const a=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:r.replace}));throw ph.set(e,a),a}return M.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return n}function rE({routeContext:n,match:e,children:t}){let r=M.useContext($i);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(Nn.Provider,{value:n},t)}function sE(n,e=[],t=null,r=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,a=t==null?void 0:t.errors;if(a!=null){let p=i.findIndex(m=>m.route.id&&(a==null?void 0:a[m.route.id])!==void 0);Ue(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,p+1))}let u=!1,c=-1;if(t)for(let p=0;p<i.length;p++){let m=i[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(c=p),m.route.id){let{loaderData:y,errors:w}=t,k=m.route.loader&&!y.hasOwnProperty(m.route.id)&&(!w||w[m.route.id]===void 0);if(m.route.lazy||k){u=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}let h=t&&r?(p,m)=>{var y,w;r(p,{location:t.location,params:((w=(y=t.matches)==null?void 0:y[0])==null?void 0:w.params)??{},unstable_pattern:zb(t.matches),errorInfo:m})}:void 0;return i.reduceRight((p,m,y)=>{let w,k=!1,x=null,b=null;t&&(w=a&&m.route.id?a[m.route.id]:void 0,x=m.route.errorElement||tE,u&&(c<0&&y===0?(Ow("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,b=null):c===y&&(k=!0,b=m.route.hydrateFallbackElement||null)));let C=e.concat(i.slice(0,y+1)),A=()=>{let O;return w?O=x:k?O=b:m.route.Component?O=M.createElement(m.route.Component,null):m.route.element?O=m.route.element:O=p,M.createElement(rE,{match:m,routeContext:{outlet:p,matches:C,isDataRoute:t!=null},children:O})};return t&&(m.route.ErrorBoundary||m.route.errorElement||y===0)?M.createElement(Tw,{location:t.location,revalidation:t.revalidation,component:x,error:w,children:A(),routeContext:{outlet:null,matches:C,isDataRoute:!0},onError:h}):A()},null)}function Jf(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function iE(n){let e=M.useContext($i);return Ue(e,Jf(n)),e}function oE(n){let e=M.useContext(Yu);return Ue(e,Jf(n)),e}function aE(n){let e=M.useContext(Nn);return Ue(e,Jf(n)),e}function Yf(n){let e=aE(n),t=e.matches[e.matches.length-1];return Ue(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function lE(){return Yf("useRouteId")}function uE(){var r;let n=M.useContext(Gf),e=oE("useRouteError"),t=Yf("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function cE(){let{router:n}=iE("useNavigate"),e=Yf("useNavigate"),t=M.useRef(!1);return Ew(()=>{t.current=!0}),M.useCallback(async(s,i={})=>{Rn(t.current,bw),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...i}))},[n,e])}var Yy={};function Ow(n,e,t){!e&&!Yy[n]&&(Yy[n]=!0,Rn(!1,t))}M.memo(dE);function dE({routes:n,future:e,state:t,onError:r}){return _w(n,void 0,t,r,e)}function hE(n){return Xb(n.context)}function er(n){Ue(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function fE({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:i=!1,unstable_useTransitions:a}){Ue(!va(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),c=M.useMemo(()=>({basename:u,navigator:s,static:i,unstable_useTransitions:a,future:{}}),[u,s,i,a]);typeof t=="string"&&(t=ji(t));let{pathname:h="/",search:p="",hash:m="",state:y=null,key:w="default"}=t,k=M.useMemo(()=>{let x=lr(h,u);return x==null?null:{location:{pathname:x,search:p,hash:m,state:y,key:w},navigationType:r}},[u,h,p,m,y,w,r]);return Rn(k!=null,`<Router basename="${u}"> is not able to match the URL "${h}${p}${m}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:M.createElement(yn.Provider,{value:c},M.createElement(ya.Provider,{children:e,value:k}))}function pE({children:n,location:e}){return Zb(tf(n),e)}function tf(n,e=[]){let t=[];return M.Children.forEach(n,(r,s)=>{if(!M.isValidElement(r))return;let i=[...e,s];if(r.type===M.Fragment){t.push.apply(t,tf(r.props.children,i));return}Ue(r.type===er,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ue(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=tf(r.props.children,i)),t.push(a)}),t}var Xl="get",Zl="application/x-www-form-urlencoded";function Qu(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function mE(n){return Qu(n)&&n.tagName.toLowerCase()==="button"}function gE(n){return Qu(n)&&n.tagName.toLowerCase()==="form"}function yE(n){return Qu(n)&&n.tagName.toLowerCase()==="input"}function vE(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function wE(n,e){return n.button===0&&(!e||e==="_self")&&!vE(n)}var Ll=null;function kE(){if(Ll===null)try{new FormData(document.createElement("form"),0),Ll=!1}catch{Ll=!0}return Ll}var xE=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function mh(n){return n!=null&&!xE.has(n)?(Rn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Zl}"`),null):n}function SE(n,e){let t,r,s,i,a;if(gE(n)){let u=n.getAttribute("action");r=u?lr(u,e):null,t=n.getAttribute("method")||Xl,s=mh(n.getAttribute("enctype"))||Zl,i=new FormData(n)}else if(mE(n)||yE(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=n.getAttribute("formaction")||u.getAttribute("action");if(r=c?lr(c,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||Xl,s=mh(n.getAttribute("formenctype"))||mh(u.getAttribute("enctype"))||Zl,i=new FormData(u,n),!kE()){let{name:h,type:p,value:m}=n;if(p==="image"){let y=h?`${h}.`:"";i.append(`${y}x`,"0"),i.append(`${y}y`,"0")}else h&&i.append(h,m)}}else{if(Qu(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Xl,r=null,s=Zl,a=n}return i&&s==="text/plain"&&(a=i,i=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:i,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Qf(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function bE(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&lr(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function EE(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function CE(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function _E(n,e,t){let r=await Promise.all(n.map(async s=>{let i=e.routes[s.route.id];if(i){let a=await EE(i,t);return a.links?a.links():[]}return[]}));return NE(r.flat(1).filter(CE).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Qy(n,e,t,r,s,i){let a=(c,h)=>t[h]?c.route.id!==t[h].route.id:!0,u=(c,h)=>{var p;return t[h].pathname!==c.pathname||((p=t[h].route.path)==null?void 0:p.endsWith("*"))&&t[h].params["*"]!==c.params["*"]};return i==="assets"?e.filter((c,h)=>a(c,h)||u(c,h)):i==="data"?e.filter((c,h)=>{var m;let p=r.routes[c.route.id];if(!p||!p.hasLoader)return!1;if(a(c,h)||u(c,h))return!0;if(c.route.shouldRevalidate){let y=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((m=t[0])==null?void 0:m.params)||{},nextUrl:new URL(n,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function TE(n,e,{includeHydrateFallback:t}={}){return OE(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function OE(n){return[...new Set(n)]}function RE(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function NE(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let i=JSON.stringify(RE(s));return t.has(i)||(t.add(i),r.push({key:i,link:s})),r},[])}function Rw(){let n=M.useContext($i);return Qf(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function AE(){let n=M.useContext(Yu);return Qf(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Xf=M.createContext(void 0);Xf.displayName="FrameworkContext";function Nw(){let n=M.useContext(Xf);return Qf(n,"You must render this element inside a <HydratedRouter> element"),n}function ME(n,e){let t=M.useContext(Xf),[r,s]=M.useState(!1),[i,a]=M.useState(!1),{onFocus:u,onBlur:c,onMouseEnter:h,onMouseLeave:p,onTouchStart:m}=e,y=M.useRef(null);M.useEffect(()=>{if(n==="render"&&a(!0),n==="viewport"){let x=C=>{C.forEach(A=>{a(A.isIntersecting)})},b=new IntersectionObserver(x,{threshold:.5});return y.current&&b.observe(y.current),()=>{b.disconnect()}}},[n]),M.useEffect(()=>{if(r){let x=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(x)}}},[r]);let w=()=>{s(!0)},k=()=>{s(!1),a(!1)};return t?n!=="intent"?[i,y,{}]:[i,y,{onFocus:Oo(u,w),onBlur:Oo(c,k),onMouseEnter:Oo(h,w),onMouseLeave:Oo(p,k),onTouchStart:Oo(m,w)}]:[!1,y,{}]}function Oo(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function IE({page:n,...e}){let{router:t}=Rw(),r=M.useMemo(()=>hw(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?M.createElement(DE,{page:n,matches:r,...e}):null}function PE(n){let{manifest:e,routeModules:t}=Nw(),[r,s]=M.useState([]);return M.useEffect(()=>{let i=!1;return _E(n,e,t).then(a=>{i||s(a)}),()=>{i=!0}},[n,e,t]),r}function DE({page:n,matches:e,...t}){let r=Yr(),{manifest:s,routeModules:i}=Nw(),{basename:a}=Rw(),{loaderData:u,matches:c}=AE(),h=M.useMemo(()=>Qy(n,e,c,s,r,"data"),[n,e,c,s,r]),p=M.useMemo(()=>Qy(n,e,c,s,r,"assets"),[n,e,c,s,r]),m=M.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let k=new Set,x=!1;if(e.forEach(C=>{var O;let A=s.routes[C.route.id];!A||!A.hasLoader||(!h.some(j=>j.route.id===C.route.id)&&C.route.id in u&&((O=i[C.route.id])!=null&&O.shouldRevalidate)||A.hasClientLoader?x=!0:k.add(C.route.id))}),k.size===0)return[];let b=bE(n,a,"data");return x&&k.size>0&&b.searchParams.set("_routes",e.filter(C=>k.has(C.route.id)).map(C=>C.route.id).join(",")),[b.pathname+b.search]},[a,u,r,s,h,e,n,i]),y=M.useMemo(()=>TE(p,s),[p,s]),w=PE(p);return M.createElement(M.Fragment,null,m.map(k=>M.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...t})),y.map(k=>M.createElement("link",{key:k,rel:"modulepreload",href:k,...t})),w.map(({key:k,link:x})=>M.createElement("link",{key:k,nonce:t.nonce,...x})))}function LE(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var jE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{jE&&(window.__reactRouterVersion="7.11.0")}catch{}function $E({basename:n,children:e,unstable_useTransitions:t,window:r}){let s=M.useRef();s.current==null&&(s.current=mb({window:r,v5Compat:!0}));let i=s.current,[a,u]=M.useState({action:i.action,location:i.location}),c=M.useCallback(h=>{t===!1?u(h):M.startTransition(()=>u(h))},[t]);return M.useLayoutEffect(()=>i.listen(c),[i,c]),M.createElement(fE,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:i,unstable_useTransitions:t})}var Aw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Mw=M.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:i,replace:a,state:u,target:c,to:h,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:y,...w},k){let{basename:x,unstable_useTransitions:b}=M.useContext(yn),C=typeof h=="string"&&Aw.test(h),A=ww(h,x);h=A.to;let O=Jb(h,{relative:s}),[j,F,W]=ME(r,w),L=UE(h,{replace:a,state:u,target:c,preventScrollReset:p,relative:s,viewTransition:m,unstable_defaultShouldRevalidate:y,unstable_useTransitions:b});function q(De){e&&e(De),De.defaultPrevented||L(De)}let he=M.createElement("a",{...w,...W,href:A.absoluteURL||O,onClick:A.isExternal||i?e:q,ref:LE(k,F),target:c,"data-discover":!C&&t==="render"?"true":void 0});return j&&!C?M.createElement(M.Fragment,null,he,M.createElement(IE,{page:O})):he});Mw.displayName="Link";var nf=M.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:i,to:a,viewTransition:u,children:c,...h},p){let m=wa(a,{relative:h.relative}),y=Yr(),w=M.useContext(Yu),{navigator:k,basename:x}=M.useContext(yn),b=w!=null&&KE(m)&&u===!0,C=k.encodeLocation?k.encodeLocation(m).pathname:m.pathname,A=y.pathname,O=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;t||(A=A.toLowerCase(),O=O?O.toLowerCase():null,C=C.toLowerCase()),O&&x&&(O=lr(O,x)||O);const j=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let F=A===C||!s&&A.startsWith(C)&&A.charAt(j)==="/",W=O!=null&&(O===C||!s&&O.startsWith(C)&&O.charAt(C.length)==="/"),L={isActive:F,isPending:W,isTransitioning:b},q=F?e:void 0,he;typeof r=="function"?he=r(L):he=[r,F?"active":null,W?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let De=typeof i=="function"?i(L):i;return M.createElement(Mw,{...h,"aria-current":q,className:he,ref:p,style:De,to:a,viewTransition:u},typeof c=="function"?c(L):c)});nf.displayName="NavLink";var BE=M.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:i,method:a=Xl,action:u,onSubmit:c,relative:h,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:y,...w},k)=>{let{unstable_useTransitions:x}=M.useContext(yn),b=VE(),C=WE(u,{relative:h}),A=a.toLowerCase()==="get"?"get":"post",O=typeof u=="string"&&Aw.test(u),j=F=>{if(c&&c(F),F.defaultPrevented)return;F.preventDefault();let W=F.nativeEvent.submitter,L=(W==null?void 0:W.getAttribute("formmethod"))||a,q=()=>b(W||F.currentTarget,{fetcherKey:e,method:L,navigate:t,replace:s,state:i,relative:h,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:y});x&&t!==!1?M.startTransition(()=>q()):q()};return M.createElement("form",{ref:k,method:A,action:C,onSubmit:r?c:j,...w,"data-discover":!O&&n==="render"?"true":void 0})});BE.displayName="Form";function zE(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Iw(n){let e=M.useContext($i);return Ue(e,zE(n)),e}function UE(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:i,viewTransition:a,unstable_defaultShouldRevalidate:u,unstable_useTransitions:c}={}){let h=Bi(),p=Yr(),m=wa(n,{relative:i});return M.useCallback(y=>{if(wE(y,e)){y.preventDefault();let w=t!==void 0?t:Jo(p)===Jo(m),k=()=>h(n,{replace:w,state:r,preventScrollReset:s,relative:i,viewTransition:a,unstable_defaultShouldRevalidate:u});c?M.startTransition(()=>k()):k()}},[p,h,m,t,r,e,n,s,i,a,u,c])}var FE=0,HE=()=>`__${String(++FE)}__`;function VE(){let{router:n}=Iw("useSubmit"),{basename:e}=M.useContext(yn),t=lE(),r=n.fetch,s=n.navigate;return M.useCallback(async(i,a={})=>{let{action:u,method:c,encType:h,formData:p,body:m}=SE(i,e);if(a.navigate===!1){let y=a.fetcherKey||HE();await r(y,t,a.action||u,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:p,body:m,formMethod:a.method||c,formEncType:a.encType||h,flushSync:a.flushSync})}else await s(a.action||u,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:p,body:m,formMethod:a.method||c,formEncType:a.encType||h,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[r,s,e,t])}function WE(n,{relative:e}={}){let{basename:t}=M.useContext(yn),r=M.useContext(Nn);Ue(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...wa(n||".",{relative:e})},a=Yr();if(n==null){i.search=a.search;let u=new URLSearchParams(i.search),c=u.getAll("index");if(c.some(p=>p==="")){u.delete("index"),c.filter(m=>m).forEach(m=>u.append("index",m));let p=u.toString();i.search=p?`?${p}`:""}}return(!n||n===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(i.pathname=i.pathname==="/"?t:ir([t,i.pathname])),Jo(i)}function KE(n,{relative:e}={}){let t=M.useContext(xw);Ue(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Iw("useViewTransitionState"),s=wa(n,{relative:e});if(!t.isTransitioning)return!1;let i=lr(t.currentLocation.pathname,r)||t.currentLocation.pathname,a=lr(t.nextLocation.pathname,r)||t.nextLocation.pathname;return ou(s.pathname,a)!=null||ou(s.pathname,i)!=null}var qE=dw();const GE=Kf(qE);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JE=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Pw=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var YE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QE=M.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...u},c)=>M.createElement("svg",{ref:c,...YE,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:Pw("lucide",s),...u},[...a.map(([h,p])=>M.createElement(h,p)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=(n,e)=>{const t=M.forwardRef(({className:r,...s},i)=>M.createElement(QE,{ref:i,iconNode:e,className:Pw(`lucide-${JE(n)}`,r),...s}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XE=ke("AlignCenter",[["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 18H5",key:"18s9l3"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZE=ke("AlignLeft",[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=ke("AlignRight",[["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 18H7",key:"1ygte8"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=ke("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=ke("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=ke("Bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=ke("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=ke("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=ke("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dw=ke("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=ke("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lw=ke("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=ke("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=ke("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=ke("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=ke("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=ke("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=ke("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=ke("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=ke("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=ke("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=ke("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jw=ke("Link2Off",[["path",{d:"M9 17H7A5 5 0 0 1 7 7",key:"10o201"}],["path",{d:"M15 7h2a5 5 0 0 1 4 8",key:"1d3206"}],["line",{x1:"8",x2:"12",y1:"12",y2:"12",key:"rvw6j4"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=ke("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=ke("ListOrdered",[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=ke("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=ke("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=ke("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $w=ke("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=ke("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rf=ke("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bw=ke("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=ke("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zf=ke("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bC=ke("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=ke("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=ke("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=ke("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function zw(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=zw(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function Yo(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=zw(n))&&(r&&(r+=" "),r+=e);return r}function TC(){const n=[{id:1,name:"Lp 9A",color:"green"},{id:2,name:"Lp 9B (Nng cao)",color:"blue"}];return E.jsxs("aside",{className:"w-64 bg-white border-r border-gray-200 flex flex-col flex-shrink-0 z-20 shadow-sm font-sans h-screen fixed left-0 top-0",children:[E.jsxs("div",{className:"h-16 flex items-center px-6 border-b border-gray-100",children:[E.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center text-white mr-3 shadow-md",children:E.jsx(hC,{size:20})}),E.jsx("span",{className:"font-bold text-gray-800 text-lg tracking-tight",children:"Content Mgr"})]}),E.jsxs("nav",{className:"flex-1 overflow-y-auto py-6 px-3 space-y-1",children:[E.jsx("div",{className:"px-3 mb-2 text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Qun l lp hc"}),E.jsxs(nf,{to:"/",end:!0,className:({isActive:e})=>Yo("w-full flex items-center px-3 py-2.5 rounded-lg font-medium transition-colors group",e?"bg-indigo-50 text-indigo-700":"text-gray-600 hover:bg-gray-50"),children:[E.jsx(pC,{size:20,className:"mr-3 group-[.active]:text-indigo-600 text-gray-400 group-hover:text-indigo-600"}),"Danh sch Lp"]}),E.jsx("div",{className:"px-3 mt-8 mb-2 text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Truy cp nhanh"}),n.map(e=>E.jsxs("button",{className:"w-full flex items-center px-3 py-2 rounded-lg text-sm transition-colors group text-gray-600 hover:bg-gray-50",children:[E.jsx("span",{className:`w-2 h-2 rounded-full mr-3 group-hover:scale-110 transition-transform ${e.color==="green"?"bg-green-500":"bg-blue-500"}`}),e.name]},e.id)),E.jsx("div",{className:"px-3 mt-8 mb-2 text-xs font-bold text-gray-400 uppercase tracking-wider",children:"H thng"}),E.jsxs(nf,{to:"/settings",className:({isActive:e})=>Yo("w-full flex items-center px-3 py-2.5 rounded-lg font-medium transition-colors group",e?"bg-indigo-50 text-indigo-700":"text-gray-600 hover:bg-gray-50"),children:[E.jsx(Zf,{size:20,className:"mr-3 group-[.active]:text-indigo-600 text-gray-400 group-hover:text-indigo-600"}),"Cu hnh"]})]}),E.jsx("div",{className:"p-4 border-t border-gray-100 bg-gray-50/30",children:E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-tr from-indigo-500 to-purple-500 flex items-center justify-center text-white font-bold shadow-sm",children:"A"}),E.jsxs("div",{className:"overflow-hidden",children:[E.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:"Admin Content"}),E.jsx("p",{className:"text-[11px] text-gray-500 truncate",children:"Gio vin ch nhim"})]})]})})]})}function OC(){const n=Yr(),e=Bi(),t=()=>{const r=n.pathname,s=[{label:"Danh sch Lp",path:"/"}];return r.includes("/editor")?s.push({label:"Son tho bi hc",path:r}):r.includes("/settings")&&s.push({label:"Cu hnh",path:"/settings"}),E.jsx("nav",{className:"flex items-center text-sm text-gray-500",children:s.map((i,a)=>E.jsxs(kt.Fragment,{children:[a>0&&E.jsx(aC,{size:14,className:"mx-2 text-gray-400"}),a===s.length-1?E.jsx("span",{className:"font-bold text-gray-800",children:i.label}):E.jsx("span",{onClick:()=>e(i.path),className:"hover:text-indigo-600 cursor-pointer transition-colors",children:i.label})]},a))})};return E.jsxs("div",{className:"bg-gray-50 min-h-screen flex font-sans",children:[E.jsx(TC,{}),E.jsxs("div",{className:"flex-1 flex flex-col ml-64 min-w-0",children:[E.jsxs("header",{className:"h-16 bg-white border-b border-gray-200 flex items-center justify-between px-8 flex-shrink-0 shadow-sm sticky top-0 z-10",children:[t(),E.jsxs("div",{className:"flex gap-3",children:[E.jsx("button",{className:"w-8 h-8 flex items-center justify-center text-gray-400 hover:bg-gray-100 hover:text-gray-600 rounded-full transition-colors",children:E.jsx(rC,{size:20})}),E.jsx("button",{className:"w-8 h-8 flex items-center justify-center text-gray-400 hover:bg-gray-100 hover:text-gray-600 rounded-full transition-colors",children:E.jsx(Zf,{size:20})})]})]}),E.jsx("main",{className:"flex-1 overflow-auto",children:E.jsx(hE,{})})]})]})}function e0(){const n=Bi(),e=[{id:1,name:"Lp 9A",desc:"Chng trnh chun  2023-2024",lessons:12,students:45,color:"green"},{id:2,name:"Lp 9B (Nng cao)",desc:"Chng trnh chuyn Ton",lessons:15,students:32,color:"blue"}];return E.jsxs("div",{className:"p-8 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[E.jsxs("div",{className:"flex justify-between items-end mb-6",children:[E.jsxs("div",{children:[E.jsx("h2",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:"Danh sch Lp hc"}),E.jsx("p",{className:"text-gray-500 mt-1 text-sm",children:"Chn lp  qun l ni dung bi ging v ti nguyn."})]}),E.jsxs("button",{className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg text-sm font-medium shadow-sm flex items-center gap-2 transition-all hover:shadow-indigo-200 hover:shadow-md cursor-pointer",children:[E.jsx($w,{size:18})," Thm lp mi"]})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[e.map(t=>E.jsxs("div",{onClick:()=>n(`/group/${t.id}`),className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm hover:shadow-lg hover:border-indigo-300 cursor-pointer transition-all group duration-300",children:[E.jsxs("div",{className:"flex justify-between items-start mb-4",children:[E.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform ${t.color==="green"?"bg-green-50 text-green-600":"bg-blue-50 text-blue-600"}`,children:E.jsx(Zy,{size:24})}),E.jsx(nC,{size:20,className:"text-gray-300 group-hover:text-indigo-500 transition-colors"})]}),E.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1 group-hover:text-indigo-600 transition-colors",children:t.name}),E.jsx("p",{className:"text-sm text-gray-500 mb-4",children:t.desc}),E.jsxs("div",{className:"flex items-center gap-4 text-xs font-medium text-gray-500 border-t border-gray-50 pt-4",children:[E.jsxs("span",{className:"flex items-center gap-1",children:[E.jsx(Zy,{size:14})," ",t.lessons," Bi ging"]}),E.jsxs("span",{className:"flex items-center gap-1",children:[E.jsx(EC,{size:14})," ",t.students," Hc sinh"]})]})]},t.id)),E.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-xl flex flex-col items-center justify-center p-6 text-gray-400 hover:border-indigo-300 hover:text-indigo-500 hover:bg-indigo-50/30 cursor-pointer transition-all h-full min-h-[180px]",children:[E.jsx(Lw,{size:32,className:"mb-2"}),E.jsx("span",{className:"text-sm font-medium",children:"To lp hc mi"})]})]})]})}const RC=[{id:1,title:"Cn bc hai",chapter:"Chng 1",status:"published",lastEdited:"Hm qua bi Admin",relations:["LT","ST"]},{id:2,title:"Hm s bc nht",chapter:"Chng 2",status:"draft",lastEdited:"2 pht trc",relations:[]}];function NC(){const{groupId:n}=Cw(),e=Bi(),[t,r]=M.useState("");return E.jsxs("div",{className:"p-8 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[E.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[E.jsxs("div",{className:"relative max-w-sm w-full group",children:[E.jsx(Bw,{className:"absolute left-3 top-2.5 text-gray-400 group-focus-within:text-indigo-500 transition-colors",size:20}),E.jsx("input",{type:"text",value:t,onChange:s=>r(s.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all shadow-sm",placeholder:"Tm kim bi hc..."})]}),E.jsxs("div",{className:"flex gap-3",children:[E.jsxs("div",{className:"relative",children:[E.jsxs("select",{className:"appearance-none border border-gray-200 rounded-xl pl-4 pr-10 py-2.5 text-sm text-gray-600 bg-white focus:outline-none focus:border-indigo-500 shadow-sm cursor-pointer hover:border-gray-300",children:[E.jsx("option",{children:"Tt c cc chng"}),E.jsx("option",{children:"Chng 1: i s"}),E.jsx("option",{children:"Chng 2: Hnh hc"})]}),E.jsx(Dw,{className:"absolute right-3 top-2.5 text-gray-400 pointer-events-none",size:20})]}),E.jsxs("button",{onClick:()=>e("/editor"),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2.5 rounded-xl text-sm font-medium shadow-sm flex items-center gap-2 transition-all hover:shadow-indigo-200",children:[E.jsx(Lw,{size:18})," To bi mi"]})]})]}),E.jsx("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden",children:E.jsxs("table",{className:"w-full text-left border-collapse",children:[E.jsx("thead",{className:"bg-gray-50 text-gray-500 text-xs uppercase font-bold border-b border-gray-200",children:E.jsxs("tr",{children:[E.jsx("th",{className:"px-6 py-4 w-16 text-center",children:"#"}),E.jsx("th",{className:"px-6 py-4",children:"Tn Bi Ging"}),E.jsx("th",{className:"px-6 py-4",children:"Chng"}),E.jsx("th",{className:"px-6 py-4",children:"Trng thi"}),E.jsx("th",{className:"px-6 py-4",children:"Lin kt (Bi c)"}),E.jsx("th",{className:"px-6 py-4 text-right"})]})}),E.jsx("tbody",{className:"divide-y divide-gray-100 text-sm",children:RC.map((s,i)=>E.jsxs("tr",{onClick:()=>e(`/editor/${s.id}`),className:"hover:bg-indigo-50/40 transition-colors group cursor-pointer",children:[E.jsxs("td",{className:"px-6 py-4 text-center text-gray-400",children:["0",i+1]}),E.jsxs("td",{className:"px-6 py-4",children:[E.jsx("span",{className:"font-semibold text-gray-800 group-hover:text-indigo-600 transition-colors text-base",children:s.title}),E.jsxs("p",{className:"text-[11px] text-gray-400 mt-1",children:["Sa ln cui: ",s.lastEdited]})]}),E.jsx("td",{className:"px-6 py-4 text-gray-600",children:E.jsx("span",{className:"bg-gray-100 px-2 py-1 rounded text-xs",children:s.chapter})}),E.jsx("td",{className:"px-6 py-4",children:s.status==="published"?E.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-green-50 text-green-700 rounded-full text-[11px] font-bold border border-green-100",children:[E.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500"}),"  xut bn"]}):E.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-yellow-50 text-yellow-700 rounded-full text-[11px] font-bold border border-yellow-100",children:[E.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-yellow-500"})," Bn nhp"]})}),E.jsx("td",{className:"px-6 py-4",children:s.relations.length>0?E.jsx("div",{className:"flex -space-x-2 overflow-hidden",children:s.relations.map((a,u)=>E.jsx("div",{className:`w-8 h-8 rounded-full border-2 border-white flex items-center justify-center text-[10px] font-bold shadow-sm ${u%2===0?"bg-blue-100 text-blue-700":"bg-orange-100 text-orange-700"}`,children:a},u))}):E.jsxs("span",{className:"text-gray-400 italic text-xs flex items-center gap-1",children:[E.jsx(jw,{size:14})," Cha lin kt"]})}),E.jsx("td",{className:"px-6 py-4 text-right",children:E.jsx("button",{className:"text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 p-2 rounded-full transition-colors",children:E.jsx(kC,{size:18})})})]},s.id))})]})})]})}var t0;(function(n){n.STRING="string",n.NUMBER="number",n.INTEGER="integer",n.BOOLEAN="boolean",n.ARRAY="array",n.OBJECT="object"})(t0||(t0={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var n0;(function(n){n.LANGUAGE_UNSPECIFIED="language_unspecified",n.PYTHON="python"})(n0||(n0={}));var r0;(function(n){n.OUTCOME_UNSPECIFIED="outcome_unspecified",n.OUTCOME_OK="outcome_ok",n.OUTCOME_FAILED="outcome_failed",n.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(r0||(r0={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0=["user","model","function","system"];var i0;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(i0||(i0={}));var o0;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(o0||(o0={}));var a0;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(a0||(a0={}));var l0;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER"})(l0||(l0={}));var Lo;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.OTHER="OTHER"})(Lo||(Lo={}));var u0;(function(n){n.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",n.RETRIEVAL_QUERY="RETRIEVAL_QUERY",n.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",n.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",n.CLASSIFICATION="CLASSIFICATION",n.CLUSTERING="CLUSTERING"})(u0||(u0={}));var c0;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(c0||(c0={}));var d0;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(d0||(d0={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class di extends Rt{constructor(e,t){super(e),this.response=t}}class Uw extends Rt{constructor(e,t,r,s){super(e),this.status=t,this.statusText=r,this.errorDetails=s}}class Hr extends Rt{}class Fw extends Rt{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC="https://generativelanguage.googleapis.com",MC="v1beta",IC="0.24.1",PC="genai-js";var Is;(function(n){n.GENERATE_CONTENT="generateContent",n.STREAM_GENERATE_CONTENT="streamGenerateContent",n.COUNT_TOKENS="countTokens",n.EMBED_CONTENT="embedContent",n.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Is||(Is={}));class DC{constructor(e,t,r,s,i){this.model=e,this.task=t,this.apiKey=r,this.stream=s,this.requestOptions=i}toString(){var e,t;const r=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||MC;let i=`${((t=this.requestOptions)===null||t===void 0?void 0:t.baseUrl)||AC}/${r}/${this.model}:${this.task}`;return this.stream&&(i+="?alt=sse"),i}}function LC(n){const e=[];return n!=null&&n.apiClient&&e.push(n.apiClient),e.push(`${PC}/${IC}`),e.join(" ")}async function jC(n){var e;const t=new Headers;t.append("Content-Type","application/json"),t.append("x-goog-api-client",LC(n.requestOptions)),t.append("x-goog-api-key",n.apiKey);let r=(e=n.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(s){throw new Hr(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${s.message}`)}for(const[s,i]of r.entries()){if(s==="x-goog-api-key")throw new Hr(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new Hr(`Header name ${s} can only be set using the apiClient field`);t.append(s,i)}}return t}async function $C(n,e,t,r,s,i){const a=new DC(n,e,t,r,i);return{url:a.toString(),fetchOptions:Object.assign(Object.assign({},FC(i)),{method:"POST",headers:await jC(a),body:s})}}async function ka(n,e,t,r,s,i={},a=fetch){const{url:u,fetchOptions:c}=await $C(n,e,t,r,s,i);return BC(u,c,a)}async function BC(n,e,t=fetch){let r;try{r=await t(n,e)}catch(s){zC(s,n)}return r.ok||await UC(r,n),r}function zC(n,e){let t=n;throw t.name==="AbortError"?(t=new Fw(`Request aborted when fetching ${e.toString()}: ${n.message}`),t.stack=n.stack):n instanceof Uw||n instanceof Hr||(t=new Rt(`Error fetching from ${e.toString()}: ${n.message}`),t.stack=n.stack),t}async function UC(n,e){let t="",r;try{const s=await n.json();t=s.error.message,s.error.details&&(t+=` ${JSON.stringify(s.error.details)}`,r=s.error.details)}catch{}throw new Uw(`Error fetching from ${e.toString()}: [${n.status} ${n.statusText}] ${t}`,n.status,n.statusText,r)}function FC(n){const e={};if((n==null?void 0:n.signal)!==void 0||(n==null?void 0:n.timeout)>=0){const t=new AbortController;(n==null?void 0:n.timeout)>=0&&setTimeout(()=>t.abort(),n.timeout),n!=null&&n.signal&&n.signal.addEventListener("abort",()=>{t.abort()}),e.signal=t.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(n){return n.text=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),eu(n.candidates[0]))throw new di(`${Mr(n)}`,n);return HC(n)}else if(n.promptFeedback)throw new di(`Text not available. ${Mr(n)}`,n);return""},n.functionCall=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),eu(n.candidates[0]))throw new di(`${Mr(n)}`,n);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),h0(n)[0]}else if(n.promptFeedback)throw new di(`Function call not available. ${Mr(n)}`,n)},n.functionCalls=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),eu(n.candidates[0]))throw new di(`${Mr(n)}`,n);return h0(n)}else if(n.promptFeedback)throw new di(`Function call not available. ${Mr(n)}`,n)},n}function HC(n){var e,t,r,s;const i=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const a of(s=(r=n.candidates)===null||r===void 0?void 0:r[0].content)===null||s===void 0?void 0:s.parts)a.text&&i.push(a.text),a.executableCode&&i.push("\n```"+a.executableCode.language+`
`+a.executableCode.code+"\n```\n"),a.codeExecutionResult&&i.push("\n```\n"+a.codeExecutionResult.output+"\n```\n");return i.length>0?i.join(""):""}function h0(n){var e,t,r,s;const i=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const a of(s=(r=n.candidates)===null||r===void 0?void 0:r[0].content)===null||s===void 0?void 0:s.parts)a.functionCall&&i.push(a.functionCall);if(i.length>0)return i}const VC=[Lo.RECITATION,Lo.SAFETY,Lo.LANGUAGE];function eu(n){return!!n.finishReason&&VC.includes(n.finishReason)}function Mr(n){var e,t,r;let s="";if((!n.candidates||n.candidates.length===0)&&n.promptFeedback)s+="Response was blocked",!((e=n.promptFeedback)===null||e===void 0)&&e.blockReason&&(s+=` due to ${n.promptFeedback.blockReason}`),!((t=n.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(s+=`: ${n.promptFeedback.blockReasonMessage}`);else if(!((r=n.candidates)===null||r===void 0)&&r[0]){const i=n.candidates[0];eu(i)&&(s+=`Candidate was blocked due to ${i.finishReason}`,i.finishMessage&&(s+=`: ${i.finishMessage}`))}return s}function Qo(n){return this instanceof Qo?(this.v=n,this):new Qo(n)}function WC(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),s,i=[];return s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s;function a(y){r[y]&&(s[y]=function(w){return new Promise(function(k,x){i.push([y,w,k,x])>1||u(y,w)})})}function u(y,w){try{c(r[y](w))}catch(k){m(i[0][3],k)}}function c(y){y.value instanceof Qo?Promise.resolve(y.value.v).then(h,p):m(i[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,w){y(w),i.shift(),i.length&&u(i[0][0],i[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function KC(n){const e=n.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=JC(e),[r,s]=t.tee();return{stream:GC(r),response:qC(s)}}async function qC(n){const e=[],t=n.getReader();for(;;){const{done:r,value:s}=await t.read();if(r)return ep(YC(e));e.push(s)}}function GC(n){return WC(this,arguments,function*(){const t=n.getReader();for(;;){const{value:r,done:s}=yield Qo(t.read());if(s)break;yield yield Qo(ep(r))}})}function JC(n){const e=n.getReader();return new ReadableStream({start(r){let s="";return i();function i(){return e.read().then(({value:a,done:u})=>{if(u){if(s.trim()){r.error(new Rt("Failed to parse stream"));return}r.close();return}s+=a;let c=s.match(f0),h;for(;c;){try{h=JSON.parse(c[1])}catch{r.error(new Rt(`Error parsing JSON response: "${c[1]}"`));return}r.enqueue(h),s=s.substring(c[0].length),c=s.match(f0)}return i()}).catch(a=>{let u=a;throw u.stack=a.stack,u.name==="AbortError"?u=new Fw("Request aborted when reading from the stream"):u=new Rt("Error reading from the stream"),u})}}})}function YC(n){const e=n[n.length-1],t={promptFeedback:e==null?void 0:e.promptFeedback};for(const r of n){if(r.candidates){let s=0;for(const i of r.candidates)if(t.candidates||(t.candidates=[]),t.candidates[s]||(t.candidates[s]={index:s}),t.candidates[s].citationMetadata=i.citationMetadata,t.candidates[s].groundingMetadata=i.groundingMetadata,t.candidates[s].finishReason=i.finishReason,t.candidates[s].finishMessage=i.finishMessage,t.candidates[s].safetyRatings=i.safetyRatings,i.content&&i.content.parts){t.candidates[s].content||(t.candidates[s].content={role:i.content.role||"user",parts:[]});const a={};for(const u of i.content.parts)u.text&&(a.text=u.text),u.functionCall&&(a.functionCall=u.functionCall),u.executableCode&&(a.executableCode=u.executableCode),u.codeExecutionResult&&(a.codeExecutionResult=u.codeExecutionResult),Object.keys(a).length===0&&(a.text=""),t.candidates[s].content.parts.push(a)}s++}r.usageMetadata&&(t.usageMetadata=r.usageMetadata)}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hw(n,e,t,r){const s=await ka(e,Is.STREAM_GENERATE_CONTENT,n,!0,JSON.stringify(t),r);return KC(s)}async function Vw(n,e,t,r){const i=await(await ka(e,Is.GENERATE_CONTENT,n,!1,JSON.stringify(t),r)).json();return{response:ep(i)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(n){if(n!=null){if(typeof n=="string")return{role:"system",parts:[{text:n}]};if(n.text)return{role:"system",parts:[n]};if(n.parts)return n.role?n:{role:"system",parts:n.parts}}}function Xo(n){let e=[];if(typeof n=="string")e=[{text:n}];else for(const t of n)typeof t=="string"?e.push({text:t}):e.push(t);return QC(e)}function QC(n){const e={role:"user",parts:[]},t={role:"function",parts:[]};let r=!1,s=!1;for(const i of n)"functionResponse"in i?(t.parts.push(i),s=!0):(e.parts.push(i),r=!0);if(r&&s)throw new Rt("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!s)throw new Rt("No content is provided for sending chat message.");return r?e:t}function XC(n,e){var t;let r={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(t=e==null?void 0:e.cachedContent)===null||t===void 0?void 0:t.name,contents:[]};const s=n.generateContentRequest!=null;if(n.contents){if(s)throw new Hr("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=n.contents}else if(s)r=Object.assign(Object.assign({},r),n.generateContentRequest);else{const i=Xo(n);r.contents=[i]}return{generateContentRequest:r}}function p0(n){let e;return n.contents?e=n:e={contents:[Xo(n)]},n.systemInstruction&&(e.systemInstruction=Ww(n.systemInstruction)),e}function ZC(n){return typeof n=="string"||Array.isArray(n)?{content:Xo(n)}:n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],e_={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function t_(n){let e=!1;for(const t of n){const{role:r,parts:s}=t;if(!e&&r!=="user")throw new Rt(`First content should be with role 'user', got ${r}`);if(!s0.includes(r))throw new Rt(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(s0)}`);if(!Array.isArray(s))throw new Rt("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new Rt("Each Content should have at least one part");const i={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const u of s)for(const c of m0)c in u&&(i[c]+=1);const a=e_[r];for(const u of m0)if(!a.includes(u)&&i[u]>0)throw new Rt(`Content with role '${r}' can't contain '${u}' part`);e=!0}}function g0(n){var e;if(n.candidates===void 0||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;if(t===void 0||t.parts===void 0||t.parts.length===0)return!1;for(const r of t.parts)if(r===void 0||Object.keys(r).length===0||r.text!==void 0&&r.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0="SILENT_ERROR";class n_{constructor(e,t,r,s={}){this.model=t,this.params=r,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,r!=null&&r.history&&(t_(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var r,s,i,a,u,c;await this._sendPromise;const h=Xo(e),p={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(i=this.params)===null||i===void 0?void 0:i.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,h]},m=Object.assign(Object.assign({},this._requestOptions),t);let y;return this._sendPromise=this._sendPromise.then(()=>Vw(this._apiKey,this.model,p,m)).then(w=>{var k;if(g0(w.response)){this._history.push(h);const x=Object.assign({parts:[],role:"model"},(k=w.response.candidates)===null||k===void 0?void 0:k[0].content);this._history.push(x)}else{const x=Mr(w.response);x&&console.warn(`sendMessage() was unsuccessful. ${x}. Inspect response object for details.`)}y=w}).catch(w=>{throw this._sendPromise=Promise.resolve(),w}),await this._sendPromise,y}async sendMessageStream(e,t={}){var r,s,i,a,u,c;await this._sendPromise;const h=Xo(e),p={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(i=this.params)===null||i===void 0?void 0:i.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,h]},m=Object.assign(Object.assign({},this._requestOptions),t),y=Hw(this._apiKey,this.model,p,m);return this._sendPromise=this._sendPromise.then(()=>y).catch(w=>{throw new Error(y0)}).then(w=>w.response).then(w=>{if(g0(w)){this._history.push(h);const k=Object.assign({},w.candidates[0].content);k.role||(k.role="model"),this._history.push(k)}else{const k=Mr(w);k&&console.warn(`sendMessageStream() was unsuccessful. ${k}. Inspect response object for details.`)}}).catch(w=>{w.message!==y0&&console.error(w)}),y}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r_(n,e,t,r){return(await ka(e,Is.COUNT_TOKENS,n,!1,JSON.stringify(t),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s_(n,e,t,r){return(await ka(e,Is.EMBED_CONTENT,n,!1,JSON.stringify(t),r)).json()}async function i_(n,e,t,r){const s=t.requests.map(a=>Object.assign(Object.assign({},a),{model:e}));return(await ka(e,Is.BATCH_EMBED_CONTENTS,n,!1,JSON.stringify({requests:s}),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e,t,r={}){this.apiKey=e,this._requestOptions=r,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=Ww(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var r;const s=p0(e),i=Object.assign(Object.assign({},this._requestOptions),t);return Vw(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},s),i)}async generateContentStream(e,t={}){var r;const s=p0(e),i=Object.assign(Object.assign({},this._requestOptions),t);return Hw(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},s),i)}startChat(e){var t;return new n_(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(t=this.cachedContent)===null||t===void 0?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){const r=XC(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),t);return r_(this.apiKey,this.model,r,s)}async embedContent(e,t={}){const r=ZC(e),s=Object.assign(Object.assign({},this._requestOptions),t);return s_(this.apiKey,this.model,r,s)}async batchEmbedContents(e,t={}){const r=Object.assign(Object.assign({},this._requestOptions),t);return i_(this.apiKey,this.model,e,r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new Rt("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new v0(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,r){if(!e.name)throw new Hr("Cached content must contain a `name` field.");if(!e.model)throw new Hr("Cached content must contain a `model` field.");const s=["model","systemInstruction"];for(const a of s)if(t!=null&&t[a]&&e[a]&&(t==null?void 0:t[a])!==e[a]){if(a==="model"){const u=t.model.startsWith("models/")?t.model.replace("models/",""):t.model,c=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(u===c)continue}throw new Hr(`Different value for "${a}" specified in modelParams (${t[a]}) and cachedContent (${e[a]})`)}const i=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new v0(this.apiKey,i,r)}}const a_=async({apiKey:n,topic:e,grade:t,type:r,additionalInstructions:s})=>{if(!n)throw new Error("API Key is required");const a=new o_(n).getGenerativeModel({model:"gemini-pro"}),u=`
    You are an expert math curriculum designer for Vietnamese students (Grade ${t}).
    Create a detailed ${r} lesson about "${e}" in HTML format.
    
    Requirements:
    - Use semantic HTML (h2, h3, p, ul, ol, li, strong, em).
    - Do NOT include <html>, <head>, or <body> tags. Just the content.
    - Use generic classes for styling if needed: 'highlight', 'example-box', 'warning-box'.
    - Language: Vietnamese.
    - Tone: Educational, encouraging, and clear.
    ${s?`- Additional: ${s}`:""}
    
    Format the output as raw HTML string.
  `;return(await(await a.generateContent(u)).response).text().replace(/```html|```/g,"")};function Xu(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function l_(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function u(p){try{h(r.next(p))}catch(m){a(m)}}function c(p){try{h(r.throw(p))}catch(m){a(m)}}function h(p){p.done?i(p.value):s(p.value).then(u,c)}h((r=r.apply(n,e||[])).next())})}const u_=n=>n?(...e)=>n(...e):(...e)=>fetch(...e);class tp extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class c_ extends tp{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class w0 extends tp{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class k0 extends tp{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var sf;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(sf||(sf={}));class d_{constructor(e,{headers:t={},customFetch:r,region:s=sf.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=u_(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return l_(this,arguments,void 0,function*(t,r={}){var s;let i,a;try{const{headers:u,method:c,body:h,signal:p,timeout:m}=r;let y={},{region:w}=r;w||(w=this.region);const k=new URL(`${this.url}/${t}`);w&&w!=="any"&&(y["x-region"]=w,k.searchParams.set("forceFunctionRegion",w));let x;h&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)?typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",x=h):typeof h=="string"?(y["Content-Type"]="text/plain",x=h):typeof FormData<"u"&&h instanceof FormData?x=h:(y["Content-Type"]="application/json",x=JSON.stringify(h)):x=h;let b=p;m&&(a=new AbortController,i=setTimeout(()=>a.abort(),m),p?(b=a.signal,p.addEventListener("abort",()=>a.abort())):b=a.signal);const C=yield this.fetch(k.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),u),body:x,signal:b}).catch(F=>{throw new c_(F)}),A=C.headers.get("x-relay-error");if(A&&A==="true")throw new w0(C);if(!C.ok)throw new k0(C);let O=((s=C.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),j;return O==="application/json"?j=yield C.json():O==="application/octet-stream"||O==="application/pdf"?j=yield C.blob():O==="text/event-stream"?j=C:O==="multipart/form-data"?j=yield C.formData():j=yield C.text(),{data:j,error:null,response:C}}catch(u){return{data:null,error:u,response:u instanceof k0||u instanceof w0?u.context:void 0}}finally{i&&clearTimeout(i)}})}}var h_=class extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}},f_=class{constructor(n){var e,t;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(e=n.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=n.signal,this.isMaybeSingle=(t=n.isMaybeSingle)!==null&&t!==void 0?t:!1,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,e){return this.headers=new Headers(this.headers),this.headers.set(n,e),this}then(n,e){var t=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let a=null,u=null,c=null,h=i.status,p=i.statusText;if(i.ok){var m,y;if(t.method!=="HEAD"){var w;const C=await i.text();C===""||(t.headers.get("Accept")==="text/csv"||t.headers.get("Accept")&&(!((w=t.headers.get("Accept"))===null||w===void 0)&&w.includes("application/vnd.pgrst.plan+text"))?u=C:u=JSON.parse(C))}const x=(m=t.headers.get("Prefer"))===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),b=(y=i.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");x&&b&&b.length>1&&(c=parseInt(b[1])),t.isMaybeSingle&&t.method==="GET"&&Array.isArray(u)&&(u.length>1?(a={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,c=null,h=406,p="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{var k;const x=await i.text();try{a=JSON.parse(x),Array.isArray(a)&&i.status===404&&(u=[],a=null,h=200,p="OK")}catch{i.status===404&&x===""?(h=204,p="No Content"):a={message:x}}if(a&&t.isMaybeSingle&&(!(a==null||(k=a.details)===null||k===void 0)&&k.includes("0 rows"))&&(a=null,h=200,p="OK"),a&&t.shouldThrowOnError)throw new h_(a)}return{error:a,data:u,count:c,status:h,statusText:p}});return this.shouldThrowOnError||(s=s.catch(i=>{var a;let u="";const c=i==null?void 0:i.cause;if(c){var h,p,m,y;const k=(h=c==null?void 0:c.message)!==null&&h!==void 0?h:"",x=(p=c==null?void 0:c.code)!==null&&p!==void 0?p:"";u=`${(m=i==null?void 0:i.name)!==null&&m!==void 0?m:"FetchError"}: ${i==null?void 0:i.message}`,u+=`

Caused by: ${(y=c==null?void 0:c.name)!==null&&y!==void 0?y:"Error"}: ${k}`,x&&(u+=` (${x})`),c!=null&&c.stack&&(u+=`
${c.stack}`)}else{var w;u=(w=i==null?void 0:i.stack)!==null&&w!==void 0?w:""}return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:u,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(n,e)}returns(){return this}overrideTypes(){return this}},p_=class extends f_{select(n){let e=!1;const t=(n??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",t),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:e=!0,nullsFirst:t,foreignTable:r,referencedTable:s=r}={}){const i=s?`${s}.order`:"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${a?`${a},`:""}${n}.${e?"asc":"desc"}${t===void 0?"":t?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:e,referencedTable:t=e}={}){const r=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(r,`${n}`),this}range(n,e,{foreignTable:t,referencedTable:r=t}={}){const s=typeof r>"u"?"offset":`${r}.offset`,i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${n}`),this.url.searchParams.set(i,`${e-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:e=!1,settings:t=!1,buffers:r=!1,wal:s=!1,format:i="text"}={}){var a;const u=[n?"analyze":null,e?"verbose":null,t?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${c}"; options=${u};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}};const x0=new RegExp("[,()]");var ki=class extends p_{eq(n,e){return this.url.searchParams.append(n,`eq.${e}`),this}neq(n,e){return this.url.searchParams.append(n,`neq.${e}`),this}gt(n,e){return this.url.searchParams.append(n,`gt.${e}`),this}gte(n,e){return this.url.searchParams.append(n,`gte.${e}`),this}lt(n,e){return this.url.searchParams.append(n,`lt.${e}`),this}lte(n,e){return this.url.searchParams.append(n,`lte.${e}`),this}like(n,e){return this.url.searchParams.append(n,`like.${e}`),this}likeAllOf(n,e){return this.url.searchParams.append(n,`like(all).{${e.join(",")}}`),this}likeAnyOf(n,e){return this.url.searchParams.append(n,`like(any).{${e.join(",")}}`),this}ilike(n,e){return this.url.searchParams.append(n,`ilike.${e}`),this}ilikeAllOf(n,e){return this.url.searchParams.append(n,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(n,e){return this.url.searchParams.append(n,`ilike(any).{${e.join(",")}}`),this}regexMatch(n,e){return this.url.searchParams.append(n,`match.${e}`),this}regexIMatch(n,e){return this.url.searchParams.append(n,`imatch.${e}`),this}is(n,e){return this.url.searchParams.append(n,`is.${e}`),this}isDistinct(n,e){return this.url.searchParams.append(n,`isdistinct.${e}`),this}in(n,e){const t=Array.from(new Set(e)).map(r=>typeof r=="string"&&x0.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(n,`in.(${t})`),this}notIn(n,e){const t=Array.from(new Set(e)).map(r=>typeof r=="string"&&x0.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(n,`not.in.(${t})`),this}contains(n,e){return typeof e=="string"?this.url.searchParams.append(n,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(n,`cs.{${e.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(e)}`),this}containedBy(n,e){return typeof e=="string"?this.url.searchParams.append(n,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(n,`cd.{${e.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(e)}`),this}rangeGt(n,e){return this.url.searchParams.append(n,`sr.${e}`),this}rangeGte(n,e){return this.url.searchParams.append(n,`nxl.${e}`),this}rangeLt(n,e){return this.url.searchParams.append(n,`sl.${e}`),this}rangeLte(n,e){return this.url.searchParams.append(n,`nxr.${e}`),this}rangeAdjacent(n,e){return this.url.searchParams.append(n,`adj.${e}`),this}overlaps(n,e){return typeof e=="string"?this.url.searchParams.append(n,`ov.${e}`):this.url.searchParams.append(n,`ov.{${e.join(",")}}`),this}textSearch(n,e,{config:t,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const i=t===void 0?"":`(${t})`;return this.url.searchParams.append(n,`${s}fts${i}.${e}`),this}match(n){return Object.entries(n).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(n,e,t){return this.url.searchParams.append(n,`not.${e}.${t}`),this}or(n,{foreignTable:e,referencedTable:t=e}={}){const r=t?`${t}.or`:"or";return this.url.searchParams.append(r,`(${n})`),this}filter(n,e,t){return this.url.searchParams.append(n,`${e}.${t}`),this}},m_=class{constructor(n,{headers:e={},schema:t,fetch:r}){this.url=n,this.headers=new Headers(e),this.schema=t,this.fetch=r}select(n,e){const{head:t=!1,count:r}=e??{},s=t?"HEAD":"GET";let i=!1;const a=(n??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join("");return this.url.searchParams.set("select",a),r&&this.headers.append("Prefer",`count=${r}`),new ki({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(n,{count:e,defaultToNull:t=!0}={}){var r;const s="POST";if(e&&this.headers.append("Prefer",`count=${e}`),t||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const i=n.reduce((a,u)=>a.concat(Object.keys(u)),[]);if(i.length>0){const a=[...new Set(i)].map(u=>`"${u}"`);this.url.searchParams.set("columns",a.join(","))}}return new ki({method:s,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(n,{onConflict:e,ignoreDuplicates:t=!1,count:r,defaultToNull:s=!0}={}){var i;const a="POST";if(this.headers.append("Prefer",`resolution=${t?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),r&&this.headers.append("Prefer",`count=${r}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const u=n.reduce((c,h)=>c.concat(Object.keys(h)),[]);if(u.length>0){const c=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",c.join(","))}}return new ki({method:a,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(n,{count:e}={}){var t;const r="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new ki({method:r,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}delete({count:n}={}){var e;const t="DELETE";return n&&this.headers.append("Prefer",`count=${n}`),new ki({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},g_=class Kw{constructor(e,{headers:t={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=s}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new m_(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Kw(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:s=!1,count:i}={}){var a;let u;const c=new URL(`${this.url}/rpc/${e}`);let h;r||s?(u=r?"HEAD":"GET",Object.entries(t).filter(([m,y])=>y!==void 0).map(([m,y])=>[m,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([m,y])=>{c.searchParams.append(m,y)})):(u="POST",h=t);const p=new Headers(this.headers);return i&&p.set("Prefer",`count=${i}`),new ki({method:u,url:c,headers:p,schema:this.schemaName,body:h,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};class y_{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const r=t.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const v_="2.89.0",w_=`realtime-js/${v_}`,qw="1.0.0",k_="2.0.0",S0=qw,of=1e4,x_=1e3,S_=100;var Ir;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Ir||(Ir={}));var et;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(et||(et={}));var Tn;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Tn||(Tn={}));var af;(function(n){n.websocket="websocket"})(af||(af={}));var vs;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(vs||(vs={}));class b_{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,r;const s=(r=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var t,r;const s=(r=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&r!==void 0?r:{},a=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(e,t,r){var s,i;const a=e.topic,u=(s=e.ref)!==null&&s!==void 0?s:"",c=(i=e.join_ref)!==null&&i!==void 0?i:"",h=e.payload.event,p=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},m=Object.keys(p).length===0?"":JSON.stringify(p);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`ref length ${u.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`userEvent length ${h.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`metadata length ${m.length} exceeds maximum of 255`);const y=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+u.length+a.length+h.length+m.length,w=new ArrayBuffer(this.HEADER_LENGTH+y);let k=new DataView(w),x=0;k.setUint8(x++,this.KINDS.userBroadcastPush),k.setUint8(x++,c.length),k.setUint8(x++,u.length),k.setUint8(x++,a.length),k.setUint8(x++,h.length),k.setUint8(x++,m.length),k.setUint8(x++,t),Array.from(c,C=>k.setUint8(x++,C.charCodeAt(0))),Array.from(u,C=>k.setUint8(x++,C.charCodeAt(0))),Array.from(a,C=>k.setUint8(x++,C.charCodeAt(0))),Array.from(h,C=>k.setUint8(x++,C.charCodeAt(0))),Array.from(m,C=>k.setUint8(x++,C.charCodeAt(0)));var b=new Uint8Array(w.byteLength+r.byteLength);return b.set(new Uint8Array(w),0),b.set(new Uint8Array(r),w.byteLength),b.buffer}decode(e,t){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return t(r)}if(typeof e=="string"){const r=JSON.parse(e),[s,i,a,u,c]=r;return t({join_ref:s,ref:i,topic:a,event:u,payload:c})}return t({})}_binaryDecode(e){const t=new DataView(e),r=t.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,s)}}_decodeUserBroadcast(e,t,r){const s=t.getUint8(1),i=t.getUint8(2),a=t.getUint8(3),u=t.getUint8(4);let c=this.HEADER_LENGTH+4;const h=r.decode(e.slice(c,c+s));c=c+s;const p=r.decode(e.slice(c,c+i));c=c+i;const m=r.decode(e.slice(c,c+a));c=c+a;const y=e.slice(c,e.byteLength),w=u===this.JSON_ENCODING?JSON.parse(r.decode(y)):y,k={type:this.BROADCAST_EVENT,event:p,payload:w};return a>0&&(k.meta=JSON.parse(m)),{join_ref:null,ref:null,topic:h,event:this.BROADCAST_EVENT,payload:k}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>t.includes(r)))}}class Gw{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ae;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Ae||(Ae={}));const b0=(n,e,t={})=>{var r;const s=(r=t.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((i,a)=>(i[a]=E_(a,n,e,s),i),{}):{}},E_=(n,e,t,r)=>{const s=e.find(u=>u.name===n),i=s==null?void 0:s.type,a=t[n];return i&&!r.includes(i)?Jw(i,a):lf(a)},Jw=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return O_(e,t)}switch(n){case Ae.bool:return C_(e);case Ae.float4:case Ae.float8:case Ae.int2:case Ae.int4:case Ae.int8:case Ae.numeric:case Ae.oid:return __(e);case Ae.json:case Ae.jsonb:return T_(e);case Ae.timestamp:return R_(e);case Ae.abstime:case Ae.date:case Ae.daterange:case Ae.int4range:case Ae.int8range:case Ae.money:case Ae.reltime:case Ae.text:case Ae.time:case Ae.timestamptz:case Ae.timetz:case Ae.tsrange:case Ae.tstzrange:return lf(e);default:return lf(e)}},lf=n=>n,C_=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},__=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},T_=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch{return n}return n},O_=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let i;const a=n.slice(1,t);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(u=>Jw(e,u))}return n},R_=n=>typeof n=="string"?n.replace(" ","T"):n,Yw=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class gh{constructor(e,t,r={},s=of){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var E0;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(E0||(E0={}));class jo{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=jo.syncState(this.state,s,i,a),this.pendingDiffs.forEach(c=>{this.state=jo.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=jo.syncDiff(this.state,s,i,a),u())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const i=this.cloneDeep(e),a=this.transformState(t),u={},c={};return this.map(i,(h,p)=>{a[h]||(c[h]=p)}),this.map(a,(h,p)=>{const m=i[h];if(m){const y=p.map(b=>b.presence_ref),w=m.map(b=>b.presence_ref),k=p.filter(b=>w.indexOf(b.presence_ref)<0),x=m.filter(b=>y.indexOf(b.presence_ref)<0);k.length>0&&(u[h]=k),x.length>0&&(c[h]=x)}else u[h]=p}),this.syncDiff(i,{joins:u,leaves:c},r,s)}static syncDiff(e,t,r,s){const{joins:i,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(u,c)=>{var h;const p=(h=e[u])!==null&&h!==void 0?h:[];if(e[u]=this.cloneDeep(c),p.length>0){const m=e[u].map(w=>w.presence_ref),y=p.filter(w=>m.indexOf(w.presence_ref)<0);e[u].unshift(...y)}r(u,p,c)}),this.map(a,(u,c)=>{let h=e[u];if(!h)return;const p=c.map(m=>m.presence_ref);h=h.filter(m=>p.indexOf(m.presence_ref)<0),e[u]=h,s(u,h,c),h.length===0&&delete e[u]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return"metas"in s?t[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var C0;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(C0||(C0={}));var $o;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})($o||($o={}));var nr;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(nr||(nr={}));class _i{constructor(e,t={config:{}},r){var s,i;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=et.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new gh(this,Tn.join,this.params,this.timeout),this.rejoinTimer=new Gw(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=et.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=et.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=et.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=et.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=et.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Tn.reply,{},(a,u)=>{this._trigger(this._replyEventName(u),a)}),this.presence=new jo(this),this.broadcastEndpointURL=Yw(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==et.closed){const{config:{broadcast:a,presence:u,private:c}}=this.params,h=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(w=>w.filter))!==null&&s!==void 0?s:[],p=!!this.bindings[$o.PRESENCE]&&this.bindings[$o.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,m={},y={broadcast:a,presence:Object.assign(Object.assign({},u),{enabled:p}),postgres_changes:h,private:c};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(w=>e==null?void 0:e(nr.CHANNEL_ERROR,w)),this._onClose(()=>e==null?void 0:e(nr.CLOSED)),this.updateJoinPayload(Object.assign({config:y},m)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:w})=>{var k;if(this.socket._isManualToken()||this.socket.setAuth(),w===void 0){e==null||e(nr.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,b=(k=x==null?void 0:x.length)!==null&&k!==void 0?k:0,C=[];for(let A=0;A<b;A++){const O=x[A],{filter:{event:j,schema:F,table:W,filter:L}}=O,q=w&&w[A];if(q&&q.event===j&&_i.isFilterValueEqual(q.schema,F)&&_i.isFilterValueEqual(q.table,W)&&_i.isFilterValueEqual(q.filter,L))C.push(Object.assign(Object.assign({},O),{id:q.id}));else{this.unsubscribe(),this.state=et.errored,e==null||e(nr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,e&&e(nr.SUBSCRIBED);return}}).receive("error",w=>{this.state=et.errored,e==null||e(nr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(nr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===et.joined&&e===$o.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,r)}async httpSend(e,t,r={}){var s;if(t==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const a={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},u=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(u.status===202)return{success:!0};let c=u.statusText;try{const h=await u.json();c=h.error||h.message||c}catch{}return Promise.reject(new Error(c))}async send(e,t={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:a}=e,u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=h.body)===null||s===void 0?void 0:s.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,u,c;const h=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(u=(a=this.params)===null||a===void 0?void 0:a.config)===null||u===void 0?void 0:u.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),h.receive("ok",()=>i("ok")),h.receive("error",()=>i("error")),h.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=et.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Tn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new gh(this,Tn.leave,{},e),r.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=et.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(i),a}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new gh(this,e,t,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>S_){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,i;const a=e.toLocaleLowerCase(),{close:u,error:c,leave:h,join:p}=Tn;if(r&&[u,c,h,p].indexOf(a)>=0&&r!==this._joinRef())return;let y=this._onMessage(a,t,r);if(t&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(w=>{var k,x,b;return((k=w.filter)===null||k===void 0?void 0:k.event)==="*"||((b=(x=w.filter)===null||x===void 0?void 0:x.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===a}).map(w=>w.callback(y,r)):(i=this.bindings[a])===null||i===void 0||i.filter(w=>{var k,x,b,C,A,O;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in w){const j=w.id,F=(k=w.filter)===null||k===void 0?void 0:k.event;return j&&((x=t.ids)===null||x===void 0?void 0:x.includes(j))&&(F==="*"||(F==null?void 0:F.toLocaleLowerCase())===((b=t.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const j=(A=(C=w==null?void 0:w.filter)===null||C===void 0?void 0:C.event)===null||A===void 0?void 0:A.toLocaleLowerCase();return j==="*"||j===((O=t==null?void 0:t.event)===null||O===void 0?void 0:O.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===a}).map(w=>{if(typeof y=="object"&&"ids"in y){const k=y.data,{schema:x,table:b,commit_timestamp:C,type:A,errors:O}=k;y=Object.assign(Object.assign({},{schema:x,table:b,commit_timestamp:C,eventType:A,new:{},old:{},errors:O}),this._getPayloadRecords(k))}w.callback(y,r)})}_isClosed(){return this.state===et.closed}_isJoined(){return this.state===et.joined}_isJoining(){return this.state===et.joining}_isLeaving(){return this.state===et.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&_i.isEqual(s.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}static isFilterValueEqual(e,t){return(e??void 0)===(t??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Tn.close,{},e)}_onError(e){this._on(Tn.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=et.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=b0(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=b0(e.columns,e.old_record)),t}}const yh=()=>{},jl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},N_=[1e3,2e3,5e3,1e4],A_=1e4,M_=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class I_{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=of,this.transport=null,this.heartbeatIntervalMs=jl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=yh,this.ref=0,this.reconnectTimer=null,this.vsn=S0,this.logger=yh,this.conn=null,this.sendBuffer=[],this.serializer=new b_,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((r=t==null?void 0:t.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${af.websocket}`,this.httpEndpoint=Yw(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=y_.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ir.connecting:return vs.Connecting;case Ir.open:return vs.Open;case Ir.closing:return vs.Closing;default:return vs.Closed}}isConnected(){return this.connectionState()===vs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new _i(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:r,payload:s,ref:i}=e,a=()=>{this.encode(e,u=>{var c;(c=this.conn)===null||c===void 0||c.send(u)})};this.log("push",`${t} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(x_,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},jl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(h){this.log("error","error in heartbeat callback",h)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:a}=t,u=a?`(${a})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${s} ${u}`.trim(),i),this.channels.filter(h=>h._isMember(r)).forEach(h=>h._trigger(s,i,a)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Ir.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ir.open||this.conn.readyState===Ir.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this._terminateWorker()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Tn.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([M_],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t,r=!1;if(e)t=e,r=!0;else if(this.accessToken)try{t=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),t=this.accessTokenValue}else t=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const i={access_token:t,version:w_};t&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(Tn.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Gw(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},jl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,s,i,a,u,c,h,p,m,y,w;switch(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:of,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:jl.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(u=e==null?void 0:e.heartbeatCallback)!==null&&u!==void 0?u:yh,this.vsn=(c=e==null?void 0:e.vsn)!==null&&c!==void 0?c:S0,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e==null?void 0:e.reconnectAfterMs)!==null&&h!==void 0?h:(k=>N_[k-1]||A_),this.vsn){case qw:this.encode=(p=e==null?void 0:e.encode)!==null&&p!==void 0?p:((k,x)=>x(JSON.stringify(k))),this.decode=(m=e==null?void 0:e.decode)!==null&&m!==void 0?m:((k,x)=>x(JSON.parse(k)));break;case k_:this.encode=(y=e==null?void 0:e.encode)!==null&&y!==void 0?y:this.serializer.encode.bind(this.serializer),this.decode=(w=e==null?void 0:e.decode)!==null&&w!==void 0?w:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var Zo=class extends Error{constructor(n,e){var t;super(n),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((t=e.icebergType)==null?void 0:t.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function P_(n,e,t){const r=new URL(e,n);if(t)for(const[s,i]of Object.entries(t))i!==void 0&&r.searchParams.set(s,i);return r.toString()}async function D_(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function L_(n){const e=n.fetchImpl??globalThis.fetch;return{async request({method:t,path:r,query:s,body:i,headers:a}){const u=P_(n.baseUrl,r,s),c=await D_(n.auth),h=await e(u,{method:t,headers:{...i?{"Content-Type":"application/json"}:{},...c,...a},body:i?JSON.stringify(i):void 0}),p=await h.text(),m=(h.headers.get("content-type")||"").includes("application/json"),y=m&&p?JSON.parse(p):p;if(!h.ok){const w=m?y:void 0,k=w==null?void 0:w.error;throw new Zo((k==null?void 0:k.message)??`Request failed with status ${h.status}`,{status:h.status,icebergType:k==null?void 0:k.type,icebergCode:k==null?void 0:k.code,details:w})}return{status:h.status,headers:h.headers,data:y}}}}function $l(n){return n.join("")}var j_=class{constructor(n,e=""){this.client=n,this.prefix=e}async listNamespaces(n){const e=n?{parent:$l(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(n,e){const t={namespace:n.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${$l(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${$l(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${$l(n.namespace)}`}),!0}catch(e){if(e instanceof Zo&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(n,e){try{return await this.createNamespace(n,e)}catch(t){if(t instanceof Zo&&t.status===409)return;throw t}}};function hi(n){return n.join("")}var $_=class{constructor(n,e="",t){this.client=n,this.prefix=e,this.accessDelegation=t}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${hi(n.namespace)}/tables`})).data.identifiers}async createTable(n,e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${hi(n.namespace)}/tables`,body:e,headers:t})).data.metadata}async updateTable(n,e){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${hi(n.namespace)}/tables/${n.name}`,body:e});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(n,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${hi(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(n){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${hi(n.namespace)}/tables/${n.name}`,headers:e})).data.metadata}async tableExists(n){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${hi(n.namespace)}/tables/${n.name}`,headers:e}),!0}catch(t){if(t instanceof Zo&&t.status===404)return!1;throw t}}async createTableIfNotExists(n,e){try{return await this.createTable(n,e)}catch(t){if(t instanceof Zo&&t.status===409)return await this.loadTable({namespace:n.namespace,name:e.name});throw t}}},B_=class{constructor(n){var r;let e="v1";n.catalogName&&(e+=`/${n.catalogName}`);const t=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=L_({baseUrl:t,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=(r=n.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new j_(this.client,e),this.tableOps=new $_(this.client,e,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,e){return this.namespaceOps.createNamespace(n,e)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,e){return this.tableOps.createTable(n,e)}async updateTable(n,e){return this.tableOps.updateTable(n,e)}async dropTable(n,e){await this.tableOps.dropTable(n,e)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,e){return this.namespaceOps.createNamespaceIfNotExists(n,e)}async createTableIfNotExists(n,e){return this.tableOps.createTableIfNotExists(n,e)}},Zu=class extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}};function ze(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var z_=class extends Zu{constructor(n,e,t){super(n),this.name="StorageApiError",this.status=e,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},uf=class extends Zu{constructor(n,e){super(n),this.name="StorageUnknownError",this.originalError=e}};const np=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),U_=()=>Response,cf=n=>{if(Array.isArray(n))return n.map(t=>cf(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const s=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=cf(r)}),e},F_=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},H_=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n);function ea(n){"@babel/helpers - typeof";return ea=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ea(n)}function V_(n,e){if(ea(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(ea(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function W_(n){var e=V_(n,"string");return ea(e)=="symbol"?e:e+""}function K_(n,e,t){return(e=W_(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _0(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function ue(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_0(Object(t),!0).forEach(function(r){K_(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_0(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const vh=n=>{var e;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(e=n.error)===null||e===void 0?void 0:e.message)||JSON.stringify(n)},q_=async(n,e,t)=>{n instanceof await U_()&&!(t!=null&&t.noResolveJson)?n.json().then(r=>{const s=n.status||500,i=(r==null?void 0:r.statusCode)||s+"";e(new z_(vh(r),s,i))}).catch(r=>{e(new uf(vh(r),r))}):e(new uf(vh(n),n))},G_=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!r?s:(F_(r)?(s.headers=ue({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),ue(ue({},s),t))};async function xa(n,e,t,r,s,i){return new Promise((a,u)=>{n(t,G_(e,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>q_(c,u,r))})}async function ta(n,e,t,r){return xa(n,"GET",e,t,r)}async function _n(n,e,t,r,s){return xa(n,"POST",e,r,s,t)}async function df(n,e,t,r,s){return xa(n,"PUT",e,r,s,t)}async function J_(n,e,t,r){return xa(n,"HEAD",e,ue(ue({},t),{},{noResolveJson:!0}),r)}async function rp(n,e,t,r,s){return xa(n,"DELETE",e,r,s,t)}var Y_=class{constructor(n,e){this.downloadFn=n,this.shouldThrowOnError=e}then(n,e){return this.execute().then(n,e)}async execute(){var n=this;try{return{data:(await n.downloadFn()).body,error:null}}catch(e){if(n.shouldThrowOnError)throw e;if(ze(e))return{data:null,error:e};throw e}}};let Qw;Qw=Symbol.toStringTag;var Q_=class{constructor(n,e){this.downloadFn=n,this.shouldThrowOnError=e,this[Qw]="BlobDownloadBuilder",this.promise=null}asStream(){return new Y_(this.downloadFn,this.shouldThrowOnError)}then(n,e){return this.getPromise().then(n,e)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var n=this;try{return{data:await(await n.downloadFn()).blob(),error:null}}catch(e){if(n.shouldThrowOnError)throw e;if(ze(e))return{data:null,error:e};throw e}}};const X_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},T0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Z_=class{constructor(n,e={},t,r){this.shouldThrowOnError=!1,this.url=n,this.headers=e,this.bucketId=t,this.fetch=np(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(n,e,t,r){var s=this;try{let i;const a=ue(ue({},T0),r);let u=ue(ue({},s.headers),n==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&t instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",s.encodeMetadata(c)),i.append("",t)):typeof FormData<"u"&&t instanceof FormData?(i=t,i.has("cacheControl")||i.append("cacheControl",a.cacheControl),c&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(c))):(i=t,u["cache-control"]=`max-age=${a.cacheControl}`,u["content-type"]=a.contentType,c&&(u["x-metadata"]=s.toBase64(s.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!a.duplex&&(a.duplex="half")),r!=null&&r.headers&&(u=ue(ue({},u),r.headers));const h=s._removeEmptyFolders(e),p=s._getFinalPath(h),m=await(n=="PUT"?df:_n)(s.fetch,`${s.url}/object/${p}`,i,ue({headers:u},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:h,id:m.Id,fullPath:m.Key},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(ze(i))return{data:null,error:i};throw i}}async upload(n,e,t){return this.uploadOrUpdate("POST",n,e,t)}async uploadToSignedUrl(n,e,t,r){var s=this;const i=s._removeEmptyFolders(n),a=s._getFinalPath(i),u=new URL(s.url+`/object/upload/sign/${a}`);u.searchParams.set("token",e);try{let c;const h=ue({upsert:T0.upsert},r),p=ue(ue({},s.headers),{"x-upsert":String(h.upsert)});return typeof Blob<"u"&&t instanceof Blob?(c=new FormData,c.append("cacheControl",h.cacheControl),c.append("",t)):typeof FormData<"u"&&t instanceof FormData?(c=t,c.append("cacheControl",h.cacheControl)):(c=t,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType),{data:{path:i,fullPath:(await df(s.fetch,u.toString(),c,{headers:p})).Key},error:null}}catch(c){if(s.shouldThrowOnError)throw c;if(ze(c))return{data:null,error:c};throw c}}async createSignedUploadUrl(n,e){var t=this;try{let r=t._getFinalPath(n);const s=ue({},t.headers);e!=null&&e.upsert&&(s["x-upsert"]="true");const i=await _n(t.fetch,`${t.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(t.url+i.url),u=a.searchParams.get("token");if(!u)throw new Zu("No token returned by API");return{data:{signedUrl:a.toString(),path:n,token:u},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ze(r))return{data:null,error:r};throw r}}async update(n,e,t){return this.uploadOrUpdate("PUT",n,e,t)}async move(n,e,t){var r=this;try{return{data:await _n(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:n,destinationKey:e,destinationBucket:t==null?void 0:t.destinationBucket},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(ze(s))return{data:null,error:s};throw s}}async copy(n,e,t){var r=this;try{return{data:{path:(await _n(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:n,destinationKey:e,destinationBucket:t==null?void 0:t.destinationBucket},{headers:r.headers})).Key},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(ze(s))return{data:null,error:s};throw s}}async createSignedUrl(n,e,t){var r=this;try{let s=r._getFinalPath(n),i=await _n(r.fetch,`${r.url}/object/sign/${s}`,ue({expiresIn:e},t!=null&&t.transform?{transform:t.transform}:{}),{headers:r.headers});const a=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return i={signedUrl:encodeURI(`${r.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(ze(s))return{data:null,error:s};throw s}}async createSignedUrls(n,e,t){var r=this;try{const s=await _n(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:n},{headers:r.headers}),i=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return{data:s.map(a=>ue(ue({},a),{},{signedUrl:a.signedURL?encodeURI(`${r.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(ze(s))return{data:null,error:s};throw s}}download(n,e){const t=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),s=r?`?${r}`:"",i=this._getFinalPath(n),a=()=>ta(this.fetch,`${this.url}/${t}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new Q_(a,this.shouldThrowOnError)}async info(n){var e=this;const t=e._getFinalPath(n);try{return{data:cf(await ta(e.fetch,`${e.url}/object/info/${t}`,{headers:e.headers})),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(ze(r))return{data:null,error:r};throw r}}async exists(n){var e=this;const t=e._getFinalPath(n);try{return await J_(e.fetch,`${e.url}/object/${t}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(ze(r)&&r instanceof uf){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}}getPublicUrl(n,e){const t=this._getFinalPath(n),r=[],s=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";s!==""&&r.push(s);const i=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});a!==""&&r.push(a);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${t}${u}`)}}}async remove(n){var e=this;try{return{data:await rp(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:n},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ze(t))return{data:null,error:t};throw t}}async list(n,e,t){var r=this;try{const s=ue(ue(ue({},X_),e),{},{prefix:n||""});return{data:await _n(r.fetch,`${r.url}/object/list/${r.bucketId}`,s,{headers:r.headers},t),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(ze(s))return{data:null,error:s};throw s}}async listV2(n,e){var t=this;try{const r=ue({},n);return{data:await _n(t.fetch,`${t.url}/object/list-v2/${t.bucketId}`,r,{headers:t.headers},e),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ze(r))return{data:null,error:r};throw r}}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const e=[];return n.width&&e.push(`width=${n.width}`),n.height&&e.push(`height=${n.height}`),n.resize&&e.push(`resize=${n.resize}`),n.format&&e.push(`format=${n.format}`),n.quality&&e.push(`quality=${n.quality}`),e.join("&")}};const Xw="2.89.0",Zw={"X-Client-Info":`storage-js/${Xw}`};var eT=class{constructor(n,e={},t,r){this.shouldThrowOnError=!1;const s=new URL(n);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=ue(ue({},Zw),e),this.fetch=np(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(n){var e=this;try{const t=e.listBucketOptionsToQueryString(n);return{data:await ta(e.fetch,`${e.url}/bucket${t}`,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ze(t))return{data:null,error:t};throw t}}async getBucket(n){var e=this;try{return{data:await ta(e.fetch,`${e.url}/bucket/${n}`,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ze(t))return{data:null,error:t};throw t}}async createBucket(n,e={public:!1}){var t=this;try{return{data:await _n(t.fetch,`${t.url}/bucket`,{id:n,name:n,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ze(r))return{data:null,error:r};throw r}}async updateBucket(n,e){var t=this;try{return{data:await df(t.fetch,`${t.url}/bucket/${n}`,{id:n,name:n,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ze(r))return{data:null,error:r};throw r}}async emptyBucket(n){var e=this;try{return{data:await _n(e.fetch,`${e.url}/bucket/${n}/empty`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ze(t))return{data:null,error:t};throw t}}async deleteBucket(n){var e=this;try{return{data:await rp(e.fetch,`${e.url}/bucket/${n}`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ze(t))return{data:null,error:t};throw t}}listBucketOptionsToQueryString(n){const e={};return n&&("limit"in n&&(e.limit=String(n.limit)),"offset"in n&&(e.offset=String(n.offset)),n.search&&(e.search=n.search),n.sortColumn&&(e.sortColumn=n.sortColumn),n.sortOrder&&(e.sortOrder=n.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},tT=class{constructor(n,e={},t){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=ue(ue({},Zw),e),this.fetch=np(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(n){var e=this;try{return{data:await _n(e.fetch,`${e.url}/bucket`,{name:n},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ze(t))return{data:null,error:t};throw t}}async listBuckets(n){var e=this;try{const t=new URLSearchParams;(n==null?void 0:n.limit)!==void 0&&t.set("limit",n.limit.toString()),(n==null?void 0:n.offset)!==void 0&&t.set("offset",n.offset.toString()),n!=null&&n.sortColumn&&t.set("sortColumn",n.sortColumn),n!=null&&n.sortOrder&&t.set("sortOrder",n.sortOrder),n!=null&&n.search&&t.set("search",n.search);const r=t.toString(),s=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return{data:await ta(e.fetch,s,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ze(t))return{data:null,error:t};throw t}}async deleteBucket(n){var e=this;try{return{data:await rp(e.fetch,`${e.url}/bucket/${n}`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ze(t))return{data:null,error:t};throw t}}from(n){var e=this;if(!H_(n))throw new Zu("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const t=new B_({baseUrl:this.url,catalogName:n,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(t,{get(s,i){const a=s[i];return typeof a!="function"?a:async(...u)=>{try{return{data:await a.apply(s,u),error:null}}catch(c){if(r)throw c;return{data:null,error:c}}}}})}};const sp={"X-Client-Info":`storage-js/${Xw}`,"Content-Type":"application/json"};var e1=class extends Error{constructor(n){super(n),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Xt(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}var wh=class extends e1{constructor(n,e,t){super(n),this.name="StorageVectorsApiError",this.status=e,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},nT=class extends e1{constructor(n,e){super(n),this.name="StorageVectorsUnknownError",this.originalError=e}};const ip=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),rT=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},O0=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),sT=async(n,e,t)=>{if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!(t!=null&&t.noResolveJson)){const r=n.status||500,s=n;if(typeof s.json=="function")s.json().then(i=>{const a=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||r+"";e(new wh(O0(i),r,a))}).catch(()=>{const i=r+"";e(new wh(s.statusText||`HTTP ${r} error`,r,i))});else{const i=r+"";e(new wh(s.statusText||`HTTP ${r} error`,r,i))}}else e(new nT(O0(n),n))},iT=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return r?(rT(r)?(s.headers=ue({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,ue(ue({},s),t)):s};async function oT(n,e,t,r,s,i){return new Promise((a,u)=>{n(t,iT(e,r,s,i)).then(c=>{if(!c.ok)throw c;if(r!=null&&r.noResolveJson)return c;const h=c.headers.get("content-type");return!h||!h.includes("application/json")?{}:c.json()}).then(c=>a(c)).catch(c=>sT(c,u,r))})}async function Zt(n,e,t,r,s){return oT(n,"POST",e,r,s,t)}var aT=class{constructor(n,e={},t){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=ue(ue({},sp),e),this.fetch=ip(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(n){var e=this;try{return{data:await Zt(e.fetch,`${e.url}/CreateIndex`,n,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Xt(t))return{data:null,error:t};throw t}}async getIndex(n,e){var t=this;try{return{data:await Zt(t.fetch,`${t.url}/GetIndex`,{vectorBucketName:n,indexName:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Xt(r))return{data:null,error:r};throw r}}async listIndexes(n){var e=this;try{return{data:await Zt(e.fetch,`${e.url}/ListIndexes`,n,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Xt(t))return{data:null,error:t};throw t}}async deleteIndex(n,e){var t=this;try{return{data:await Zt(t.fetch,`${t.url}/DeleteIndex`,{vectorBucketName:n,indexName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Xt(r))return{data:null,error:r};throw r}}},lT=class{constructor(n,e={},t){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=ue(ue({},sp),e),this.fetch=ip(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(n){var e=this;try{if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Zt(e.fetch,`${e.url}/PutVectors`,n,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Xt(t))return{data:null,error:t};throw t}}async getVectors(n){var e=this;try{return{data:await Zt(e.fetch,`${e.url}/GetVectors`,n,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Xt(t))return{data:null,error:t};throw t}}async listVectors(n){var e=this;try{if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return{data:await Zt(e.fetch,`${e.url}/ListVectors`,n,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Xt(t))return{data:null,error:t};throw t}}async queryVectors(n){var e=this;try{return{data:await Zt(e.fetch,`${e.url}/QueryVectors`,n,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Xt(t))return{data:null,error:t};throw t}}async deleteVectors(n){var e=this;try{if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Zt(e.fetch,`${e.url}/DeleteVectors`,n,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Xt(t))return{data:null,error:t};throw t}}},uT=class{constructor(n,e={},t){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=ue(ue({},sp),e),this.fetch=ip(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(n){var e=this;try{return{data:await Zt(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Xt(t))return{data:null,error:t};throw t}}async getBucket(n){var e=this;try{return{data:await Zt(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:n},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Xt(t))return{data:null,error:t};throw t}}async listBuckets(n={}){var e=this;try{return{data:await Zt(e.fetch,`${e.url}/ListVectorBuckets`,n,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Xt(t))return{data:null,error:t};throw t}}async deleteBucket(n){var e=this;try{return{data:await Zt(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Xt(t))return{data:null,error:t};throw t}}},cT=class extends uT{constructor(n,e={}){super(n,e.headers||{},e.fetch)}from(n){return new dT(this.url,this.headers,n,this.fetch)}async createBucket(n){var e=()=>super.createBucket,t=this;return e().call(t,n)}async getBucket(n){var e=()=>super.getBucket,t=this;return e().call(t,n)}async listBuckets(n={}){var e=()=>super.listBuckets,t=this;return e().call(t,n)}async deleteBucket(n){var e=()=>super.deleteBucket,t=this;return e().call(t,n)}},dT=class extends aT{constructor(n,e,t,r){super(n,e,r),this.vectorBucketName=t}async createIndex(n){var e=()=>super.createIndex,t=this;return e().call(t,ue(ue({},n),{},{vectorBucketName:t.vectorBucketName}))}async listIndexes(n={}){var e=()=>super.listIndexes,t=this;return e().call(t,ue(ue({},n),{},{vectorBucketName:t.vectorBucketName}))}async getIndex(n){var e=()=>super.getIndex,t=this;return e().call(t,t.vectorBucketName,n)}async deleteIndex(n){var e=()=>super.deleteIndex,t=this;return e().call(t,t.vectorBucketName,n)}index(n){return new hT(this.url,this.headers,this.vectorBucketName,n,this.fetch)}},hT=class extends lT{constructor(n,e,t,r,s){super(n,e,s),this.vectorBucketName=t,this.indexName=r}async putVectors(n){var e=()=>super.putVectors,t=this;return e().call(t,ue(ue({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async getVectors(n){var e=()=>super.getVectors,t=this;return e().call(t,ue(ue({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async listVectors(n={}){var e=()=>super.listVectors,t=this;return e().call(t,ue(ue({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async queryVectors(n){var e=()=>super.queryVectors,t=this;return e().call(t,ue(ue({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async deleteVectors(n){var e=()=>super.deleteVectors,t=this;return e().call(t,ue(ue({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}},fT=class extends eT{constructor(n,e={},t,r){super(n,e,t,r)}from(n){return new Z_(this.url,this.headers,n,this.fetch)}get vectors(){return new cT(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new tT(this.url+"/iceberg",this.headers,this.fetch)}};const t1="2.89.0",xi=30*1e3,hf=3,kh=hf*xi,pT="http://localhost:9999",mT="supabase.auth.token",gT={"X-Client-Info":`gotrue-js/${t1}`},ff="X-Supabase-Api-Version",n1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},yT=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,vT=600*1e3;class na extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function se(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class wT extends na{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function kT(n){return se(n)&&n.name==="AuthApiError"}class ws extends na{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class ur extends na{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}}class Qt extends ur{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function xT(n){return se(n)&&n.name==="AuthSessionMissingError"}class fi extends ur{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Bl extends ur{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class zl extends ur{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ST(n){return se(n)&&n.name==="AuthImplicitGrantRedirectError"}class R0 extends ur{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class bT extends ur{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class pf extends ur{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function xh(n){return se(n)&&n.name==="AuthRetryableFetchError"}class N0 extends ur{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class mf extends ur{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const au="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),A0=` 	
\r=`.split(""),ET=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<A0.length;e+=1)n[A0[e].charCodeAt(0)]=-2;for(let e=0;e<au.length;e+=1)n[au[e].charCodeAt(0)]=e;return n})();function M0(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(au[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(au[r]),e.queuedBits-=6}}function r1(n,e,t){const r=ET[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function I0(n){const e=[],t=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{TT(a,r,t)};for(let a=0;a<n.length;a+=1)r1(n.charCodeAt(a),s,i);return e.join("")}function CT(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function _T(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|s)+65536,t+=1}CT(r,e)}}function TT(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Ri(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<n.length;s+=1)r1(n.charCodeAt(s),t,r);return new Uint8Array(e)}function OT(n){const e=[];return _T(n,t=>e.push(t)),new Uint8Array(e)}function Ss(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};return n.forEach(s=>M0(s,t,r)),M0(null,t,r),e.join("")}function RT(n){return Math.round(Date.now()/1e3)+n}function NT(){return Symbol("auth-callback")}const vt=()=>typeof window<"u"&&typeof document<"u",ps={tested:!1,writable:!1},s1=()=>{if(!vt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ps.tested)return ps.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),ps.tested=!0,ps.writable=!0}catch{ps.tested=!0,ps.writable=!1}return ps.writable};function AT(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return t.searchParams.forEach((r,s)=>{e[s]=r}),e}const i1=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),MT=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Si=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},ms=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},yt=async(n,e)=>{await n.removeItem(e)};class ec{constructor(){this.promise=new ec.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}ec.promiseConstructor=Promise;function Sh(n){const e=n.split(".");if(e.length!==3)throw new mf("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!yT.test(e[r]))throw new mf("JWT not in base64url format");return{header:JSON.parse(I0(e[0])),payload:JSON.parse(I0(e[1])),signature:Ri(e[2]),raw:{header:e[0],payload:e[1]}}}async function IT(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function PT(n,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await n(i);if(!e(i,null,a)){r(a);return}}catch(a){if(!e(i,a)){s(a);return}}})()})}function DT(n){return("0"+n.toString(16)).substr(-2)}function LT(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let s="";for(let i=0;i<56;i++)s+=t.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,DT).join("")}async function jT(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function $T(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await jT(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function pi(n,e,t=!1){const r=LT();let s=r;t&&(s+="/PASSWORD_RECOVERY"),await Si(n,`${e}-code-verifier`,s);const i=await $T(r);return[i,r===i?"plain":"s256"]}const BT=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function zT(n){const e=n.headers.get(ff);if(!e||!e.match(BT))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function UT(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function FT(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const HT=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function mi(n){if(!HT.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function bh(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function VT(n,e){return new Proxy(n,{get:(t,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,r,s)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,r,s)}})}function P0(n){return JSON.parse(JSON.stringify(n))}const ys=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),WT=[502,503,504];async function D0(n){var e;if(!MT(n))throw new pf(ys(n),0);if(WT.includes(n.status))throw new pf(ys(n),n.status);let t;try{t=await n.json()}catch(i){throw new ws(ys(i),i)}let r;const s=zT(n);if(s&&s.getTime()>=n1["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new N0(ys(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Qt}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new N0(ys(t),n.status,t.weak_password.reasons);throw new wT(ys(t),n.status||500,r)}const KT=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};async function le(n,e,t,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[ff]||(i[ff]=n1["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const u=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await qT(n,e,t+u,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function qT(n,e,t,r,s,i){const a=KT(e,r,s,i);let u;try{u=await n(t,Object.assign({},a))}catch(c){throw console.error(c),new pf(ys(c),0)}if(u.ok||await D0(u),r!=null&&r.noResolveJson)return u;try{return await u.json()}catch(c){await D0(c)}}function Cn(n){var e;let t=null;YT(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=RT(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function L0(n){const e=Cn(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function jr(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function GT(n){return{data:n,error:null}}function JT(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i}=n,a=Xu(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},a);return{data:{properties:u,user:c},error:null}}function j0(n){return n}function YT(n){return n.access_token&&n.refresh_token&&n.expires_in}const Eh=["global","local","others"];class QT{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=i1(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Eh[0]){if(Eh.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Eh.join(", ")}`);try{return await le(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(se(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await le(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:jr})}catch(r){if(se(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=Xu(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await le(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:JT,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(se(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await le(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:jr})}catch(t){if(se(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,i,a,u,c;try{const h={nextPage:null,lastPage:0,total:0},p=await le(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:j0});if(p.error)throw p.error;const m=await p.json(),y=(a=p.headers.get("x-total-count"))!==null&&a!==void 0?a:0,w=(c=(u=p.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&c!==void 0?c:[];return w.length>0&&(w.forEach(k=>{const x=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(k.split(";")[1].split("=")[1]);h[`${b}Page`]=x}),h.total=parseInt(y)),{data:Object.assign(Object.assign({},m),h),error:null}}catch(h){if(se(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){mi(e);try{return await le(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:jr})}catch(t){if(se(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){mi(e);try{return await le(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:jr})}catch(r){if(se(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){mi(e);try{return await le(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:jr})}catch(r){if(se(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){mi(e.userId);try{const{data:t,error:r}=await le(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:r}}catch(t){if(se(t))return{data:null,error:t};throw t}}async _deleteFactor(e){mi(e.userId),mi(e.id);try{return{data:await le(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(se(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,r,s,i,a,u,c;try{const h={nextPage:null,lastPage:0,total:0},p=await le(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:j0});if(p.error)throw p.error;const m=await p.json(),y=(a=p.headers.get("x-total-count"))!==null&&a!==void 0?a:0,w=(c=(u=p.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&c!==void 0?c:[];return w.length>0&&(w.forEach(k=>{const x=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(k.split(";")[1].split("=")[1]);h[`${b}Page`]=x}),h.total=parseInt(y)),{data:Object.assign(Object.assign({},m),h),error:null}}catch(h){if(se(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(e){try{return await le(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(se(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await le(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(se(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await le(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(se(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await le(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(se(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await le(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(se(t))return{data:null,error:t};throw t}}}function $0(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const gi={debug:!!(globalThis&&s1()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class o1 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class XT extends o1{}async function ZT(n,e,t){gi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),gi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){gi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,s.name);try{return await t()}finally{gi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,s.name)}}else{if(e===0)throw gi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new XT(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(gi.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function eO(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function a1(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function tO(n){return parseInt(n,16)}function nO(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function rO(n){var e;const{chainId:t,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:a,notBefore:u,requestId:c,resources:h,scheme:p,uri:m,version:y}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!m)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const w=a1(n.address),k=p?`${p}://${r}`:r,x=n.statement?`${n.statement}
`:"",b=`${k} wants you to sign in with your Ethereum account:
${w}

${x}`;let C=`URI: ${m}
Version: ${y}
Chain ID: ${t}${a?`
Nonce: ${a}`:""}
Issued At: ${i.toISOString()}`;if(s&&(C+=`
Expiration Time: ${s.toISOString()}`),u&&(C+=`
Not Before: ${u.toISOString()}`),c&&(C+=`
Request ID: ${c}`),h){let A=`
Resources:`;for(const O of h){if(!O||typeof O!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${O}`);A+=`
- ${O}`}C+=A}return`${b}
${C}`}class Ye extends Error{constructor({message:e,code:t,cause:r,name:s}){var i;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=s??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=t}}class lu extends Ye{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function sO({error:n,options:e}){var t,r,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ye({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=i.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new Ye({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Ye({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Ye({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new Ye({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new Ye({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return i.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new Ye({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new Ye({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const a=window.location.hostname;if(l1(a)){if(i.rp.id!==a)return new Ye({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Ye({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Ye({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new Ye({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Ye({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function iO({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ye({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new Ye({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const r=window.location.hostname;if(l1(r)){if(t.rpId!==r)return new Ye({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Ye({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new Ye({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Ye({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class oO{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const aO=new oO;function lO(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:r}=n,s=Xu(n,["challenge","user","excludeCredentials"]),i=Ri(e).buffer,a=Object.assign(Object.assign({},t),{id:Ri(t.id).buffer}),u=Object.assign(Object.assign({},s),{challenge:i,user:a});if(r&&r.length>0){u.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const h=r[c];u.excludeCredentials[c]=Object.assign(Object.assign({},h),{id:Ri(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return u}function uO(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,r=Xu(n,["challenge","allowCredentials"]),s=Ri(e).buffer,i=Object.assign(Object.assign({},r),{challenge:s});if(t&&t.length>0){i.allowCredentials=new Array(t.length);for(let a=0;a<t.length;a++){const u=t[a];i.allowCredentials[a]=Object.assign(Object.assign({},u),{id:Ri(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return i}function cO(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:Ss(new Uint8Array(n.response.attestationObject)),clientDataJSON:Ss(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function dO(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n,r=n.getClientExtensionResults(),s=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Ss(new Uint8Array(s.authenticatorData)),clientDataJSON:Ss(new Uint8Array(s.clientDataJSON)),signature:Ss(new Uint8Array(s.signature)),userHandle:s.userHandle?Ss(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function l1(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function B0(){var n,e;return!!(vt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function hO(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new lu("Browser returned unexpected credential type",e)}:{data:null,error:new lu("Empty credential response",e)}}catch(e){return{data:null,error:sO({error:e,options:n})}}}async function fO(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new lu("Browser returned unexpected credential type",e)}:{data:null,error:new lu("Empty credential response",e)}}catch(e){return{data:null,error:iO({error:e,options:n})}}}const pO={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},mO={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function uu(...n){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),t=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of n)if(s)for(const i in s){const a=s[i];if(a!==void 0)if(Array.isArray(a))r[i]=a;else if(t(a))r[i]=a;else if(e(a)){const u=r[i];e(u)?r[i]=uu(u,a):r[i]=uu(a)}else r[i]=a}return r}function gO(n,e){return uu(pO,n,e||{})}function yO(n,e){return uu(mO,n,e||{})}class vO{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:s},i){try{const{data:a,error:u}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!a)return{data:null,error:u};const c=s??aO.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:h}=a.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${r}`),h.displayName||(h.displayName=h.name)}switch(a.webauthn.type){case"create":{const h=gO(a.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:p,error:m}=await hO({publicKey:h,signal:c});return p?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:p}},error:null}:{data:null,error:m}}case"request":{const h=yO(a.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:p,error:m}=await fO(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:h,signal:c}));return p?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:p}},error:null}:{data:null,error:m}}}}catch(a){return se(a)?{data:null,error:a}:{data:null,error:new ws("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!t)return{data:null,error:new na("rpId is required for WebAuthn authentication")};try{if(!B0())return{data:null,error:new ws("Browser does not support WebAuthn",null)};const{data:a,error:u}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:s},{request:i});if(!a)return{data:null,error:u};const{webauthn:c}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:c.type,rpId:t,rpOrigins:r,credential_response:c.credential_response}})}catch(a){return se(a)?{data:null,error:a}:{data:null,error:new ws("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!t)return{data:null,error:new na("rpId is required for WebAuthn registration")};try{if(!B0())return{data:null,error:new ws("Browser does not support WebAuthn",null)};const{data:a,error:u}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(p=>{var m;return(m=p.data)===null||m===void 0?void 0:m.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===e&&y.status!=="unverified")}).then(p=>p?this.client.mfa.unenroll({factorId:p==null?void 0:p.id}):void 0),{data:null,error:u};const{data:c,error:h}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:s},{create:i});return c?this._verify({factorId:a.id,challengeId:c.challengeId,webauthn:{rpId:t,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:h}}catch(a){return se(a)?{data:null,error:a}:{data:null,error:new ws("Unexpected error in register",a)}}}}eO();const wO={url:pT,storageKey:mT,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:gT,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function z0(n,e,t){return await t()}const yi={};class ra{get jwks(){var e,t;return(t=(e=yi[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){yi[this.storageKey]=Object.assign(Object.assign({},yi[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=yi[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){yi[this.storageKey]=Object.assign(Object.assign({},yi[this.storageKey]),{cachedAt:e})}constructor(e){var t,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},wO),e);if(this.storageKey=i.storageKey,this.instanceID=(t=ra.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,ra.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&vt()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new QT({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=i1(i.fetch),this.lock=i.lock||z0,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&vt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=ZT:this.lock=z0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new vO(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:s1()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=$0(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=$0(this.memoryStorage)),vt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${t1}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},r="none";if(vt()&&(t=AT(window.location.href),this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce")),vt()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(t,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),ST(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:u}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",u),await this._saveSession(a),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return se(t)?this._returnResult({error:t}):this._returnResult({error:new ws("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{const i=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Cn}),{data:a,error:u}=i;if(u||!a)return this._returnResult({data:{user:null,session:null},error:u});const c=a.session,h=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:h,session:c},error:null})}catch(i){if(se(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var t,r,s;try{let i;if("email"in e){const{email:p,password:m,options:y}=e;let w=null,k=null;this.flowType==="pkce"&&([w,k]=await pi(this.storage,this.storageKey)),i=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:p,password:m,data:(t=y==null?void 0:y.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:w,code_challenge_method:k},xform:Cn})}else if("phone"in e){const{phone:p,password:m,options:y}=e;i=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:m,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},channel:(s=y==null?void 0:y.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:Cn})}else throw new Bl("You must provide either an email or phone number and a password");const{data:a,error:u}=i;if(u||!a)return await yt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:u});const c=a.session,h=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:h,session:c},error:null})}catch(i){if(await yt(this.storage,`${this.storageKey}-code-verifier`),se(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:a,options:u}=e;t=await le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:L0})}else if("phone"in e){const{phone:i,password:a,options:u}=e;t=await le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:L0})}else throw new Bl("You must provide either an email or phone number and a password");const{data:r,error:s}=t;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const i=new fi;return this._returnResult({data:{user:null,session:null},error:i})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(t){if(se(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,s,i,a,u,c,h,p,m,y;let w,k;if("message"in e)w=e.message,k=e.signature;else{const{chain:x,wallet:b,statement:C,options:A}=e;let O;if(vt())if(typeof b=="object")O=b;else{const he=window;if("ethereum"in he&&typeof he.ethereum=="object"&&"request"in he.ethereum&&typeof he.ethereum.request=="function")O=he.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(A!=null&&A.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=b}const j=new URL((t=A==null?void 0:A.url)!==null&&t!==void 0?t:window.location.href),F=await O.request({method:"eth_requestAccounts"}).then(he=>he).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!F||F.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const W=a1(F[0]);let L=(r=A==null?void 0:A.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!L){const he=await O.request({method:"eth_chainId"});L=tO(he)}const q={domain:j.host,address:W,statement:C,uri:j.href,version:"1",chainId:L,nonce:(s=A==null?void 0:A.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(i=A==null?void 0:A.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(u=A==null?void 0:A.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(c=A==null?void 0:A.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(h=A==null?void 0:A.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(p=A==null?void 0:A.signInWithEthereum)===null||p===void 0?void 0:p.resources};w=rO(q),k=await O.request({method:"personal_sign",params:[nO(w),W]})}try{const{data:x,error:b}=await le(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:w,signature:k},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Cn});if(b)throw b;if(!x||!x.session||!x.user){const C=new fi;return this._returnResult({data:{user:null,session:null},error:C})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:b})}catch(x){if(se(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(e){var t,r,s,i,a,u,c,h,p,m,y,w;let k,x;if("message"in e)k=e.message,x=e.signature;else{const{chain:b,wallet:C,statement:A,options:O}=e;let j;if(vt())if(typeof C=="object")j=C;else{const W=window;if("solana"in W&&typeof W.solana=="object"&&("signIn"in W.solana&&typeof W.solana.signIn=="function"||"signMessage"in W.solana&&typeof W.solana.signMessage=="function"))j=W.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(O!=null&&O.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=C}const F=new URL((t=O==null?void 0:O.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in j&&j.signIn){const W=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},O==null?void 0:O.signInWithSolana),{version:"1",domain:F.host,uri:F.href}),A?{statement:A}:null));let L;if(Array.isArray(W)&&W[0]&&typeof W[0]=="object")L=W[0];else if(W&&typeof W=="object"&&"signedMessage"in W&&"signature"in W)L=W;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in L&&"signature"in L&&(typeof L.signedMessage=="string"||L.signedMessage instanceof Uint8Array)&&L.signature instanceof Uint8Array)k=typeof L.signedMessage=="string"?L.signedMessage:new TextDecoder().decode(L.signedMessage),x=L.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${F.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...A?["",A,""]:[""],"Version: 1",`URI: ${F.href}`,`Issued At: ${(s=(r=O==null?void 0:O.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=O==null?void 0:O.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${O.signInWithSolana.notBefore}`]:[],...!((a=O==null?void 0:O.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${O.signInWithSolana.expirationTime}`]:[],...!((u=O==null?void 0:O.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${O.signInWithSolana.chainId}`]:[],...!((c=O==null?void 0:O.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${O.signInWithSolana.nonce}`]:[],...!((h=O==null?void 0:O.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${O.signInWithSolana.requestId}`]:[],...!((m=(p=O==null?void 0:O.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||m===void 0)&&m.length?["Resources",...O.signInWithSolana.resources.map(L=>`- ${L}`)]:[]].join(`
`);const W=await j.signMessage(new TextEncoder().encode(k),"utf8");if(!W||!(W instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=W}}try{const{data:b,error:C}=await le(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:Ss(x)},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:Cn});if(C)throw C;if(!b||!b.session||!b.user){const A=new fi;return this._returnResult({data:{user:null,session:null},error:A})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:C})}catch(b){if(se(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(e){const t=await ms(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(t??"").split("/");try{if(!r&&this.flowType==="pkce")throw new bT;const{data:i,error:a}=await le(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Cn});if(await yt(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!i||!i.session||!i.user){const u=new fi;return this._returnResult({data:{user:null,session:null,redirectType:null},error:u})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(await yt(this.storage,`${this.storageKey}-code-verifier`),se(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:t,provider:r,token:s,access_token:i,nonce:a}=e,u=await le(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Cn}),{data:c,error:h}=u;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!c||!c.session||!c.user){const p=new fi;return this._returnResult({data:{user:null,session:null},error:p})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:h})}catch(t){if(se(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,r,s,i,a;try{if("email"in e){const{email:u,options:c}=e;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await pi(this.storage,this.storageKey));const{error:m}=await le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:h,code_challenge_method:p},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:m})}if("phone"in e){const{phone:u,options:c}=e,{data:h,error:p}=await le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:p})}throw new Bl("You must provide either an email or phone number.")}catch(u){if(await yt(this.storage,`${this.storageKey}-code-verifier`),se(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async verifyOtp(e){var t,r;try{let s,i;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:u}=await le(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Cn});if(u)throw u;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,h=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:h,session:c},error:null})}catch(s){if(se(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var t,r,s,i,a;try{let u=null,c=null;this.flowType==="pkce"&&([u,c]=await pi(this.storage,this.storageKey));const h=await le(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:c}),headers:this.headers,xform:GT});return!((i=h.data)===null||i===void 0)&&i.url&&vt()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(h.data.url),this._returnResult(h)}catch(u){if(await yt(this.storage,`${this.storageKey}-code-verifier`),se(u))return this._returnResult({data:null,error:u});throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Qt;const{error:s}=await le(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(se(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:a}=await le(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:a,error:u}=await le(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:u})}throw new Bl("You must provide either an email or phone number and a type")}catch(t){if(se(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await ms(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<kh:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await ms(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=bh()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=VT(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(-1,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:jr}):await this._useSession(async t=>{var r,s,i;const{data:a,error:u}=t;if(u)throw u;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Qt}:await le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:jr})})}catch(t){if(se(t))return xT(t)&&(await this._removeSession(),await yt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Qt;const a=s.session;let u=null,c=null;this.flowType==="pkce"&&e.email!=null&&([u,c]=await pi(this.storage,this.storageKey));const{data:h,error:p}=await le(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:c}),jwt:a.access_token,xform:jr});if(p)throw p;return a.user=h.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(r){if(await yt(this.storage,`${this.storageKey}-code-verifier`),se(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Qt;const t=Date.now()/1e3;let r=t,s=!0,i=null;const{payload:a}=Sh(e.access_token);if(a.exp&&(r=a.exp,s=r<=t),s){const{data:u,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!u)return{data:{user:null,session:null},error:null};i=u}else{const{data:u,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(t){if(se(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:a,error:u}=t;if(u)throw u;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Qt;const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(se(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!vt())throw new zl("No browser detected.");if(e.error||e.error_description||e.error_code)throw new zl(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new R0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new zl("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new R0("No code detected.");const{data:A,error:O}=await this._exchangeCodeForSession(e.code);if(O)throw O;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:A.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:u,expires_at:c,token_type:h}=e;if(!i||!u||!a||!h)throw new zl("No session defined in URL");const p=Math.round(Date.now()/1e3),m=parseInt(u);let y=p+m;c&&(y=parseInt(c));const w=y-p;w*1e3<=xi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${m}s`);const k=y-m;p-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,y,p):p-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,y,p);const{data:x,error:b}=await this._getUser(i);if(b)throw b;const C={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:m,expires_at:y,refresh_token:a,token_type:h,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:C,redirectType:e.type},error:null})}catch(r){if(se(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ms(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return this._returnResult({error:i});const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:u}=await this.admin.signOut(a,e);if(u&&!(kT(u)&&(u.status===404||u.status===401||u.status===403)))return this._returnResult({error:u})}return e!=="others"&&(await this._removeSession(),await yt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=NT(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:i},error:a}=t;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await pi(this.storage,this.storageKey,!0));try{return await le(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(await yt(this.storage,`${this.storageKey}-code-verifier`),se(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(se(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:r,error:s}=await this._useSession(async i=>{var a,u,c,h,p;const{data:m,error:y}=i;if(y)throw y;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await le(this.fetch,"GET",w,{headers:this.headers,jwt:(p=(h=m.session)===null||h===void 0?void 0:h.access_token)!==null&&p!==void 0?p:void 0})});if(s)throw s;return vt()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(se(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{const{error:s,data:{session:i}}=t;if(s)throw s;const{options:a,provider:u,token:c,access_token:h,nonce:p}=e,m=await le(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:u,id_token:c,access_token:h,nonce:p,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Cn}),{data:y,error:w}=m;return w?this._returnResult({data:{user:null,session:null},error:w}):!y||!y.session||!y.user?this._returnResult({data:{user:null,session:null},error:new fi}):(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),this._returnResult({data:y,error:w}))}catch(s){if(await yt(this.storage,`${this.storageKey}-code-verifier`),se(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:a}=t;if(a)throw a;return await le(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(se(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await PT(async s=>(s>0&&await IT(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await le(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Cn})),(s,i)=>{const a=200*Math.pow(2,s);return i&&xh(i)&&Date.now()+a-r<xi})}catch(r){if(this._debug(t,"error",r),se(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),vt()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await ms(this.storage,this.storageKey);if(s&&this.userStorage){let a=await ms(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await Si(this.userStorage,this.storageKey+"-user",a)),s.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:bh()}else if(s&&!s.user&&!s.user){const a=await ms(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await yt(this.storage,this.storageKey+"-user"),await Si(this.storage,this.storageKey,s)):s.user=bh()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((t=s.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<kh;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${kh}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),xh(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:u}=await this._getUser(s.access_token);!u&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Qt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new ec;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new Qt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const u={data:i.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(i){if(this._debug(s,"error",i),se(i)){const a={data:null,error:i};return xh(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,t)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let u=0;u<i.length;u+=1)console.error(i[u]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await yt(this.storage,`${this.storageKey}-code-verifier`);const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await Si(this.userStorage,this.storageKey+"-user",{user:t.user});const s=Object.assign({},t);delete s.user;const i=P0(s);await Si(this.storage,this.storageKey,i)}else{const s=P0(t);await Si(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await yt(this.storage,this.storageKey),await yt(this.storage,this.storageKey+"-code-verifier"),await yt(this.storage,this.storageKey+"-user"),this.userStorage&&await yt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&vt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),xi);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/xi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${xi}ms, refresh threshold is ${hf} ticks`),s<=hf&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof o1)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!vt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const s=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await pi(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(u.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?this._returnResult({data:null,error:i}):await le(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(se(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:a}=t;if(a)return this._returnResult({data:null,error:a});const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:h}=await le(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return h?this._returnResult({data:null,error:h}):(e.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(t){if(se(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return this._returnResult({data:null,error:i});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?cO(e.webauthn.credential_response):dO(e.webauthn.credential_response)})}:{code:e.code}),{data:u,error:c}=await le(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),this._returnResult({data:u,error:c}))})}catch(t){if(se(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return this._returnResult({data:null,error:i});const a=await le(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:u}=a;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:lO(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:uO(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(se(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:r},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Sh(r.access_token);let a=null;i.aal&&(a=i.aal);let u=a;((t=(e=r.user.factors)===null||e===void 0?void 0:e.filter(p=>p.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(u="aal2");const h=i.amr||[];return{data:{currentLevel:a,nextLevel:u,currentAuthenticationMethods:h},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;return s?this._returnResult({data:null,error:s}):r?await le(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Qt})})}catch(t){if(se(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Qt});const a=await le(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:u=>({data:u,error:null})});return a.data&&a.data.redirect_url&&vt()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Qt});const a=await le(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:u=>({data:u,error:null})});return a.data&&a.data.redirect_url&&vt()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;return r?this._returnResult({data:null,error:r}):t?await le(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Qt})})}catch(e){if(se(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;return s?this._returnResult({data:null,error:s}):r?(await le(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Qt})})}catch(t){if(se(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(u=>u.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(u=>u.kid===e),r&&this.jwks_cached_at+vT>s)return r;const{data:i,error:a}=await le(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(u=>u.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:w,error:k}=await this.getSession();if(k||!w.session)return this._returnResult({data:null,error:k});r=w.session.access_token}const{header:s,payload:i,signature:a,raw:{header:u,payload:c}}=Sh(r);t!=null&&t.allowExpired||UT(i.exp);const h=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!h){const{error:w}=await this.getUser(r);if(w)throw w;return{data:{claims:i,header:s,signature:a},error:null}}const p=FT(s.alg),m=await crypto.subtle.importKey("jwk",h,p,!0,["verify"]);if(!await crypto.subtle.verify(p,m,a,OT(`${u}.${c}`)))throw new mf("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}}}ra.nextInstanceID={};const kO=ra,xO="2.89.0";let Ao="";typeof Deno<"u"?Ao="deno":typeof document<"u"?Ao="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ao="react-native":Ao="node";const SO={"X-Client-Info":`supabase-js-${Ao}/${xO}`},bO={headers:SO},EO={schema:"public"},CO={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},_O={};function sa(n){"@babel/helpers - typeof";return sa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sa(n)}function TO(n,e){if(sa(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(sa(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function OO(n){var e=TO(n,"string");return sa(e)=="symbol"?e:e+""}function RO(n,e,t){return(e=OO(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function U0(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function Ve(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?U0(Object(t),!0).forEach(function(r){RO(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):U0(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const NO=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),AO=()=>Headers,MO=(n,e,t)=>{const r=NO(t),s=AO();return async(i,a)=>{var u;const c=(u=await e())!==null&&u!==void 0?u:n;let h=new s(a==null?void 0:a.headers);return h.has("apikey")||h.set("apikey",n),h.has("Authorization")||h.set("Authorization",`Bearer ${c}`),r(i,Ve(Ve({},a),{},{headers:h}))}};function IO(n){return n.endsWith("/")?n:n+"/"}function PO(n,e){var t,r;const{db:s,auth:i,realtime:a,global:u}=n,{db:c,auth:h,realtime:p,global:m}=e,y={db:Ve(Ve({},c),s),auth:Ve(Ve({},h),i),realtime:Ve(Ve({},p),a),storage:{},global:Ve(Ve(Ve({},m),u),{},{headers:Ve(Ve({},(t=m==null?void 0:m.headers)!==null&&t!==void 0?t:{}),(r=u==null?void 0:u.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return n.accessToken?y.accessToken=n.accessToken:delete y.accessToken,y}function DO(n){const e=n==null?void 0:n.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(IO(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var LO=class extends kO{constructor(n){super(n)}},jO=class{constructor(n,e,t){var r,s;this.supabaseUrl=n,this.supabaseKey=e;const i=DO(n);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const a=`sb-${i.hostname.split(".")[0]}-auth-token`,u={db:EO,realtime:_O,auth:Ve(Ve({},CO),{},{storageKey:a}),global:bO},c=PO(t??{},u);if(this.storageKey=(r=c.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(p,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}});else{var h;this.auth=this._initSupabaseAuthClient((h=c.auth)!==null&&h!==void 0?h:{},this.headers,c.global.fetch)}this.fetch=MO(e,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Ve({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&this.accessToken().then(p=>this.realtime.setAuth(p)).catch(p=>console.warn("Failed to set initial Realtime auth token:",p)),this.rest=new g_(new URL("rest/v1",i).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new fT(this.storageUrl.href,this.headers,this.fetch,t==null?void 0:t.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new d_(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,e={},t={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,e,t)}channel(n,e={config:{}}){return this.realtime.channel(n,e)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n=this,e,t;if(n.accessToken)return await n.accessToken();const{data:r}=await n.auth.getSession();return(e=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:n.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:e,detectSessionInUrl:t,storage:r,userStorage:s,storageKey:i,flowType:a,lock:u,debug:c,throwOnError:h},p,m){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new LO({url:this.authUrl.href,headers:Ve(Ve({},y),p),storageKey:i,autoRefreshToken:n,persistSession:e,detectSessionInUrl:t,storage:r,userStorage:s,flowType:a,lock:u,debug:c,throwOnError:h,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(w=>w.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new I_(this.realtimeUrl.href,Ve(Ve({},n),{},{params:Ve(Ve({},{apikey:this.supabaseKey}),n==null?void 0:n.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,e)=>{this._handleTokenChanged(n,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(n,e,t){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==t?(this.changedAccessToken=t,this.realtime.setAuth(t)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const $O=(n,e,t)=>new jO(n,e,t);function BO(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}BO()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const zO="https://xyzcompany.supabase.co",UO="public-anon-key",bs=$O(zO,UO),Ch={async getAll(){const{data:n,error:e}=await bs.from("lessons").select("*").order("created_at",{ascending:!1});if(e)throw e;return n},async getById(n){const{data:e,error:t}=await bs.from("lessons").select("*").eq("id",n).single();if(t)throw t;return e},async create(n){const{data:e,error:t}=await bs.from("lessons").insert(n).select().single();if(t)throw t;return e},async update(n,e){const{data:t,error:r}=await bs.from("lessons").update(e).eq("id",n).select().single();if(r)throw r;return t}};function FO(n){const e=Bi(),[t,r]=M.useState(""),[s,i]=M.useState("8"),[a,u]=M.useState(""),[c,h]=M.useState(""),[p,m]=M.useState(new Set),[y,w]=M.useState(()=>localStorage.getItem("gemini_api_key")||""),[k,x]=M.useState(!1),[b,C]=M.useState(!1),[A,O]=M.useState("");M.useEffect(()=>{const L=localStorage.getItem("gemini_api_key");L&&w(L)},[]),M.useEffect(()=>{n&&j(n)},[n]);async function j(L){try{const q=await Ch.getById(L);q&&(r(q.title),u(q.content||""),h(q.custom_css||""))}catch(q){console.error(q),O("Error loading lesson")}}return{title:t,setTitle:r,grade:s,setGrade:i,content:a,setContent:u,customCss:c,setCustomCss:h,prerequisites:p,setPrerequisites:m,isGenerating:k,isSaving:b,status:A,generateContent:async()=>{const L=localStorage.getItem("gemini_api_key");if(!L){alert("Please set your Gemini API Key in Settings first.");return}if(!t){alert("Please enter a topic");return}x(!0),O("Generating content...");try{const q=await a_({apiKey:L,topic:t,grade:s,type:"theory"});u(q),O("Content generated!")}catch(q){console.error(q),O("Generation failed"),alert("Failed to generate content. Check API Key in Settings.")}finally{x(!1)}},saveLesson:async()=>{if(!t){alert("Topic title is required");return}C(!0),O("Saving...");try{const L={title:t,content:a,custom_css:c,type:"theory",updated_at:new Date().toISOString()};n?await Ch.update(n,L):await Ch.create({...L,unit_id:null,is_published:!1}),O("Saved successfully!"),e("/")}catch(L){console.error(L),O("Failed to save")}finally{C(!1)}}}}function wt(n){this.content=n}wt.prototype={constructor:wt,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,s=r.find(n),i=r.content.slice();return s==-1?i.push(t||n,e):(i[s+1]=e,t&&(i[s]=t)),new wt(i)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new wt(t)},addToStart:function(n,e){return new wt([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new wt(t)},addBefore:function(n,e,t){var r=this.remove(e),s=r.content.slice(),i=r.find(n);return s.splice(i==-1?s.length:i,0,e,t),new wt(s)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=wt.from(n),n.size?new wt(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=wt.from(n),n.size?new wt(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=wt.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};wt.from=function(n){if(n instanceof wt)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new wt(e)};function u1(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let s=n.child(r),i=e.child(r);if(s==i){t+=s.nodeSize;continue}if(!s.sameMarkup(i))return t;if(s.isText&&s.text!=i.text){for(let a=0;s.text[a]==i.text[a];a++)t++;return t}if(s.content.size||i.content.size){let a=u1(s.content,i.content,t+1);if(a!=null)return a}t+=s.nodeSize}}function c1(n,e,t,r){for(let s=n.childCount,i=e.childCount;;){if(s==0||i==0)return s==i?null:{a:t,b:r};let a=n.child(--s),u=e.child(--i),c=a.nodeSize;if(a==u){t-=c,r-=c;continue}if(!a.sameMarkup(u))return{a:t,b:r};if(a.isText&&a.text!=u.text){let h=0,p=Math.min(a.text.length,u.text.length);for(;h<p&&a.text[a.text.length-h-1]==u.text[u.text.length-h-1];)h++,t--,r--;return{a:t,b:r}}if(a.content.size||u.content.size){let h=c1(a.content,u.content,t-1,r-1);if(h)return h}t-=c,r-=c}}class U{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,s=0,i){for(let a=0,u=0;u<t;a++){let c=this.content[a],h=u+c.nodeSize;if(h>e&&r(c,s+u,i||null,a)!==!1&&c.content.size){let p=u+1;c.nodesBetween(Math.max(0,e-p),Math.min(c.content.size,t-p),r,s+p)}u=h}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,s){let i="",a=!0;return this.nodesBetween(e,t,(u,c)=>{let h=u.isText?u.text.slice(Math.max(e,c)-c,t-c):u.isLeaf?s?typeof s=="function"?s(u):s:u.type.spec.leafText?u.type.spec.leafText(u):"":"";u.isBlock&&(u.isLeaf&&h||u.isTextblock)&&r&&(a?a=!1:i+=r),i+=h},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,s=this.content.slice(),i=0;for(t.isText&&t.sameMarkup(r)&&(s[s.length-1]=t.withText(t.text+r.text),i=1);i<e.content.length;i++)s.push(e.content[i]);return new U(s,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],s=0;if(t>e)for(let i=0,a=0;a<t;i++){let u=this.content[i],c=a+u.nodeSize;c>e&&((a<e||c>t)&&(u.isText?u=u.cut(Math.max(0,e-a),Math.min(u.text.length,t-a)):u=u.cut(Math.max(0,e-a-1),Math.min(u.content.size,t-a-1))),r.push(u),s+=u.nodeSize),a=c}return new U(r,s)}cutByIndex(e,t){return e==t?U.empty:e==0&&t==this.content.length?this:new U(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let s=this.content.slice(),i=this.size+t.nodeSize-r.nodeSize;return s[e]=t,new U(s,i)}addToStart(e){return new U([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new U(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let s=this.content[t];e(s,r,t),r+=s.nodeSize}}findDiffStart(e,t=0){return u1(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return c1(this,e,t,r)}findIndex(e){if(e==0)return Ul(0,e);if(e==this.size)return Ul(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let t=0,r=0;;t++){let s=this.child(t),i=r+s.nodeSize;if(i>=e)return i==e?Ul(t+1,i):Ul(t,r);r=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return U.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new U(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return U.empty;let t,r=0;for(let s=0;s<e.length;s++){let i=e[s];r+=i.nodeSize,s&&i.isText&&e[s-1].sameMarkup(i)?(t||(t=e.slice(0,s)),t[t.length-1]=i.withText(t[t.length-1].text+i.text)):t&&t.push(i)}return new U(t||e,r)}static from(e){if(!e)return U.empty;if(e instanceof U)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new U([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}U.empty=new U([],0);const _h={index:0,offset:0};function Ul(n,e){return _h.index=n,_h.offset=e,_h}function cu(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!cu(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!cu(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let Oe=class gf{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let s=0;s<e.length;s++){let i=e[s];if(this.eq(i))return e;if(this.type.excludes(i.type))t||(t=e.slice(0,s));else{if(i.type.excludes(this.type))return e;!r&&i.type.rank>this.type.rank&&(t||(t=e.slice(0,s)),t.push(this),r=!0),t&&t.push(i)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&cu(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let s=r.create(t.attrs);return r.checkAttrs(s.attrs),s}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return gf.none;if(e instanceof gf)return[e];let t=e.slice();return t.sort((r,s)=>r.type.rank-s.type.rank),t}};Oe.none=[];class du extends Error{}class Y{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=h1(this.content,e+this.openStart,t);return r&&new Y(r,this.openStart,this.openEnd)}removeBetween(e,t){return new Y(d1(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return Y.empty;let r=t.openStart||0,s=t.openEnd||0;if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Y(U.fromJSON(e,t.content),r,s)}static maxOpen(e,t=!0){let r=0,s=0;for(let i=e.firstChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.firstChild)r++;for(let i=e.lastChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.lastChild)s++;return new Y(e,r,s)}}Y.empty=new Y(U.empty,0,0);function d1(n,e,t){let{index:r,offset:s}=n.findIndex(e),i=n.maybeChild(r),{index:a,offset:u}=n.findIndex(t);if(s==e||i.isText){if(u!=t&&!n.child(a).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=a)throw new RangeError("Removing non-flat range");return n.replaceChild(r,i.copy(d1(i.content,e-s-1,t-s-1)))}function h1(n,e,t,r){let{index:s,offset:i}=n.findIndex(e),a=n.maybeChild(s);if(i==e||a.isText)return r&&!r.canReplace(s,s,t)?null:n.cut(0,e).append(t).append(n.cut(e));let u=h1(a.content,e-i-1,t,a);return u&&n.replaceChild(s,a.copy(u))}function HO(n,e,t){if(t.openStart>n.depth)throw new du("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new du("Inconsistent open depths");return f1(n,e,t,0)}function f1(n,e,t,r){let s=n.index(r),i=n.node(r);if(s==e.index(r)&&r<n.depth-t.openStart){let a=f1(n,e,t,r+1);return i.copy(i.content.replaceChild(s,a))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let a=n.parent,u=a.content;return Rs(a,u.cut(0,n.parentOffset).append(t.content).append(u.cut(e.parentOffset)))}else{let{start:a,end:u}=VO(t,n);return Rs(i,m1(n,a,u,e,r))}else return Rs(i,hu(n,e,r))}function p1(n,e){if(!e.type.compatibleContent(n.type))throw new du("Cannot join "+e.type.name+" onto "+n.type.name)}function yf(n,e,t){let r=n.node(t);return p1(r,e.node(t)),r}function Os(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function Bo(n,e,t,r){let s=(e||n).node(t),i=0,a=e?e.index(t):s.childCount;n&&(i=n.index(t),n.depth>t?i++:n.textOffset&&(Os(n.nodeAfter,r),i++));for(let u=i;u<a;u++)Os(s.child(u),r);e&&e.depth==t&&e.textOffset&&Os(e.nodeBefore,r)}function Rs(n,e){return n.type.checkContent(e),n.copy(e)}function m1(n,e,t,r,s){let i=n.depth>s&&yf(n,e,s+1),a=r.depth>s&&yf(t,r,s+1),u=[];return Bo(null,n,s,u),i&&a&&e.index(s)==t.index(s)?(p1(i,a),Os(Rs(i,m1(n,e,t,r,s+1)),u)):(i&&Os(Rs(i,hu(n,e,s+1)),u),Bo(e,t,s,u),a&&Os(Rs(a,hu(t,r,s+1)),u)),Bo(r,null,s,u),new U(u)}function hu(n,e,t){let r=[];if(Bo(null,n,t,r),n.depth>t){let s=yf(n,e,t+1);Os(Rs(s,hu(n,e,t+1)),r)}return Bo(e,null,t,r),new U(r)}function VO(n,e){let t=e.depth-n.openStart,s=e.node(t).copy(n.content);for(let i=t-1;i>=0;i--)s=e.node(i).copy(U.from(s));return{start:s.resolveNoCache(n.openStart+t),end:s.resolveNoCache(s.content.size-n.openEnd-t)}}class ia{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],s=e.child(t);return r?e.child(t).cut(r):s}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],s=t==0?0:this.path[t*3-1]+1;for(let i=0;i<e;i++)s+=r.child(i).nodeSize;return s}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return Oe.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),s=e.maybeChild(t);if(!r){let u=r;r=s,s=u}let i=r.marks;for(var a=0;a<i.length;a++)i[a].type.spec.inclusive===!1&&(!s||!i[a].isInSet(s.marks))&&(i=i[a--].removeFromSet(i));return i}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,s=e.parent.maybeChild(e.index());for(var i=0;i<r.length;i++)r[i].type.spec.inclusive===!1&&(!s||!r[i].isInSet(s.marks))&&(r=r[i--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new fu(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],s=0,i=t;for(let a=e;;){let{index:u,offset:c}=a.content.findIndex(i),h=i-c;if(r.push(a,u,s+c),!h||(a=a.child(u),a.isText))break;i=h-1,s+=c+1}return new ia(t,r,i)}static resolveCached(e,t){let r=F0.get(e);if(r)for(let i=0;i<r.elts.length;i++){let a=r.elts[i];if(a.pos==t)return a}else F0.set(e,r=new WO);let s=r.elts[r.i]=ia.resolve(e,t);return r.i=(r.i+1)%KO,s}}class WO{constructor(){this.elts=[],this.i=0}}const KO=12,F0=new WeakMap;class fu{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const qO=Object.create(null);let Vr=class vf{constructor(e,t,r,s=Oe.none){this.type=e,this.attrs=t,this.marks=s,this.content=r||U.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,s=0){this.content.nodesBetween(e,t,r,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,s){return this.content.textBetween(e,t,r,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&cu(this.attrs,t||e.defaultAttrs||qO)&&Oe.sameSet(this.marks,r||Oe.none)}copy(e=null){return e==this.content?this:new vf(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new vf(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return Y.empty;let s=this.resolve(e),i=this.resolve(t),a=r?0:s.sharedDepth(t),u=s.start(a),h=s.node(a).content.cut(s.pos-u,i.pos-u);return new Y(h,s.depth-a,i.depth-a)}replace(e,t,r){return HO(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:s}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(s==e||t.isText)return t;e-=s+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let s=this.content.child(t-1);return{node:s,index:t-1,offset:r-s.nodeSize}}resolve(e){return ia.resolveCached(this,e)}resolveNoCache(e){return ia.resolve(this,e)}rangeHasMark(e,t,r){let s=!1;return t>e&&this.nodesBetween(e,t,i=>(r.isInSet(i.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),g1(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=U.empty,s=0,i=r.childCount){let a=this.contentMatchAt(e).matchFragment(r,s,i),u=a&&a.matchFragment(this.content,t);if(!u||!u.validEnd)return!1;for(let c=s;c<i;c++)if(!this.type.allowsMarks(r.child(c).marks))return!1;return!0}canReplaceWith(e,t,r,s){if(s&&!this.type.allowsMarks(s))return!1;let i=this.contentMatchAt(e).matchType(r),a=i&&i.matchFragment(this.content,t);return a?a.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Oe.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Oe.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let s=U.fromJSON(e,t.content),i=e.nodeType(t.type).create(t.attrs,s,r);return i.type.checkAttrs(i.attrs),i}};Vr.prototype.text=void 0;class pu extends Vr{constructor(e,t,r,s){if(super(e,t,null,s),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):g1(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new pu(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new pu(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function g1(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Ps{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new GO(e,t);if(r.next==null)return Ps.empty;let s=y1(r);r.next&&r.err("Unexpected trailing text");let i=tR(eR(s));return nR(i,r),i}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let s=this;for(let i=t;s&&i<r;i++)s=s.matchType(e.child(i).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let s=[this];function i(a,u){let c=a.matchFragment(e,r);if(c&&(!t||c.validEnd))return U.from(u.map(h=>h.createAndFill()));for(let h=0;h<a.next.length;h++){let{type:p,next:m}=a.next[h];if(!(p.isText||p.hasRequiredAttrs())&&s.indexOf(m)==-1){s.push(m);let y=i(m,u.concat(p));if(y)return y}}return null}return i(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let s=r.shift(),i=s.match;if(i.matchType(e)){let a=[];for(let u=s;u.type;u=u.via)a.push(u.type);return a.reverse()}for(let a=0;a<i.next.length;a++){let{type:u,next:c}=i.next[a];!u.isLeaf&&!u.hasRequiredAttrs()&&!(u.name in t)&&(!s.type||c.validEnd)&&(r.push({match:u.contentMatch,type:u,via:s}),t[u.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let s=0;s<r.next.length;s++)e.indexOf(r.next[s].next)==-1&&t(r.next[s].next)}return t(this),e.map((r,s)=>{let i=s+(r.validEnd?"*":" ")+" ";for(let a=0;a<r.next.length;a++)i+=(a?", ":"")+r.next[a].type.name+"->"+e.indexOf(r.next[a].next);return i}).join(`
`)}}Ps.empty=new Ps(!0);class GO{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function y1(n){let e=[];do e.push(JO(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function JO(n){let e=[];do e.push(YO(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function YO(n){let e=ZO(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=QO(n,e);else break;return e}function H0(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function QO(n,e){let t=H0(n),r=t;return n.eat(",")&&(n.next!="}"?r=H0(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function XO(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let s=[];for(let i in t){let a=t[i];a.isInGroup(e)&&s.push(a)}return s.length==0&&n.err("No node type or group '"+e+"' found"),s}function ZO(n){if(n.eat("(")){let e=y1(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=XO(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function eR(n){let e=[[]];return s(i(n,0),t()),e;function t(){return e.push([])-1}function r(a,u,c){let h={term:c,to:u};return e[a].push(h),h}function s(a,u){a.forEach(c=>c.to=u)}function i(a,u){if(a.type=="choice")return a.exprs.reduce((c,h)=>c.concat(i(h,u)),[]);if(a.type=="seq")for(let c=0;;c++){let h=i(a.exprs[c],u);if(c==a.exprs.length-1)return h;s(h,u=t())}else if(a.type=="star"){let c=t();return r(u,c),s(i(a.expr,c),c),[r(c)]}else if(a.type=="plus"){let c=t();return s(i(a.expr,u),c),s(i(a.expr,c),c),[r(c)]}else{if(a.type=="opt")return[r(u)].concat(i(a.expr,u));if(a.type=="range"){let c=u;for(let h=0;h<a.min;h++){let p=t();s(i(a.expr,c),p),c=p}if(a.max==-1)s(i(a.expr,c),c);else for(let h=a.min;h<a.max;h++){let p=t();r(c,p),s(i(a.expr,c),p),c=p}return[r(c)]}else{if(a.type=="name")return[r(u,void 0,a.value)];throw new Error("Unknown expr type")}}}}function v1(n,e){return e-n}function V0(n,e){let t=[];return r(e),t.sort(v1);function r(s){let i=n[s];if(i.length==1&&!i[0].term)return r(i[0].to);t.push(s);for(let a=0;a<i.length;a++){let{term:u,to:c}=i[a];!u&&t.indexOf(c)==-1&&r(c)}}}function tR(n){let e=Object.create(null);return t(V0(n,0));function t(r){let s=[];r.forEach(a=>{n[a].forEach(({term:u,to:c})=>{if(!u)return;let h;for(let p=0;p<s.length;p++)s[p][0]==u&&(h=s[p][1]);V0(n,c).forEach(p=>{h||s.push([u,h=[]]),h.indexOf(p)==-1&&h.push(p)})})});let i=e[r.join(",")]=new Ps(r.indexOf(n.length-1)>-1);for(let a=0;a<s.length;a++){let u=s[a][1].sort(v1);i.next.push({type:s[a][0],next:e[u.join(",")]||t(u)})}return i}}function nR(n,e){for(let t=0,r=[n];t<r.length;t++){let s=r[t],i=!s.validEnd,a=[];for(let u=0;u<s.next.length;u++){let{type:c,next:h}=s.next[u];a.push(c.name),i&&!(c.isText||c.hasRequiredAttrs())&&(i=!1),r.indexOf(h)==-1&&r.push(h)}i&&e.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function w1(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function k1(n,e){let t=Object.create(null);for(let r in n){let s=e&&e[r];if(s===void 0){let i=n[r];if(i.hasDefault)s=i.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=s}return t}function x1(n,e,t,r){for(let s in e)if(!(s in n))throw new RangeError(`Unsupported attribute ${s} for ${t} of type ${s}`);for(let s in n){let i=n[s];i.validate&&i.validate(e[s])}}function S1(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new sR(n,r,e[r]);return t}let W0=class b1{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=S1(e,r.attrs),this.defaultAttrs=w1(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Ps.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:k1(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Vr(this,this.computeAttrs(e),U.from(t),Oe.setFrom(r))}createChecked(e=null,t,r){return t=U.from(t),this.checkContent(t),new Vr(this,this.computeAttrs(e),t,Oe.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=U.from(t),t.size){let a=this.contentMatch.fillBefore(t);if(!a)return null;t=a.append(t)}let s=this.contentMatch.matchFragment(t),i=s&&s.fillBefore(U.empty,!0);return i?new Vr(this,e,t.append(i),Oe.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){x1(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:Oe.none:e}static compile(e,t){let r=Object.create(null);e.forEach((i,a)=>r[i]=new b1(i,t,a));let s=t.spec.topNode||"doc";if(!r[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function rR(n,e,t){let r=t.split("|");return s=>{let i=s===null?"null":typeof s;if(r.indexOf(i)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${i}`)}}class sR{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?rR(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class tc{constructor(e,t,r,s){this.name=e,this.rank=t,this.schema=r,this.spec=s,this.attrs=S1(e,s.attrs),this.excluded=null;let i=w1(this.attrs);this.instance=i?new Oe(this,i):null}create(e=null){return!e&&this.instance?this.instance:new Oe(this,k1(this.attrs,e))}static compile(e,t){let r=Object.create(null),s=0;return e.forEach((i,a)=>r[i]=new tc(i,s++,t,a)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){x1(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class E1{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let s in e)t[s]=e[s];t.nodes=wt.from(e.nodes),t.marks=wt.from(e.marks||{}),this.nodes=W0.compile(this.spec.nodes,this),this.marks=tc.compile(this.spec.marks,this);let r=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let i=this.nodes[s],a=i.spec.content||"",u=i.spec.marks;if(i.contentMatch=r[a]||(r[a]=Ps.parse(a,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet=u=="_"?null:u?K0(this,u.split(" ")):u==""||!i.inlineContent?[]:null}for(let s in this.marks){let i=this.marks[s],a=i.spec.excludes;i.excluded=a==null?[i]:a==""?[]:K0(this,a.split(" "))}this.nodeFromJSON=s=>Vr.fromJSON(this,s),this.markFromJSON=s=>Oe.fromJSON(this,s),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof W0){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,s)}text(e,t){let r=this.nodes.text;return new pu(r,r.defaultAttrs,e,Oe.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function K0(n,e){let t=[];for(let r=0;r<e.length;r++){let s=e[r],i=n.marks[s],a=i;if(i)t.push(i);else for(let u in n.marks){let c=n.marks[u];(s=="_"||c.spec.group&&c.spec.group.split(" ").indexOf(s)>-1)&&t.push(a=c)}if(!a)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function iR(n){return n.tag!=null}function oR(n){return n.style!=null}class Wr{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(s=>{if(iR(s))this.tags.push(s);else if(oR(s)){let i=/[^=]*/.exec(s.style)[0];r.indexOf(i)<0&&r.push(i),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let i=e.nodes[s.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new G0(this,t,!1);return r.addAll(e,Oe.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new G0(this,t,!0);return r.addAll(e,Oe.none,t.from,t.to),Y.maxOpen(r.finish())}matchTag(e,t,r){for(let s=r?this.tags.indexOf(r)+1:0;s<this.tags.length;s++){let i=this.tags[s];if(uR(e,i.tag)&&(i.namespace===void 0||e.namespaceURI==i.namespace)&&(!i.context||t.matchesContext(i.context))){if(i.getAttrs){let a=i.getAttrs(e);if(a===!1)continue;i.attrs=a||void 0}return i}}}matchStyle(e,t,r,s){for(let i=s?this.styles.indexOf(s)+1:0;i<this.styles.length;i++){let a=this.styles[i],u=a.style;if(!(u.indexOf(e)!=0||a.context&&!r.matchesContext(a.context)||u.length>e.length&&(u.charCodeAt(e.length)!=61||u.slice(e.length+1)!=t))){if(a.getAttrs){let c=a.getAttrs(t);if(c===!1)continue;a.attrs=c||void 0}return a}}}static schemaRules(e){let t=[];function r(s){let i=s.priority==null?50:s.priority,a=0;for(;a<t.length;a++){let u=t[a];if((u.priority==null?50:u.priority)<i)break}t.splice(a,0,s)}for(let s in e.marks){let i=e.marks[s].spec.parseDOM;i&&i.forEach(a=>{r(a=J0(a)),a.mark||a.ignore||a.clearMark||(a.mark=s)})}for(let s in e.nodes){let i=e.nodes[s].spec.parseDOM;i&&i.forEach(a=>{r(a=J0(a)),a.node||a.ignore||a.mark||(a.node=s)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Wr(e,Wr.schemaRules(e)))}}const C1={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},aR={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},_1={ol:!0,ul:!0},oa=1,wf=2,zo=4;function q0(n,e,t){return e!=null?(e?oa:0)|(e==="full"?wf:0):n&&n.whitespace=="pre"?oa|wf:t&~zo}class Fl{constructor(e,t,r,s,i,a){this.type=e,this.attrs=t,this.marks=r,this.solid=s,this.options=a,this.content=[],this.activeMarks=Oe.none,this.match=i||(a&zo?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(U.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,s;return(s=r.findWrapping(e.type))?(this.match=r,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&oa)){let r=this.content[this.content.length-1],s;if(r&&r.isText&&(s=/[ \t\r\n\u000c]+$/.exec(r.text))){let i=r;r.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-s[0].length))}}let t=U.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(U.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!C1.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class G0{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let s=t.topNode,i,a=q0(null,t.preserveWhitespace,0)|(r?zo:0);s?i=new Fl(s.type,s.attrs,Oe.none,!0,t.topMatch||s.type.contentMatch,a):r?i=new Fl(null,null,Oe.none,!0,null,a):i=new Fl(e.schema.topNodeType,null,Oe.none,!0,null,a),this.nodes=[i],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,s=this.top,i=s.options&wf?"full":this.localPreserveWS||(s.options&oa)>0,{schema:a}=this.parser;if(i==="full"||s.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(i)if(i==="full")r=r.replace(/\r\n?/g,`
`);else if(a.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(a.linebreakReplacement.create())){let u=r.split(/\r?\n|\r/);for(let c=0;c<u.length;c++)c&&this.insertNode(a.linebreakReplacement.create(),t,!0),u[c]&&this.insertNode(a.text(u[c]),t,!/\S/.test(u[c]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let u=s.content[s.content.length-1],c=e.previousSibling;(!u||c&&c.nodeName=="BR"||u.isText&&/[ \t\r\n\u000c]$/.test(u.text))&&(r=r.slice(1))}r&&this.insertNode(a.text(r),t,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let s=this.localPreserveWS,i=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let a=e.nodeName.toLowerCase(),u;_1.hasOwnProperty(a)&&this.parser.normalizeLists&&lR(e);let c=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(u=this.parser.matchTag(e,this,r));e:if(c?c.ignore:aR.hasOwnProperty(a))this.findInside(e),this.ignoreFallback(e,t);else if(!c||c.skip||c.closeParent){c&&c.closeParent?this.open=Math.max(0,this.open-1):c&&c.skip.nodeType&&(e=c.skip);let h,p=this.needsBlock;if(C1.hasOwnProperty(a))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),h=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let m=c&&c.skip?t:this.readStyles(e,t);m&&this.addAll(e,m),h&&this.sync(i),this.needsBlock=p}else{let h=this.readStyles(e,t);h&&this.addElementByRule(e,c,h,c.consuming===!1?u:void 0)}this.localPreserveWS=s}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let i=this.parser.matchedStyles[s],a=r.getPropertyValue(i);if(a)for(let u=void 0;;){let c=this.parser.matchStyle(i,a,this,u);if(!c)break;if(c.ignore)return null;if(c.clearMark?t=t.filter(h=>!c.clearMark(h)):t=t.concat(this.parser.schema.marks[c.mark].create(c.attrs)),c.consuming===!1)u=c;else break}}return t}addElementByRule(e,t,r,s){let i,a;if(t.node)if(a=this.parser.schema.nodes[t.node],a.isLeaf)this.insertNode(a.create(t.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let c=this.enter(a,t.attrs||null,r,t.preserveWhitespace);c&&(i=!0,r=c)}else{let c=this.parser.schema.marks[t.mark];r=r.concat(c.create(t.attrs))}let u=this.top;if(a&&a.isLeaf)this.findInside(e);else if(s)this.addElement(e,r,s);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(c=>this.insertNode(c,r,!1));else{let c=e;typeof t.contentElement=="string"?c=e.querySelector(t.contentElement):typeof t.contentElement=="function"?c=t.contentElement(e):t.contentElement&&(c=t.contentElement),this.findAround(e,c,!0),this.addAll(c,r),this.findAround(e,c,!1)}i&&this.sync(u)&&this.open--}addAll(e,t,r,s){let i=r||0;for(let a=r?e.childNodes[r]:e.firstChild,u=s==null?null:e.childNodes[s];a!=u;a=a.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(a,t);this.findAtPoint(e,i)}findPlace(e,t,r){let s,i;for(let a=this.open,u=0;a>=0;a--){let c=this.nodes[a],h=c.findWrapping(e);if(h&&(!s||s.length>h.length+u)&&(s=h,i=c,!h.length))break;if(c.solid){if(r)break;u+=2}}if(!s)return null;this.sync(i);for(let a=0;a<s.length;a++)t=this.enterInner(s[a],null,t,!1);return t}insertNode(e,t,r){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(t=this.enterInner(i,null,t))}let s=this.findPlace(e,t,r);if(s){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let a=Oe.none;for(let u of s.concat(e.marks))(i.type?i.type.allowsMarkType(u.type):Y0(u.type,e.type))&&(a=u.addToSet(a));return i.content.push(e.mark(a)),!0}return!1}enter(e,t,r,s){let i=this.findPlace(e.create(t),r,!1);return i&&(i=this.enterInner(e,t,r,!0,s)),i}enterInner(e,t,r,s=!1,i){this.closeExtra();let a=this.top;a.match=a.match&&a.match.matchType(e);let u=q0(e,i,a.options);a.options&zo&&a.content.length==0&&(u|=zo);let c=Oe.none;return r=r.filter(h=>(a.type?a.type.allowsMarkType(h.type):Y0(h.type,e))?(c=h.addToSet(c),!1):!0),this.nodes.push(new Fl(e,t,c,s,null,u)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=oa)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let s=r.length-1;s>=0;s--)e+=r[s].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&t.compareDocumentPosition(this.find[s].node)&(r?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,s=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(s?0:1),a=(u,c)=>{for(;u>=0;u--){let h=t[u];if(h==""){if(u==t.length-1||u==0)continue;for(;c>=i;c--)if(a(u-1,c))return!0;return!1}else{let p=c>0||c==0&&s?this.nodes[c].type:r&&c>=i?r.node(c-i).type:null;if(!p||p.name!=h&&!p.isInGroup(h))return!1;c--}}return!0};return a(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function lR(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&_1.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function uR(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function J0(n){let e={};for(let t in n)e[t]=n[t];return e}function Y0(n,e){let t=e.schema.nodes;for(let r in t){let s=t[r];if(!s.allowsMarkType(n))continue;let i=[],a=u=>{i.push(u);for(let c=0;c<u.edgeCount;c++){let{type:h,next:p}=u.edge(c);if(h==e||i.indexOf(p)<0&&a(p))return!0}};if(a(s.contentMatch))return!0}}class Bs{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=Th(t).createDocumentFragment());let s=r,i=[];return e.forEach(a=>{if(i.length||a.marks.length){let u=0,c=0;for(;u<i.length&&c<a.marks.length;){let h=a.marks[c];if(!this.marks[h.type.name]){c++;continue}if(!h.eq(i[u][0])||h.type.spec.spanning===!1)break;u++,c++}for(;u<i.length;)s=i.pop()[1];for(;c<a.marks.length;){let h=a.marks[c++],p=this.serializeMark(h,a.isInline,t);p&&(i.push([h,s]),s.appendChild(p.dom),s=p.contentDOM||p.dom)}}s.appendChild(this.serializeNodeInner(a,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:s}=tu(Th(t),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,s)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let s=e.marks.length-1;s>=0;s--){let i=this.serializeMark(e.marks[s],e.isInline,t);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r}serializeMark(e,t,r={}){let s=this.marks[e.type.name];return s&&tu(Th(r),s(e,t),null,e.attrs)}static renderSpec(e,t,r=null,s){return tu(e,t,r,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Bs(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=Q0(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return Q0(e.marks)}}function Q0(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function Th(n){return n.document||window.document}const X0=new WeakMap;function cR(n){let e=X0.get(n);return e===void 0&&X0.set(n,e=dR(n)),e}function dR(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let s=0;s<r.length;s++)t(r[s]);else for(let s in r)t(r[s])}return t(n),e}function tu(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],i;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(i=cR(r))&&i.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let a=s.indexOf(" ");a>0&&(t=s.slice(0,a),s=s.slice(a+1));let u,c=t?n.createElementNS(t,s):n.createElement(s),h=e[1],p=1;if(h&&typeof h=="object"&&h.nodeType==null&&!Array.isArray(h)){p=2;for(let m in h)if(h[m]!=null){let y=m.indexOf(" ");y>0?c.setAttributeNS(m.slice(0,y),m.slice(y+1),h[m]):m=="style"&&c.style?c.style.cssText=h[m]:c.setAttribute(m,h[m])}}for(let m=p;m<e.length;m++){let y=e[m];if(y===0){if(m<e.length-1||m>p)throw new RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}else{let{dom:w,contentDOM:k}=tu(n,y,t,r);if(c.appendChild(w),k){if(u)throw new RangeError("Multiple content holes");u=k}}}return{dom:c,contentDOM:u}}const T1=65535,O1=Math.pow(2,16);function hR(n,e){return n+e*O1}function Z0(n){return n&T1}function fR(n){return(n-(n&T1))/O1}const R1=1,N1=2,nu=4,A1=8;class kf{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&A1)>0}get deletedBefore(){return(this.delInfo&(R1|nu))>0}get deletedAfter(){return(this.delInfo&(N1|nu))>0}get deletedAcross(){return(this.delInfo&nu)>0}}class en{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&en.empty)return en.empty}recover(e){let t=0,r=Z0(e);if(!this.inverted)for(let s=0;s<r;s++)t+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[r*3]+t+fR(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let s=0,i=this.inverted?2:1,a=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let c=this.ranges[u]-(this.inverted?s:0);if(c>e)break;let h=this.ranges[u+i],p=this.ranges[u+a],m=c+h;if(e<=m){let y=h?e==c?-1:e==m?1:t:t,w=c+s+(y<0?0:p);if(r)return w;let k=e==(t<0?c:m)?null:hR(u/3,e-c),x=e==c?N1:e==m?R1:nu;return(t<0?e!=c:e!=m)&&(x|=A1),new kf(w,x,k)}s+=p-h}return r?e+s:new kf(e+s,0,null)}touches(e,t){let r=0,s=Z0(t),i=this.inverted?2:1,a=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let c=this.ranges[u]-(this.inverted?r:0);if(c>e)break;let h=this.ranges[u+i],p=c+h;if(e<=p&&u==s*3)return!0;r+=this.ranges[u+a]-h}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let s=0,i=0;s<this.ranges.length;s+=3){let a=this.ranges[s],u=a-(this.inverted?i:0),c=a+(this.inverted?0:i),h=this.ranges[s+t],p=this.ranges[s+r];e(u,u+h,c,c+p),i+=p-h}}invert(){return new en(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?en.empty:new en(e<0?[0,-e,0]:[0,0,e])}}en.empty=new en([]);class aa{constructor(e,t,r=0,s=e?e.length:0){this.mirror=t,this.from=r,this.to=s,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new aa(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,r=this._maps.length;t<e._maps.length;t++){let s=e.getMirror(t);this.appendMap(e._maps[t],s!=null&&s<t?r+s:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this._maps.length+e._maps.length;t>=0;t--){let s=e.getMirror(t);this.appendMap(e._maps[t].invert(),s!=null&&s>t?r-s-1:void 0)}}invert(){let e=new aa;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let s=0;for(let i=this.from;i<this.to;i++){let a=this._maps[i],u=a.mapResult(e,t);if(u.recover!=null){let c=this.getMirror(i);if(c!=null&&c>i&&c<this.to){i=c,e=this._maps[c].recover(u.recover);continue}}s|=u.delInfo,e=u.pos}return r?e:new kf(e,s,null)}}const Oh=Object.create(null);class Mt{getMap(){return en.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Oh[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Oh)throw new RangeError("Duplicate use of step JSON ID "+e);return Oh[e]=t,t.prototype.jsonID=e,t}}class Qe{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Qe(e,null)}static fail(e){return new Qe(null,e)}static fromReplace(e,t,r,s){try{return Qe.ok(e.replace(t,r,s))}catch(i){if(i instanceof du)return Qe.fail(i.message);throw i}}}function op(n,e,t){let r=[];for(let s=0;s<n.childCount;s++){let i=n.child(s);i.content.size&&(i=i.copy(op(i.content,e,i))),i.isInline&&(i=e(i,t,s)),r.push(i)}return U.fromArray(r)}class zr extends Mt{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),s=r.node(r.sharedDepth(this.to)),i=new Y(op(t.content,(a,u)=>!a.isAtom||!u.type.allowsMarkType(this.mark.type)?a:a.mark(this.mark.addToSet(a.marks)),s),t.openStart,t.openEnd);return Qe.fromReplace(e,this.from,this.to,i)}invert(){return new Bn(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new zr(t.pos,r.pos,this.mark)}merge(e){return e instanceof zr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new zr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new zr(t.from,t.to,e.markFromJSON(t.mark))}}Mt.jsonID("addMark",zr);class Bn extends Mt{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new Y(op(t.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),t.openStart,t.openEnd);return Qe.fromReplace(e,this.from,this.to,r)}invert(){return new zr(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Bn(t.pos,r.pos,this.mark)}merge(e){return e instanceof Bn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Bn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Bn(t.from,t.to,e.markFromJSON(t.mark))}}Mt.jsonID("removeMark",Bn);class Ur extends Mt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Qe.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Qe.fromReplace(e,this.pos,this.pos+1,new Y(U.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let s=0;s<t.marks.length;s++)if(!t.marks[s].isInSet(r))return new Ur(this.pos,t.marks[s]);return new Ur(this.pos,this.mark)}}return new Ds(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ur(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ur(t.pos,e.markFromJSON(t.mark))}}Mt.jsonID("addNodeMark",Ur);class Ds extends Mt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Qe.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Qe.fromReplace(e,this.pos,this.pos+1,new Y(U.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Ur(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ds(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Ds(t.pos,e.markFromJSON(t.mark))}}Mt.jsonID("removeNodeMark",Ds);class at extends Mt{constructor(e,t,r,s=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=s}apply(e){return this.structure&&xf(e,this.from,this.to)?Qe.fail("Structure replace would overwrite content"):Qe.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new en([this.from,this.to-this.from,this.slice.size])}invert(e){return new at(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new at(t.pos,Math.max(t.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof at)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?Y.empty:new Y(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new at(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?Y.empty:new Y(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new at(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new at(t.from,t.to,Y.fromJSON(e,t.slice),!!t.structure)}}Mt.jsonID("replace",at);class ut extends Mt{constructor(e,t,r,s,i,a,u=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=s,this.slice=i,this.insert=a,this.structure=u}apply(e){if(this.structure&&(xf(e,this.from,this.gapFrom)||xf(e,this.gapTo,this.to)))return Qe.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Qe.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?Qe.fromReplace(e,this.from,this.to,r):Qe.fail("Content does not fit in gap")}getMap(){return new en([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new ut(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),s=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||s<t.pos||i>r.pos?null:new ut(t.pos,r.pos,s,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ut(t.from,t.to,t.gapFrom,t.gapTo,Y.fromJSON(e,t.slice),t.insert,!!t.structure)}}Mt.jsonID("replaceAround",ut);function xf(n,e,t){let r=n.resolve(e),s=t-e,i=r.depth;for(;s>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,s--;if(s>0){let a=r.node(i).maybeChild(r.indexAfter(i));for(;s>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,s--}}return!1}function pR(n,e,t,r){let s=[],i=[],a,u;n.doc.nodesBetween(e,t,(c,h,p)=>{if(!c.isInline)return;let m=c.marks;if(!r.isInSet(m)&&p.type.allowsMarkType(r.type)){let y=Math.max(h,e),w=Math.min(h+c.nodeSize,t),k=r.addToSet(m);for(let x=0;x<m.length;x++)m[x].isInSet(k)||(a&&a.to==y&&a.mark.eq(m[x])?a.to=w:s.push(a=new Bn(y,w,m[x])));u&&u.to==y?u.to=w:i.push(u=new zr(y,w,r))}}),s.forEach(c=>n.step(c)),i.forEach(c=>n.step(c))}function mR(n,e,t,r){let s=[],i=0;n.doc.nodesBetween(e,t,(a,u)=>{if(!a.isInline)return;i++;let c=null;if(r instanceof tc){let h=a.marks,p;for(;p=r.isInSet(h);)(c||(c=[])).push(p),h=p.removeFromSet(h)}else r?r.isInSet(a.marks)&&(c=[r]):c=a.marks;if(c&&c.length){let h=Math.min(u+a.nodeSize,t);for(let p=0;p<c.length;p++){let m=c[p],y;for(let w=0;w<s.length;w++){let k=s[w];k.step==i-1&&m.eq(s[w].style)&&(y=k)}y?(y.to=h,y.step=i):s.push({style:m,from:Math.max(u,e),to:h,step:i})}}}),s.forEach(a=>n.step(new Bn(a.from,a.to,a.style)))}function ap(n,e,t,r=t.contentMatch,s=!0){let i=n.doc.nodeAt(e),a=[],u=e+1;for(let c=0;c<i.childCount;c++){let h=i.child(c),p=u+h.nodeSize,m=r.matchType(h.type);if(!m)a.push(new at(u,p,Y.empty));else{r=m;for(let y=0;y<h.marks.length;y++)t.allowsMarkType(h.marks[y].type)||n.step(new Bn(u,p,h.marks[y]));if(s&&h.isText&&t.whitespace!="pre"){let y,w=/\r?\n|\r/g,k;for(;y=w.exec(h.text);)k||(k=new Y(U.from(t.schema.text(" ",t.allowedMarks(h.marks))),0,0)),a.push(new at(u+y.index,u+y.index+y[0].length,k))}}u=p}if(!r.validEnd){let c=r.fillBefore(U.empty,!0);n.replace(u,u,new Y(c,0,0))}for(let c=a.length-1;c>=0;c--)n.step(a[c])}function gR(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function zi(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth,s=0,i=0;;--r){let a=n.$from.node(r),u=n.$from.index(r)+s,c=n.$to.indexAfter(r)-i;if(r<n.depth&&a.canReplace(u,c,t))return r;if(r==0||a.type.spec.isolating||!gR(a,u,c))break;u&&(s=1),c<a.childCount&&(i=1)}return null}function yR(n,e,t){let{$from:r,$to:s,depth:i}=e,a=r.before(i+1),u=s.after(i+1),c=a,h=u,p=U.empty,m=0;for(let k=i,x=!1;k>t;k--)x||r.index(k)>0?(x=!0,p=U.from(r.node(k).copy(p)),m++):c--;let y=U.empty,w=0;for(let k=i,x=!1;k>t;k--)x||s.after(k+1)<s.end(k)?(x=!0,y=U.from(s.node(k).copy(y)),w++):h++;n.step(new ut(c,h,a,u,new Y(p.append(y),m,w),p.size-m,!0))}function lp(n,e,t=null,r=n){let s=vR(n,e),i=s&&wR(r,e);return i?s.map(ev).concat({type:e,attrs:t}).concat(i.map(ev)):null}function ev(n){return{type:n,attrs:null}}function vR(n,e){let{parent:t,startIndex:r,endIndex:s}=n,i=t.contentMatchAt(r).findWrapping(e);if(!i)return null;let a=i.length?i[0]:e;return t.canReplaceWith(r,s,a)?i:null}function wR(n,e){let{parent:t,startIndex:r,endIndex:s}=n,i=t.child(r),a=e.contentMatch.findWrapping(i.type);if(!a)return null;let c=(a.length?a[a.length-1]:e).contentMatch;for(let h=r;c&&h<s;h++)c=c.matchType(t.child(h).type);return!c||!c.validEnd?null:a}function kR(n,e,t){let r=U.empty;for(let a=t.length-1;a>=0;a--){if(r.size){let u=t[a].type.contentMatch.matchFragment(r);if(!u||!u.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=U.from(t[a].type.create(t[a].attrs,r))}let s=e.start,i=e.end;n.step(new ut(s,i,s,i,new Y(r,0,0),t.length,!0))}function xR(n,e,t,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=n.steps.length;n.doc.nodesBetween(e,t,(a,u)=>{let c=typeof s=="function"?s(a):s;if(a.isTextblock&&!a.hasMarkup(r,c)&&SR(n.doc,n.mapping.slice(i).map(u),r)){let h=null;if(r.schema.linebreakReplacement){let w=r.whitespace=="pre",k=!!r.contentMatch.matchType(r.schema.linebreakReplacement);w&&!k?h=!1:!w&&k&&(h=!0)}h===!1&&I1(n,a,u,i),ap(n,n.mapping.slice(i).map(u,1),r,void 0,h===null);let p=n.mapping.slice(i),m=p.map(u,1),y=p.map(u+a.nodeSize,1);return n.step(new ut(m,y,m+1,y-1,new Y(U.from(r.create(c,null,a.marks)),0,0),1,!0)),h===!0&&M1(n,a,u,i),!1}})}function M1(n,e,t,r){e.forEach((s,i)=>{if(s.isText){let a,u=/\r?\n|\r/g;for(;a=u.exec(s.text);){let c=n.mapping.slice(r).map(t+1+i+a.index);n.replaceWith(c,c+1,e.type.schema.linebreakReplacement.create())}}})}function I1(n,e,t,r){e.forEach((s,i)=>{if(s.type==s.type.schema.linebreakReplacement){let a=n.mapping.slice(r).map(t+1+i);n.replaceWith(a,a+1,e.type.schema.text(`
`))}})}function SR(n,e,t){let r=n.resolve(e),s=r.index();return r.parent.canReplaceWith(s,s+1,t)}function bR(n,e,t,r,s){let i=n.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");t||(t=i.type);let a=t.create(r,null,s||i.marks);if(i.isLeaf)return n.replaceWith(e,e+i.nodeSize,a);if(!t.validContent(i.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new ut(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new Y(U.from(a),0,0),1,!0))}function or(n,e,t=1,r){let s=n.resolve(e),i=s.depth-t,a=r&&r[r.length-1]||s.parent;if(i<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!a.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let h=s.depth-1,p=t-2;h>i;h--,p--){let m=s.node(h),y=s.index(h);if(m.type.spec.isolating)return!1;let w=m.content.cutByIndex(y,m.childCount),k=r&&r[p+1];k&&(w=w.replaceChild(0,k.type.create(k.attrs)));let x=r&&r[p]||m;if(!m.canReplace(y+1,m.childCount)||!x.type.validContent(w))return!1}let u=s.indexAfter(i),c=r&&r[0];return s.node(i).canReplaceWith(u,u,c?c.type:s.node(i+1).type)}function ER(n,e,t=1,r){let s=n.doc.resolve(e),i=U.empty,a=U.empty;for(let u=s.depth,c=s.depth-t,h=t-1;u>c;u--,h--){i=U.from(s.node(u).copy(i));let p=r&&r[h];a=U.from(p?p.type.create(p.attrs,a):s.node(u).copy(a))}n.step(new at(e,e,new Y(i.append(a),t,t),!0))}function Qr(n,e){let t=n.resolve(e),r=t.index();return P1(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function CR(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let s=0;s<e.childCount;s++){let i=e.child(s),a=i.type==r?n.type.schema.nodes.text:i.type;if(t=t.matchType(a),!t||!n.type.allowsMarks(i.marks))return!1}return t.validEnd}function P1(n,e){return!!(n&&e&&!n.isLeaf&&CR(n,e))}function nc(n,e,t=-1){let r=n.resolve(e);for(let s=r.depth;;s--){let i,a,u=r.index(s);if(s==r.depth?(i=r.nodeBefore,a=r.nodeAfter):t>0?(i=r.node(s+1),u++,a=r.node(s).maybeChild(u)):(i=r.node(s).maybeChild(u-1),a=r.node(s+1)),i&&!i.isTextblock&&P1(i,a)&&r.node(s).canReplace(u,u+1))return e;if(s==0)break;e=t<0?r.before(s):r.after(s)}}function _R(n,e,t){let r=null,{linebreakReplacement:s}=n.doc.type.schema,i=n.doc.resolve(e-t),a=i.node().type;if(s&&a.inlineContent){let p=a.whitespace=="pre",m=!!a.contentMatch.matchType(s);p&&!m?r=!1:!p&&m&&(r=!0)}let u=n.steps.length;if(r===!1){let p=n.doc.resolve(e+t);I1(n,p.node(),p.before(),u)}a.inlineContent&&ap(n,e+t-1,a,i.node().contentMatchAt(i.index()),r==null);let c=n.mapping.slice(u),h=c.map(e-t);if(n.step(new at(h,c.map(e+t,-1),Y.empty,!0)),r===!0){let p=n.doc.resolve(h);M1(n,p.node(),p.before(),n.steps.length)}return n}function TR(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let s=r.depth-1;s>=0;s--){let i=r.index(s);if(r.node(s).canReplaceWith(i,i,t))return r.before(s+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(let s=r.depth-1;s>=0;s--){let i=r.indexAfter(s);if(r.node(s).canReplaceWith(i,i,t))return r.after(s+1);if(i<r.node(s).childCount)return null}return null}function D1(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let s=t.content;for(let i=0;i<t.openStart;i++)s=s.firstChild.content;for(let i=1;i<=(t.openStart==0&&t.size?2:1);i++)for(let a=r.depth;a>=0;a--){let u=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,c=r.index(a)+(u>0?1:0),h=r.node(a),p=!1;if(i==1)p=h.canReplace(c,c,s);else{let m=h.contentMatchAt(c).findWrapping(s.firstChild.type);p=m&&h.canReplaceWith(c,c,m[0])}if(p)return u==0?r.pos:u<0?r.before(a+1):r.after(a+1)}return null}function rc(n,e,t=e,r=Y.empty){if(e==t&&!r.size)return null;let s=n.resolve(e),i=n.resolve(t);return L1(s,i,r)?new at(e,t,r):new OR(s,i,r).fit()}function L1(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class OR{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=U.empty;for(let s=0;s<=e.depth;s++){let i=e.node(s);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=U.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let h=this.findFittable();h?this.placeNodes(h):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,s=this.close(e<0?this.$to:r.doc.resolve(e));if(!s)return null;let i=this.placed,a=r.depth,u=s.depth;for(;a&&u&&i.childCount==1;)i=i.firstChild.content,a--,u--;let c=new Y(i,a,u);return e>-1?new ut(r.pos,e,this.$to.pos,this.$to.end(),c,t):c.size||r.pos!=this.$to.pos?new at(r.pos,s.pos,c):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,s=this.unplaced.openEnd;r<e;r++){let i=t.firstChild;if(t.childCount>1&&(s=0),i.type.spec.isolating&&s<=r){e=r;break}t=i.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let s,i=null;r?(i=Rh(this.unplaced.content,r-1).firstChild,s=i.content):s=this.unplaced.content;let a=s.firstChild;for(let u=this.depth;u>=0;u--){let{type:c,match:h}=this.frontier[u],p,m=null;if(t==1&&(a?h.matchType(a.type)||(m=h.fillBefore(U.from(a),!1)):i&&c.compatibleContent(i.type)))return{sliceDepth:r,frontierDepth:u,parent:i,inject:m};if(t==2&&a&&(p=h.findWrapping(a.type)))return{sliceDepth:r,frontierDepth:u,parent:i,wrap:p};if(i&&h.matchType(i.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,s=Rh(e,t);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new Y(e,t+1,Math.max(r,s.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,s=Rh(e,t);if(s.childCount<=1&&t>0){let i=e.size-t<=t+s.size;this.unplaced=new Y(Mo(e,t-1,1),t-1,i?t-1:r)}else this.unplaced=new Y(Mo(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:s,wrap:i}){for(;this.depth>t;)this.closeFrontierNode();if(i)for(let x=0;x<i.length;x++)this.openFrontierNode(i[x]);let a=this.unplaced,u=r?r.content:a.content,c=a.openStart-e,h=0,p=[],{match:m,type:y}=this.frontier[t];if(s){for(let x=0;x<s.childCount;x++)p.push(s.child(x));m=m.matchFragment(s)}let w=u.size+e-(a.content.size-a.openEnd);for(;h<u.childCount;){let x=u.child(h),b=m.matchType(x.type);if(!b)break;h++,(h>1||c==0||x.content.size)&&(m=b,p.push(j1(x.mark(y.allowedMarks(x.marks)),h==1?c:0,h==u.childCount?w:-1)))}let k=h==u.childCount;k||(w=-1),this.placed=Io(this.placed,t,U.from(p)),this.frontier[t].match=m,k&&w<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let x=0,b=u;x<w;x++){let C=b.lastChild;this.frontier.push({type:C.type,match:C.contentMatchAt(C.childCount)}),b=C.content}this.unplaced=k?e==0?Y.empty:new Y(Mo(a.content,e-1,1),e-1,w<0?a.openEnd:e-1):new Y(Mo(a.content,e,h),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Nh(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,s=this.$to.after(r);for(;r>1&&s==this.$to.end(--r);)++s;return s}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:s}=this.frontier[t],i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),a=Nh(e,t,s,r,i);if(a){for(let u=t-1;u>=0;u--){let{match:c,type:h}=this.frontier[u],p=Nh(e,u,h,c,!0);if(!p||p.childCount)continue e}return{depth:t,fit:a,move:i?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Io(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let s=e.node(r),i=s.type.contentMatch.fillBefore(s.content,!0,e.index(r));this.openFrontierNode(s.type,s.attrs,i)}return e}openFrontierNode(e,t=null,r){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=Io(this.placed,this.depth,U.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(U.empty,!0);t.childCount&&(this.placed=Io(this.placed,this.frontier.length,t))}}function Mo(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(Mo(n.firstChild.content,e-1,t)))}function Io(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(Io(n.lastChild.content,e-1,t)))}function Rh(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function j1(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,j1(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(U.empty,!0)))),n.copy(r)}function Nh(n,e,t,r,s){let i=n.node(e),a=s?n.indexAfter(e):n.index(e);if(a==i.childCount&&!t.compatibleContent(i.type))return null;let u=r.fillBefore(i.content,!0,a);return u&&!RR(t,i.content,a)?u:null}function RR(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function NR(n){return n.spec.defining||n.spec.definingForContent}function AR(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let s=n.doc.resolve(e),i=n.doc.resolve(t);if(L1(s,i,r))return n.step(new at(e,t,r));let a=B1(s,i);a[a.length-1]==0&&a.pop();let u=-(s.depth+1);a.unshift(u);for(let y=s.depth,w=s.pos-1;y>0;y--,w--){let k=s.node(y).type.spec;if(k.defining||k.definingAsContext||k.isolating)break;a.indexOf(y)>-1?u=y:s.before(y)==w&&a.splice(1,0,-y)}let c=a.indexOf(u),h=[],p=r.openStart;for(let y=r.content,w=0;;w++){let k=y.firstChild;if(h.push(k),w==r.openStart)break;y=k.content}for(let y=p-1;y>=0;y--){let w=h[y],k=NR(w.type);if(k&&!w.sameMarkup(s.node(Math.abs(u)-1)))p=y;else if(k||!w.type.isTextblock)break}for(let y=r.openStart;y>=0;y--){let w=(y+p+1)%(r.openStart+1),k=h[w];if(k)for(let x=0;x<a.length;x++){let b=a[(x+c)%a.length],C=!0;b<0&&(C=!1,b=-b);let A=s.node(b-1),O=s.index(b-1);if(A.canReplaceWith(O,O,k.type,k.marks))return n.replace(s.before(b),C?i.after(b):t,new Y($1(r.content,0,r.openStart,w),w,r.openEnd))}}let m=n.steps.length;for(let y=a.length-1;y>=0&&(n.replace(e,t,r),!(n.steps.length>m));y--){let w=a[y];w<0||(e=s.before(w),t=i.after(w))}}function $1(n,e,t,r,s){if(e<t){let i=n.firstChild;n=n.replaceChild(0,i.copy($1(i.content,e+1,t,r,i)))}if(e>r){let i=s.contentMatchAt(0),a=i.fillBefore(n).append(n);n=a.append(i.matchFragment(a).fillBefore(U.empty,!0))}return n}function MR(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let s=TR(n.doc,e,r.type);s!=null&&(e=t=s)}n.replaceRange(e,t,new Y(U.from(r),0,0))}function IR(n,e,t){let r=n.doc.resolve(e),s=n.doc.resolve(t),i=B1(r,s);for(let a=0;a<i.length;a++){let u=i[a],c=a==i.length-1;if(c&&u==0||r.node(u).type.contentMatch.validEnd)return n.delete(r.start(u),s.end(u));if(u>0&&(c||r.node(u-1).canReplace(r.index(u-1),s.indexAfter(u-1))))return n.delete(r.before(u),s.after(u))}for(let a=1;a<=r.depth&&a<=s.depth;a++)if(e-r.start(a)==r.depth-a&&t>r.end(a)&&s.end(a)-t!=s.depth-a&&r.start(a-1)==s.start(a-1)&&r.node(a-1).canReplace(r.index(a-1),s.index(a-1)))return n.delete(r.before(a),t);n.delete(e,t)}function B1(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let s=r;s>=0;s--){let i=n.start(s);if(i<n.pos-(n.depth-s)||e.end(s)>e.pos+(e.depth-s)||n.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(i==e.start(s)||s==n.depth&&s==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==i-1)&&t.push(s)}return t}class Ni extends Mt{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return Qe.fail("No node at attribute step's position");let r=Object.create(null);for(let i in t.attrs)r[i]=t.attrs[i];r[this.attr]=this.value;let s=t.type.create(r,null,t.marks);return Qe.fromReplace(e,this.pos,this.pos+1,new Y(U.from(s),0,t.isLeaf?0:1))}getMap(){return en.empty}invert(e){return new Ni(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ni(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ni(t.pos,t.attr,t.value)}}Mt.jsonID("attr",Ni);class la extends Mt{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let s in e.attrs)t[s]=e.attrs[s];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return Qe.ok(r)}getMap(){return en.empty}invert(e){return new la(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new la(t.attr,t.value)}}Mt.jsonID("docAttr",la);let Mi=class extends Error{};Mi=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};Mi.prototype=Object.create(Error.prototype);Mi.prototype.constructor=Mi;Mi.prototype.name="TransformError";class z1{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new aa}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Mi(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=Y.empty){let s=rc(this.doc,e,t,r);return s&&this.step(s),this}replaceWith(e,t,r){return this.replace(e,t,new Y(U.from(r),0,0))}delete(e,t){return this.replace(e,t,Y.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return AR(this,e,t,r),this}replaceRangeWith(e,t,r){return MR(this,e,t,r),this}deleteRange(e,t){return IR(this,e,t),this}lift(e,t){return yR(this,e,t),this}join(e,t=1){return _R(this,e,t),this}wrap(e,t){return kR(this,e,t),this}setBlockType(e,t=e,r,s=null){return xR(this,e,t,r,s),this}setNodeMarkup(e,t,r=null,s){return bR(this,e,t,r,s),this}setNodeAttribute(e,t,r){return this.step(new Ni(e,t,r)),this}setDocAttribute(e,t){return this.step(new la(e,t)),this}addNodeMark(e,t){return this.step(new Ur(e,t)),this}removeNodeMark(e,t){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t instanceof Oe)t.isInSet(r.marks)&&this.step(new Ds(e,t));else{let s=r.marks,i,a=[];for(;i=t.isInSet(s);)a.push(new Ds(e,i)),s=i.removeFromSet(s);for(let u=a.length-1;u>=0;u--)this.step(a[u])}return this}split(e,t=1,r){return ER(this,e,t,r),this}addMark(e,t,r){return pR(this,e,t,r),this}removeMark(e,t,r){return mR(this,e,t,r),this}clearIncompatible(e,t,r){return ap(this,e,t,r),this}}const Ah=Object.create(null);class ge{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new PR(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=Y.empty){let r=t.content.lastChild,s=null;for(let u=0;u<t.openEnd;u++)s=r,r=r.lastChild;let i=e.steps.length,a=this.ranges;for(let u=0;u<a.length;u++){let{$from:c,$to:h}=a[u],p=e.mapping.slice(i);e.replaceRange(p.map(c.pos),p.map(h.pos),u?Y.empty:t),u==0&&rv(e,i,(r?r.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,s=this.ranges;for(let i=0;i<s.length;i++){let{$from:a,$to:u}=s[i],c=e.mapping.slice(r),h=c.map(a.pos),p=c.map(u.pos);i?e.deleteRange(h,p):(e.replaceRangeWith(h,p,t),rv(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let s=e.parent.inlineContent?new pe(e):bi(e.node(0),e.parent,e.pos,e.index(),t,r);if(s)return s;for(let i=e.depth-1;i>=0;i--){let a=t<0?bi(e.node(0),e.node(i),e.before(i+1),e.index(i),t,r):bi(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,t,r);if(a)return a}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new tn(e.node(0))}static atStart(e){return bi(e,e,0,0,1)||new tn(e)}static atEnd(e){return bi(e,e,e.content.size,e.childCount,-1)||new tn(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Ah[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Ah)throw new RangeError("Duplicate use of selection JSON ID "+e);return Ah[e]=t,t.prototype.jsonID=e,t}getBookmark(){return pe.between(this.$anchor,this.$head).getBookmark()}}ge.prototype.visible=!0;class PR{constructor(e,t){this.$from=e,this.$to=t}}let tv=!1;function nv(n){!tv&&!n.parent.inlineContent&&(tv=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class pe extends ge{constructor(e,t=e){nv(e),nv(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return ge.near(r);let s=e.resolve(t.map(this.anchor));return new pe(s.parent.inlineContent?s:r,r)}replace(e,t=Y.empty){if(super.replace(e,t),t==Y.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof pe&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new sc(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new pe(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let s=e.resolve(t);return new this(s,r==t?s:e.resolve(r))}static between(e,t,r){let s=e.pos-t.pos;if((!r||s)&&(r=s>=0?1:-1),!t.parent.inlineContent){let i=ge.findFrom(t,r,!0)||ge.findFrom(t,-r,!0);if(i)t=i.$head;else return ge.near(t,r)}return e.parent.inlineContent||(s==0?e=t:(e=(ge.findFrom(e,-r,!0)||ge.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=s<0&&(e=t))),new pe(e,t)}}ge.jsonID("text",pe);class sc{constructor(e,t){this.anchor=e,this.head=t}map(e){return new sc(e.map(this.anchor),e.map(this.head))}resolve(e){return pe.between(e.resolve(this.anchor),e.resolve(this.head))}}class ie extends ge{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:s}=t.mapResult(this.anchor),i=e.resolve(s);return r?ge.near(i):new ie(i)}content(){return new Y(U.from(this.node),0,0)}eq(e){return e instanceof ie&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new up(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ie(e.resolve(t.anchor))}static create(e,t){return new ie(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}ie.prototype.visible=!1;ge.jsonID("node",ie);class up{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new sc(r,r):new up(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&ie.isSelectable(r)?new ie(t):ge.near(t)}}class tn extends ge{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=Y.empty){if(t==Y.empty){e.delete(0,e.doc.content.size);let r=ge.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new tn(e)}map(e){return new tn(e)}eq(e){return e instanceof tn}getBookmark(){return DR}}ge.jsonID("all",tn);const DR={map(){return this},resolve(n){return new tn(n)}};function bi(n,e,t,r,s,i=!1){if(e.inlineContent)return pe.create(n,t);for(let a=r-(s>0?0:1);s>0?a<e.childCount:a>=0;a+=s){let u=e.child(a);if(u.isAtom){if(!i&&ie.isSelectable(u))return ie.create(n,t-(s<0?u.nodeSize:0))}else{let c=bi(n,u,t+s,s<0?u.childCount:0,s,i);if(c)return c}t+=u.nodeSize*s}return null}function rv(n,e,t){let r=n.steps.length-1;if(r<e)return;let s=n.steps[r];if(!(s instanceof at||s instanceof ut))return;let i=n.mapping.maps[r],a;i.forEach((u,c,h,p)=>{a==null&&(a=p)}),n.setSelection(ge.near(n.doc.resolve(a),t))}const sv=1,Hl=2,iv=4;class LR extends z1{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|sv)&~Hl,this.storedMarks=null,this}get selectionSet(){return(this.updated&sv)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Hl,this}ensureMarks(e){return Oe.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Hl)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~Hl,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Oe.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let s=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(s.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),!e)return this.deleteRange(t,r);let i=this.storedMarks;if(!i){let a=this.doc.resolve(t);i=r==t?a.marks():a.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,s.text(e,i)),!this.selection.empty&&this.selection.to==t+e.length&&this.setSelection(ge.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=iv,this}get scrolledIntoView(){return(this.updated&iv)>0}}function ov(n,e){return!e||!n?n:n.bind(e)}class Po{constructor(e,t,r){this.name=e,this.init=ov(t.init,r),this.apply=ov(t.apply,r)}}const jR=[new Po("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new Po("selection",{init(n,e){return n.selection||ge.atStart(e.doc)},apply(n){return n.selection}}),new Po("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new Po("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class Mh{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=jR.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Po(r.key,r.spec.state,r))})}}class Ti{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let s=this.config.plugins[r];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),s=null;for(;;){let i=!1;for(let a=0;a<this.config.plugins.length;a++){let u=this.config.plugins[a];if(u.spec.appendTransaction){let c=s?s[a].n:0,h=s?s[a].state:this,p=c<t.length&&u.spec.appendTransaction.call(u,c?t.slice(c):t,h,r);if(p&&r.filterTransaction(p,a)){if(p.setMeta("appendedTransaction",e),!s){s=[];for(let m=0;m<this.config.plugins.length;m++)s.push(m<a?{state:r,n:t.length}:{state:this,n:0})}t.push(p),r=r.applyInner(p),i=!0}s&&(s[a]={state:r,n:t.length})}}if(!i)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Ti(this.config),r=this.config.fields;for(let s=0;s<r.length;s++){let i=r[s];t[i.name]=i.apply(e,this[i.name],this,t)}return t}get tr(){return new LR(this)}static create(e){let t=new Mh(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Ti(t);for(let s=0;s<t.fields.length;s++)r[t.fields[s].name]=t.fields[s].init(e,r);return r}reconfigure(e){let t=new Mh(this.schema,e.plugins),r=t.fields,s=new Ti(t);for(let i=0;i<r.length;i++){let a=r[i].name;s[a]=this.hasOwnProperty(a)?this[a]:r[i].init(e,s)}return s}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[r],i=s.spec.state;i&&i.toJSON&&(t[r]=i.toJSON.call(s,this[s.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new Mh(e.schema,e.plugins),i=new Ti(s);return s.fields.forEach(a=>{if(a.name=="doc")i.doc=Vr.fromJSON(e.schema,t.doc);else if(a.name=="selection")i.selection=ge.fromJSON(i.doc,t.selection);else if(a.name=="storedMarks")t.storedMarks&&(i.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let u in r){let c=r[u],h=c.spec.state;if(c.key==a.name&&h&&h.fromJSON&&Object.prototype.hasOwnProperty.call(t,u)){i[a.name]=h.fromJSON.call(c,e,t[u],i);return}}i[a.name]=a.init(e,i)}}),i}}function U1(n,e,t){for(let r in n){let s=n[r];s instanceof Function?s=s.bind(e):r=="handleDOMEvents"&&(s=U1(s,e,{})),t[r]=s}return t}class bt{constructor(e){this.spec=e,this.props={},e.props&&U1(e.props,this,this.props),this.key=e.key?e.key.key:F1("plugin")}getState(e){return e[this.key]}}const Ih=Object.create(null);function F1(n){return n in Ih?n+"$"+ ++Ih[n]:(Ih[n]=0,n+"$")}class nn{constructor(e="key"){this.key=F1(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const xt=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},Ii=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let Sf=null;const rr=function(n,e,t){let r=Sf||(Sf=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},$R=function(){Sf=null},Ls=function(n,e,t,r){return t&&(av(n,e,t,r,-1)||av(n,e,t,r,1))},BR=/^(img|br|input|textarea|hr)$/i;function av(n,e,t,r,s){for(var i;;){if(n==t&&e==r)return!0;if(e==(s<0?0:fn(n))){let a=n.parentNode;if(!a||a.nodeType!=1||Sa(n)||BR.test(n.nodeName)||n.contentEditable=="false")return!1;e=xt(n)+(s<0?0:1),n=a}else if(n.nodeType==1){let a=n.childNodes[e+(s<0?-1:0)];if(a.nodeType==1&&a.contentEditable=="false")if(!((i=a.pmViewDesc)===null||i===void 0)&&i.ignoreForSelection)e+=s;else return!1;else n=a,e=s<0?fn(n):0}else return!1}}function fn(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function zR(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=fn(n)}else if(n.parentNode&&!Sa(n))e=xt(n),n=n.parentNode;else return null}}function UR(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!Sa(n))e=xt(n)+1,n=n.parentNode;else return null}}function FR(n,e,t){for(let r=e==0,s=e==fn(n);r||s;){if(n==t)return!0;let i=xt(n);if(n=n.parentNode,!n)return!1;r=r&&i==0,s=s&&i==fn(n)}}function Sa(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const ic=function(n){return n.focusNode&&Ls(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function ks(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function HR(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function VR(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min(fn(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min(fn(r.startContainer),r.startOffset)}}}const zn=typeof navigator<"u"?navigator:null,lv=typeof document<"u"?document:null,Xr=zn&&zn.userAgent||"",bf=/Edge\/(\d+)/.exec(Xr),H1=/MSIE \d/.exec(Xr),Ef=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Xr),Vt=!!(H1||Ef||bf),Kr=H1?document.documentMode:Ef?+Ef[1]:bf?+bf[1]:0,mn=!Vt&&/gecko\/(\d+)/i.test(Xr);mn&&+(/Firefox\/(\d+)/.exec(Xr)||[0,0])[1];const Cf=!Vt&&/Chrome\/(\d+)/.exec(Xr),lt=!!Cf,V1=Cf?+Cf[1]:0,Nt=!Vt&&!!zn&&/Apple Computer/.test(zn.vendor),Pi=Nt&&(/Mobile\/\w+/.test(Xr)||!!zn&&zn.maxTouchPoints>2),hn=Pi||(zn?/Mac/.test(zn.platform):!1),W1=zn?/Win/.test(zn.platform):!1,sr=/Android \d/.test(Xr),ba=!!lv&&"webkitFontSmoothing"in lv.documentElement.style,WR=ba?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function KR(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Qn(n,e){return typeof n=="number"?n:n[e]}function qR(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function uv(n,e,t){let r=n.someProp("scrollThreshold")||0,s=n.someProp("scrollMargin")||5,i=n.dom.ownerDocument;for(let a=t||n.dom;a;){if(a.nodeType!=1){a=Ii(a);continue}let u=a,c=u==i.body,h=c?KR(i):qR(u),p=0,m=0;if(e.top<h.top+Qn(r,"top")?m=-(h.top-e.top+Qn(s,"top")):e.bottom>h.bottom-Qn(r,"bottom")&&(m=e.bottom-e.top>h.bottom-h.top?e.top+Qn(s,"top")-h.top:e.bottom-h.bottom+Qn(s,"bottom")),e.left<h.left+Qn(r,"left")?p=-(h.left-e.left+Qn(s,"left")):e.right>h.right-Qn(r,"right")&&(p=e.right-h.right+Qn(s,"right")),p||m)if(c)i.defaultView.scrollBy(p,m);else{let w=u.scrollLeft,k=u.scrollTop;m&&(u.scrollTop+=m),p&&(u.scrollLeft+=p);let x=u.scrollLeft-w,b=u.scrollTop-k;e={left:e.left-x,top:e.top-b,right:e.right-x,bottom:e.bottom-b}}let y=c?"fixed":getComputedStyle(a).position;if(/^(fixed|sticky)$/.test(y))break;a=y=="absolute"?a.offsetParent:Ii(a)}}function GR(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,s;for(let i=(e.left+e.right)/2,a=t+1;a<Math.min(innerHeight,e.bottom);a+=5){let u=n.root.elementFromPoint(i,a);if(!u||u==n.dom||!n.dom.contains(u))continue;let c=u.getBoundingClientRect();if(c.top>=t-20){r=u,s=c.top;break}}return{refDOM:r,refTop:s,stack:K1(n.dom)}}function K1(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=Ii(r));return e}function JR({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;q1(t,r==0?0:r-e)}function q1(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:s,left:i}=n[t];r.scrollTop!=s+e&&(r.scrollTop=s+e),r.scrollLeft!=i&&(r.scrollLeft=i)}}let vi=null;function YR(n){if(n.setActive)return n.setActive();if(vi)return n.focus(vi);let e=K1(n);n.focus(vi==null?{get preventScroll(){return vi={preventScroll:!0},!0}}:void 0),vi||(vi=!1,q1(e,0))}function G1(n,e){let t,r=2e8,s,i=0,a=e.top,u=e.top,c,h;for(let p=n.firstChild,m=0;p;p=p.nextSibling,m++){let y;if(p.nodeType==1)y=p.getClientRects();else if(p.nodeType==3)y=rr(p).getClientRects();else continue;for(let w=0;w<y.length;w++){let k=y[w];if(k.top<=a&&k.bottom>=u){a=Math.max(k.bottom,a),u=Math.min(k.top,u);let x=k.left>e.left?k.left-e.left:k.right<e.left?e.left-k.right:0;if(x<r){t=p,r=x,s=x&&t.nodeType==3?{left:k.right<e.left?k.right:k.left,top:e.top}:e,p.nodeType==1&&x&&(i=m+(e.left>=(k.left+k.right)/2?1:0));continue}}else k.top>e.top&&!c&&k.left<=e.left&&k.right>=e.left&&(c=p,h={left:Math.max(k.left,Math.min(k.right,e.left)),top:k.top});!t&&(e.left>=k.right&&e.top>=k.top||e.left>=k.left&&e.top>=k.bottom)&&(i=m+1)}}return!t&&c&&(t=c,s=h,r=0),t&&t.nodeType==3?QR(t,s):!t||r&&t.nodeType==1?{node:n,offset:i}:G1(t,s)}function QR(n,e){let t=n.nodeValue.length,r=document.createRange(),s;for(let i=0;i<t;i++){r.setEnd(n,i+1),r.setStart(n,i);let a=Ar(r,1);if(a.top!=a.bottom&&cp(e,a)){s={node:n,offset:i+(e.left>=(a.left+a.right)/2?1:0)};break}}return r.detach(),s||{node:n,offset:0}}function cp(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function XR(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function ZR(n,e,t){let{node:r,offset:s}=G1(e,t),i=-1;if(r.nodeType==1&&!r.firstChild){let a=r.getBoundingClientRect();i=a.left!=a.right&&t.left>(a.left+a.right)/2?1:-1}return n.docView.posFromDOM(r,s,i)}function eN(n,e,t,r){let s=-1;for(let i=e,a=!1;i!=n.dom;){let u=n.docView.nearestDesc(i,!0),c;if(!u)return null;if(u.dom.nodeType==1&&(u.node.isBlock&&u.parent||!u.contentDOM)&&((c=u.dom.getBoundingClientRect()).width||c.height)&&(u.node.isBlock&&u.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(u.dom.nodeName)&&(!a&&c.left>r.left||c.top>r.top?s=u.posBefore:(!a&&c.right<r.left||c.bottom<r.top)&&(s=u.posAfter),a=!0),!u.contentDOM&&s<0&&!u.node.isText))return(u.node.isBlock?r.top<(c.top+c.bottom)/2:r.left<(c.left+c.right)/2)?u.posBefore:u.posAfter;i=u.dom.parentNode}return s>-1?s:n.docView.posFromDOM(e,t,-1)}function J1(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let s=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),i=s;;){let a=n.childNodes[i];if(a.nodeType==1){let u=a.getClientRects();for(let c=0;c<u.length;c++){let h=u[c];if(cp(e,h))return J1(a,e,h)}}if((i=(i+1)%r)==s)break}return n}function tN(n,e){let t=n.dom.ownerDocument,r,s=0,i=VR(t,e.left,e.top);i&&({node:r,offset:s}=i);let a=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),u;if(!a||!n.dom.contains(a.nodeType!=1?a.parentNode:a)){let h=n.dom.getBoundingClientRect();if(!cp(e,h)||(a=J1(n.dom,e,h),!a))return null}if(Nt)for(let h=a;r&&h;h=Ii(h))h.draggable&&(r=void 0);if(a=XR(a,e),r){if(mn&&r.nodeType==1&&(s=Math.min(s,r.childNodes.length),s<r.childNodes.length)){let p=r.childNodes[s],m;p.nodeName=="IMG"&&(m=p.getBoundingClientRect()).right<=e.left&&m.bottom>e.top&&s++}let h;ba&&s&&r.nodeType==1&&(h=r.childNodes[s-1]).nodeType==1&&h.contentEditable=="false"&&h.getBoundingClientRect().top>=e.top&&s--,r==n.dom&&s==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?u=n.state.doc.content.size:(s==0||r.nodeType!=1||r.childNodes[s-1].nodeName!="BR")&&(u=eN(n,r,s,e))}u==null&&(u=ZR(n,a,e));let c=n.docView.nearestDesc(a,!0);return{pos:u,inside:c?c.posAtStart-c.border:-1}}function cv(n){return n.top<n.bottom||n.left<n.right}function Ar(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(cv(r))return r}return Array.prototype.find.call(t,cv)||n.getBoundingClientRect()}const nN=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Y1(n,e,t){let{node:r,offset:s,atom:i}=n.docView.domFromPos(e,t<0?-1:1),a=ba||mn;if(r.nodeType==3)if(a&&(nN.test(r.nodeValue)||(t<0?!s:s==r.nodeValue.length))){let c=Ar(rr(r,s,s),t);if(mn&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){let h=Ar(rr(r,s-1,s-1),-1);if(h.top==c.top){let p=Ar(rr(r,s,s+1),-1);if(p.top!=c.top)return Ro(p,p.left<h.left)}}return c}else{let c=s,h=s,p=t<0?1:-1;return t<0&&!s?(h++,p=-1):t>=0&&s==r.nodeValue.length?(c--,p=1):t<0?c--:h++,Ro(Ar(rr(r,c,h),p),p<0)}if(!n.state.doc.resolve(e-(i||0)).parent.inlineContent){if(i==null&&s&&(t<0||s==fn(r))){let c=r.childNodes[s-1];if(c.nodeType==1)return Ph(c.getBoundingClientRect(),!1)}if(i==null&&s<fn(r)){let c=r.childNodes[s];if(c.nodeType==1)return Ph(c.getBoundingClientRect(),!0)}return Ph(r.getBoundingClientRect(),t>=0)}if(i==null&&s&&(t<0||s==fn(r))){let c=r.childNodes[s-1],h=c.nodeType==3?rr(c,fn(c)-(a?0:1)):c.nodeType==1&&(c.nodeName!="BR"||!c.nextSibling)?c:null;if(h)return Ro(Ar(h,1),!1)}if(i==null&&s<fn(r)){let c=r.childNodes[s];for(;c.pmViewDesc&&c.pmViewDesc.ignoreForCoords;)c=c.nextSibling;let h=c?c.nodeType==3?rr(c,0,a?0:1):c.nodeType==1?c:null:null;if(h)return Ro(Ar(h,-1),!0)}return Ro(Ar(r.nodeType==3?rr(r):r,-t),t>=0)}function Ro(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function Ph(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function Q1(n,e,t){let r=n.state,s=n.root.activeElement;r!=e&&n.updateState(e),s!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),s!=n.dom&&s&&s.focus()}}function rN(n,e,t){let r=e.selection,s=t=="up"?r.$from:r.$to;return Q1(n,e,()=>{let{node:i}=n.docView.domFromPos(s.pos,t=="up"?-1:1);for(;;){let u=n.docView.nearestDesc(i,!0);if(!u)break;if(u.node.isBlock){i=u.contentDOM||u.dom;break}i=u.dom.parentNode}let a=Y1(n,s.pos,1);for(let u=i.firstChild;u;u=u.nextSibling){let c;if(u.nodeType==1)c=u.getClientRects();else if(u.nodeType==3)c=rr(u,0,u.nodeValue.length).getClientRects();else continue;for(let h=0;h<c.length;h++){let p=c[h];if(p.bottom>p.top+1&&(t=="up"?a.top-p.top>(p.bottom-a.top)*2:p.bottom-a.bottom>(a.bottom-p.top)*2))return!1}}return!0})}const sN=/[\u0590-\u08ac]/;function iN(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let s=r.parentOffset,i=!s,a=s==r.parent.content.size,u=n.domSelection();return u?!sN.test(r.parent.textContent)||!u.modify?t=="left"||t=="backward"?i:a:Q1(n,e,()=>{let{focusNode:c,focusOffset:h,anchorNode:p,anchorOffset:m}=n.domSelectionRange(),y=u.caretBidiLevel;u.modify("move",t,"character");let w=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:k,focusOffset:x}=n.domSelectionRange(),b=k&&!w.contains(k.nodeType==1?k:k.parentNode)||c==k&&h==x;try{u.collapse(p,m),c&&(c!=p||h!=m)&&u.extend&&u.extend(c,h)}catch{}return y!=null&&(u.caretBidiLevel=y),b}):r.pos==r.start()||r.pos==r.end()}let dv=null,hv=null,fv=!1;function oN(n,e,t){return dv==e&&hv==t?fv:(dv=e,hv=t,fv=t=="up"||t=="down"?rN(n,e,t):iN(n,e,t))}const gn=0,pv=1,Es=2,Un=3;class Ea{constructor(e,t,r,s){this.parent=e,this.children=t,this.dom=r,this.contentDOM=s,this.dirty=gn,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let s=this.children[t];if(s==e)return r;r+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let i,a;if(e==this.contentDOM)i=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.previousSibling}for(;i&&!((a=i.pmViewDesc)&&a.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(a)+a.size:this.posAtStart}else{let i,a;if(e==this.contentDOM)i=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&!((a=i.pmViewDesc)&&a.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(a):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=t>xt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let i=e;;i=i.parentNode){if(i==this.dom){s=!1;break}if(i.previousSibling)break}if(s==null&&t==e.childNodes.length)for(let i=e;;i=i.parentNode){if(i==this.dom){s=!0;break}if(i.nextSibling)break}}return s??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,s=e;s;s=s.parentNode){let i=this.getDesc(s),a;if(i&&(!t||i.node))if(r&&(a=i.nodeDOM)&&!(a.nodeType==1?a.contains(e.nodeType==1?e:e.parentNode):a==e))r=!1;else return i}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let s=e;s;s=s.parentNode){let i=this.getDesc(s);if(i)return i.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let s=this.children[t],i=r+s.size;if(r==e&&i!=r){for(;!s.border&&s.children.length;)for(let a=0;a<s.children.length;a++){let u=s.children[a];if(u.size){s=u;break}}return s}if(e<i)return s.descAt(e-r-s.border);r=i}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,s=0;for(let i=0;r<this.children.length;r++){let a=this.children[r],u=i+a.size;if(u>e||a instanceof Z1){s=e-i;break}i=u}if(s)return this.children[r].domFromPos(s-this.children[r].border,t);for(let i;r&&!(i=this.children[r-1]).size&&i instanceof X1&&i.side>=0;r--);if(t<=0){let i,a=!0;for(;i=r?this.children[r-1]:null,!(!i||i.dom.parentNode==this.contentDOM);r--,a=!1);return i&&t&&a&&!i.border&&!i.domAtom?i.domFromPos(i.size,t):{node:this.contentDOM,offset:i?xt(i.dom)+1:0}}else{let i,a=!0;for(;i=r<this.children.length?this.children[r]:null,!(!i||i.dom.parentNode==this.contentDOM);r++,a=!1);return i&&a&&!i.border&&!i.domAtom?i.domFromPos(0,t):{node:this.contentDOM,offset:i?xt(i.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,i=-1;for(let a=r,u=0;;u++){let c=this.children[u],h=a+c.size;if(s==-1&&e<=h){let p=a+c.border;if(e>=p&&t<=h-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(e,t,p);e=a;for(let m=u;m>0;m--){let y=this.children[m-1];if(y.size&&y.dom.parentNode==this.contentDOM&&!y.emptyChildAt(1)){s=xt(y.dom)+1;break}e-=y.size}s==-1&&(s=0)}if(s>-1&&(h>t||u==this.children.length-1)){t=h;for(let p=u+1;p<this.children.length;p++){let m=this.children[p];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(-1)){i=xt(m.dom);break}t+=m.size}i==-1&&(i=this.contentDOM.childNodes.length);break}a=h}return{node:this.contentDOM,from:e,to:t,fromOffset:s,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,s=!1){let i=Math.min(e,t),a=Math.max(e,t);for(let w=0,k=0;w<this.children.length;w++){let x=this.children[w],b=k+x.size;if(i>k&&a<b)return x.setSelection(e-k-x.border,t-k-x.border,r,s);k=b}let u=this.domFromPos(e,e?-1:1),c=t==e?u:this.domFromPos(t,t?-1:1),h=r.root.getSelection(),p=r.domSelectionRange(),m=!1;if((mn||Nt)&&e==t){let{node:w,offset:k}=u;if(w.nodeType==3){if(m=!!(k&&w.nodeValue[k-1]==`
`),m&&k==w.nodeValue.length)for(let x=w,b;x;x=x.parentNode){if(b=x.nextSibling){b.nodeName=="BR"&&(u=c={node:b.parentNode,offset:xt(b)+1});break}let C=x.pmViewDesc;if(C&&C.node&&C.node.isBlock)break}}else{let x=w.childNodes[k-1];m=x&&(x.nodeName=="BR"||x.contentEditable=="false")}}if(mn&&p.focusNode&&p.focusNode!=c.node&&p.focusNode.nodeType==1){let w=p.focusNode.childNodes[p.focusOffset];w&&w.contentEditable=="false"&&(s=!0)}if(!(s||m&&Nt)&&Ls(u.node,u.offset,p.anchorNode,p.anchorOffset)&&Ls(c.node,c.offset,p.focusNode,p.focusOffset))return;let y=!1;if((h.extend||e==t)&&!(m&&mn)){h.collapse(u.node,u.offset);try{e!=t&&h.extend(c.node,c.offset),y=!0}catch{}}if(!y){if(e>t){let k=u;u=c,c=k}let w=document.createRange();w.setEnd(c.node,c.offset),w.setStart(u.node,u.offset),h.removeAllRanges(),h.addRange(w)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,s=0;s<this.children.length;s++){let i=this.children[s],a=r+i.size;if(r==a?e<=a&&t>=r:e<a&&t>r){let u=r+i.border,c=a-i.border;if(e>=u&&t<=c){this.dirty=e==r||t==a?Es:pv,e==u&&t==c&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=Un:i.markDirty(e-u,t-u);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?Es:Un}r=a}this.dirty=Es}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?Es:pv;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class X1 extends Ea{constructor(e,t,r,s){let i,a=t.type.toDOM;if(typeof a=="function"&&(a=a(r,()=>{if(!i)return s;if(i.parent)return i.parent.posBeforeChild(i)})),!t.type.spec.raw){if(a.nodeType!=1){let u=document.createElement("span");u.appendChild(a),a=u}a.contentEditable="false",a.classList.add("ProseMirror-widget")}super(e,[],a,null),this.widget=t,this.widget=t,i=this}matchesWidget(e){return this.dirty==gn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class aN extends Ea{constructor(e,t,r,s){super(e,[],t,null),this.textDOM=r,this.text=s}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class js extends Ea{constructor(e,t,r,s,i){super(e,[],r,s),this.mark=t,this.spec=i}static create(e,t,r,s){let i=s.nodeViews[t.type.name],a=i&&i(t,s,r);return(!a||!a.dom)&&(a=Bs.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new js(e,t,a.dom,a.contentDOM||a.dom,a)}parseRule(){return this.dirty&Un||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Un&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=gn){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=gn}}slice(e,t,r){let s=js.create(this.parent,this.mark,!0,r),i=this.children,a=this.size;t<a&&(i=Tf(i,t,a,r)),e>0&&(i=Tf(i,0,e,r));for(let u=0;u<i.length;u++)i[u].parent=s;return s.children=i,s}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class qr extends Ea{constructor(e,t,r,s,i,a,u,c,h){super(e,[],i,a),this.node=t,this.outerDeco=r,this.innerDeco=s,this.nodeDOM=u}static create(e,t,r,s,i,a){let u=i.nodeViews[t.type.name],c,h=u&&u(t,i,()=>{if(!c)return a;if(c.parent)return c.parent.posBeforeChild(c)},r,s),p=h&&h.dom,m=h&&h.contentDOM;if(t.isText){if(!p)p=document.createTextNode(t.text);else if(p.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else p||({dom:p,contentDOM:m}=Bs.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!m&&!t.isText&&p.nodeName!="BR"&&(p.hasAttribute("contenteditable")||(p.contentEditable="false"),t.type.spec.draggable&&(p.draggable=!0));let y=p;return p=nk(p,r,t),h?c=new lN(e,t,r,s,p,m||null,y,h,i,a+1):t.isText?new oc(e,t,r,s,p,y,i):new qr(e,t,r,s,p,m||null,y,i,a+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>U.empty)}return e}matchesNode(e,t,r){return this.dirty==gn&&e.eq(this.node)&&mu(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,s=t,i=e.composing?this.localCompositionInfo(e,t):null,a=i&&i.pos>-1?i:null,u=i&&i.pos<0,c=new cN(this,a&&a.node,e);fN(this.node,this.innerDeco,(h,p,m)=>{h.spec.marks?c.syncToMarks(h.spec.marks,r,e):h.type.side>=0&&!m&&c.syncToMarks(p==this.node.childCount?Oe.none:this.node.child(p).marks,r,e),c.placeWidget(h,e,s)},(h,p,m,y)=>{c.syncToMarks(h.marks,r,e);let w;c.findNodeMatch(h,p,m,y)||u&&e.state.selection.from>s&&e.state.selection.to<s+h.nodeSize&&(w=c.findIndexWithChild(i.node))>-1&&c.updateNodeAt(h,p,m,w,e)||c.updateNextNode(h,p,m,e,y,s)||c.addNode(h,p,m,e,s),s+=h.nodeSize}),c.syncToMarks([],r,e),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||this.dirty==Es)&&(a&&this.protectLocalComposition(e,a),ek(this.contentDOM,this.children,e),Pi&&pN(this.dom))}localCompositionInfo(e,t){let{from:r,to:s}=e.state.selection;if(!(e.state.selection instanceof pe)||r<t||s>t+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let a=i.nodeValue,u=mN(this.node.content,a,r-t,s-t);return u<0?null:{node:i,pos:u,text:a}}else return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:s}){if(this.getDesc(t))return;let i=t;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let a=new aN(this,i,t,s);e.input.compositionNodes.push(a),this.children=Tf(this.children,r,r+s.length,e,a)}update(e,t,r,s){return this.dirty==Un||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,s),!0)}updateInner(e,t,r,s){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=gn}updateOuterDeco(e){if(mu(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=tk(this.dom,this.nodeDOM,_f(this.outerDeco,this.node,t),_f(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function mv(n,e,t,r,s){nk(r,e,n);let i=new qr(void 0,n,e,t,r,r,r,s,0);return i.contentDOM&&i.updateChildren(s,0),i}class oc extends qr{constructor(e,t,r,s,i,a,u){super(e,t,r,s,i,null,a,u,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,s){return this.dirty==Un||this.dirty!=gn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=gn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=gn,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let s=this.node.cut(e,t),i=document.createTextNode(s.text);return new oc(this.parent,s,this.outerDeco,this.innerDeco,i,i,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=Un)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Z1 extends Ea{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==gn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class lN extends qr{constructor(e,t,r,s,i,a,u,c,h,p){super(e,t,r,s,i,a,u,h,p),this.spec=c}update(e,t,r,s){if(this.dirty==Un)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,t,r);return i&&this.updateInner(e,t,r,s),i}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,s){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function ek(n,e,t){let r=n.firstChild,s=!1;for(let i=0;i<e.length;i++){let a=e[i],u=a.dom;if(u.parentNode==n){for(;u!=r;)r=gv(r),s=!0;r=r.nextSibling}else s=!0,n.insertBefore(u,r);if(a instanceof js){let c=r?r.previousSibling:n.lastChild;ek(a.contentDOM,a.children,t),r=c?c.nextSibling:n.firstChild}}for(;r;)r=gv(r),s=!0;s&&t.trackWrites==n&&(t.trackWrites=null)}const Uo=function(n){n&&(this.nodeName=n)};Uo.prototype=Object.create(null);const Cs=[new Uo];function _f(n,e,t){if(n.length==0)return Cs;let r=t?Cs[0]:new Uo,s=[r];for(let i=0;i<n.length;i++){let a=n[i].type.attrs;if(a){a.nodeName&&s.push(r=new Uo(a.nodeName));for(let u in a){let c=a[u];c!=null&&(t&&s.length==1&&s.push(r=new Uo(e.isInline?"span":"div")),u=="class"?r.class=(r.class?r.class+" ":"")+c:u=="style"?r.style=(r.style?r.style+";":"")+c:u!="nodeName"&&(r[u]=c))}}}return s}function tk(n,e,t,r){if(t==Cs&&r==Cs)return e;let s=e;for(let i=0;i<r.length;i++){let a=r[i],u=t[i];if(i){let c;u&&u.nodeName==a.nodeName&&s!=n&&(c=s.parentNode)&&c.nodeName.toLowerCase()==a.nodeName||(c=document.createElement(a.nodeName),c.pmIsDeco=!0,c.appendChild(s),u=Cs[0]),s=c}uN(s,u||Cs[0],a)}return s}function uN(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],s=t.class?t.class.split(" ").filter(Boolean):[];for(let i=0;i<r.length;i++)s.indexOf(r[i])==-1&&n.classList.remove(r[i]);for(let i=0;i<s.length;i++)r.indexOf(s[i])==-1&&n.classList.add(s[i]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=r.exec(e.style);)n.style.removeProperty(s[1])}t.style&&(n.style.cssText+=t.style)}}function nk(n,e,t){return tk(n,n,Cs,_f(e,t,n.nodeType!=1))}function mu(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function gv(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class cN{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=dN(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let s=0,i=this.stack.length>>1,a=Math.min(i,e.length);for(;s<a&&(s==i-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<i;)this.destroyRest(),this.top.dirty=gn,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let u=-1;for(let c=this.index;c<Math.min(this.index+3,this.top.children.length);c++){let h=this.top.children[c];if(h.matchesMark(e[i])&&!this.isLocked(h.dom)){u=c;break}}if(u>-1)u>this.index&&(this.changed=!0,this.destroyBetween(this.index,u)),this.top=this.top.children[this.index];else{let c=js.create(this.top,e[i],t,r);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,i++}}findNodeMatch(e,t,r,s){let i=-1,a;if(s>=this.preMatch.index&&(a=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&a.matchesNode(e,t,r))i=this.top.children.indexOf(a,this.index);else for(let u=this.index,c=Math.min(this.top.children.length,u+5);u<c;u++){let h=this.top.children[u];if(h.matchesNode(e,t,r)&&!this.preMatch.matched.has(h)){i=u;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,t,r,s,i){let a=this.top.children[s];return a.dirty==Un&&a.dom==a.contentDOM&&(a.dirty=Es),a.update(e,t,r,i)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==r)return s}return-1}e=t}}updateNextNode(e,t,r,s,i,a){for(let u=this.index;u<this.top.children.length;u++){let c=this.top.children[u];if(c instanceof qr){let h=this.preMatch.matched.get(c);if(h!=null&&h!=i)return!1;let p=c.dom,m,y=this.isLocked(p)&&!(e.isText&&c.node&&c.node.isText&&c.nodeDOM.nodeValue==e.text&&c.dirty!=Un&&mu(t,c.outerDeco));if(!y&&c.update(e,t,r,s))return this.destroyBetween(this.index,u),c.dom!=p&&(this.changed=!0),this.index++,!0;if(!y&&(m=this.recreateWrapper(c,e,t,r,s,a)))return this.destroyBetween(this.index,u),this.top.children[this.index]=m,m.contentDOM&&(m.dirty=Es,m.updateChildren(s,a+1),m.dirty=gn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,s,i,a){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!mu(r,e.outerDeco)||!s.eq(e.innerDeco))return null;let u=qr.create(this.top,t,r,s,i,a);if(u.contentDOM){u.children=e.children,e.children=[];for(let c of u.children)c.parent=u}return e.destroy(),u}addNode(e,t,r,s,i){let a=qr.create(this.top,e,t,r,s,i);a.contentDOM&&a.updateChildren(s,i+1),this.top.children.splice(this.index++,0,a),this.changed=!0}placeWidget(e,t,r){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let i=new X1(this.top,e,t,r);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof js;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof oc)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Nt||lt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let s=new Z1(this.top,[],r,null);t!=this.top?t.children.push(s):t.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function dN(n,e){let t=e,r=t.children.length,s=n.childCount,i=new Map,a=[];e:for(;s>0;){let u;for(;;)if(r){let h=t.children[r-1];if(h instanceof js)t=h,r=h.children.length;else{u=h,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let c=u.node;if(c){if(c!=n.child(s-1))break;--s,i.set(u,s),a.push(u)}}return{index:s,matched:i,matches:a.reverse()}}function hN(n,e){return n.type.side-e.type.side}function fN(n,e,t,r){let s=e.locals(n),i=0;if(s.length==0){for(let h=0;h<n.childCount;h++){let p=n.child(h);r(p,s,e.forChild(i,p),h),i+=p.nodeSize}return}let a=0,u=[],c=null;for(let h=0;;){let p,m;for(;a<s.length&&s[a].to==i;){let b=s[a++];b.widget&&(p?(m||(m=[p])).push(b):p=b)}if(p)if(m){m.sort(hN);for(let b=0;b<m.length;b++)t(m[b],h,!!c)}else t(p,h,!!c);let y,w;if(c)w=-1,y=c,c=null;else if(h<n.childCount)w=h,y=n.child(h++);else break;for(let b=0;b<u.length;b++)u[b].to<=i&&u.splice(b--,1);for(;a<s.length&&s[a].from<=i&&s[a].to>i;)u.push(s[a++]);let k=i+y.nodeSize;if(y.isText){let b=k;a<s.length&&s[a].from<b&&(b=s[a].from);for(let C=0;C<u.length;C++)u[C].to<b&&(b=u[C].to);b<k&&(c=y.cut(b-i),y=y.cut(0,b-i),k=b,w=-1)}else for(;a<s.length&&s[a].to<k;)a++;let x=y.isInline&&!y.isLeaf?u.filter(b=>!b.inline):u.slice();r(y,x,e.forChild(i,y),w),i=k}}function pN(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function mN(n,e,t,r){for(let s=0,i=0;s<n.childCount&&i<=r;){let a=n.child(s++),u=i;if(i+=a.nodeSize,!a.isText)continue;let c=a.text;for(;s<n.childCount;){let h=n.child(s++);if(i+=h.nodeSize,!h.isText)break;c+=h.text}if(i>=t){if(i>=r&&c.slice(r-e.length-u,r-u)==e)return r-e.length;let h=u<r?c.lastIndexOf(e,r-u-1):-1;if(h>=0&&h+e.length+u>=t)return u+h;if(t==r&&c.length>=r+e.length-u&&c.slice(r-u,r-u+e.length)==e)return r}}return-1}function Tf(n,e,t,r,s){let i=[];for(let a=0,u=0;a<n.length;a++){let c=n[a],h=u,p=u+=c.size;h>=t||p<=e?i.push(c):(h<e&&i.push(c.slice(0,e-h,r)),s&&(i.push(s),s=void 0),p>t&&i.push(c.slice(t-h,c.size,r)))}return i}function dp(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let s=n.docView.nearestDesc(t.focusNode),i=s&&s.size==0,a=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(a<0)return null;let u=r.resolve(a),c,h;if(ic(t)){for(c=a;s&&!s.node;)s=s.parent;let m=s.node;if(s&&m.isAtom&&ie.isSelectable(m)&&s.parent&&!(m.isInline&&FR(t.focusNode,t.focusOffset,s.dom))){let y=s.posBefore;h=new ie(a==y?u:r.resolve(y))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let m=a,y=a;for(let w=0;w<t.rangeCount;w++){let k=t.getRangeAt(w);m=Math.min(m,n.docView.posFromDOM(k.startContainer,k.startOffset,1)),y=Math.max(y,n.docView.posFromDOM(k.endContainer,k.endOffset,-1))}if(m<0)return null;[c,a]=y==n.state.selection.anchor?[y,m]:[m,y],u=r.resolve(a)}else c=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(c<0)return null}let p=r.resolve(c);if(!h){let m=e=="pointer"||n.state.selection.head<u.pos&&!i?1:-1;h=hp(n,p,u,m)}return h}function rk(n){return n.editable?n.hasFocus():ik(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function ar(n,e=!1){let t=n.state.selection;if(sk(n,t),!!rk(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&lt){let r=n.domSelectionRange(),s=n.domObserver.currentSelection;if(r.anchorNode&&s.anchorNode&&Ls(r.anchorNode,r.anchorOffset,s.anchorNode,s.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)yN(n);else{let{anchor:r,head:s}=t,i,a;yv&&!(t instanceof pe)&&(t.$from.parent.inlineContent||(i=vv(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(a=vv(n,t.to))),n.docView.setSelection(r,s,n,e),yv&&(i&&wv(i),a&&wv(a)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&gN(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const yv=Nt||lt&&V1<63;function vv(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),s=r<t.childNodes.length?t.childNodes[r]:null,i=r?t.childNodes[r-1]:null;if(Nt&&s&&s.contentEditable=="false")return Dh(s);if((!s||s.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(s)return Dh(s);if(i)return Dh(i)}}function Dh(n){return n.contentEditable="true",Nt&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function wv(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function gN(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,s=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=s)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!rk(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function yN(n){let e=n.domSelection();if(!e)return;let t=n.cursorWrapper.dom,r=t.nodeName=="IMG";r?e.collapse(t.parentNode,xt(t)+1):e.collapse(t,0),!r&&!n.state.selection.visible&&Vt&&Kr<=11&&(t.disabled=!0,t.disabled=!1)}function sk(n,e){if(e instanceof ie){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(kv(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else kv(n)}function kv(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function hp(n,e,t,r){return n.someProp("createSelectionBetween",s=>s(n,e,t))||pe.between(e,t,r)}function xv(n){return n.editable&&!n.hasFocus()?!1:ik(n)}function ik(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function vN(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Ls(e.node,e.offset,t.anchorNode,t.anchorOffset)}function Of(n,e){let{$anchor:t,$head:r}=n.selection,s=e>0?t.max(r):t.min(r),i=s.parent.inlineContent?s.depth?n.doc.resolve(e>0?s.after():s.before()):null:s;return i&&ge.findFrom(i,e)}function Pr(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function Sv(n,e,t){let r=n.state.selection;if(r instanceof pe)if(t.indexOf("s")>-1){let{$head:s}=r,i=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let a=n.state.doc.resolve(s.pos+i.nodeSize*(e<0?-1:1));return Pr(n,new pe(r.$anchor,a))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let s=Of(n.state,e);return s&&s instanceof ie?Pr(n,s):!1}else if(!(hn&&t.indexOf("m")>-1)){let s=r.$head,i=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,a;if(!i||i.isText)return!1;let u=e<0?s.pos-i.nodeSize:s.pos;return i.isAtom||(a=n.docView.descAt(u))&&!a.contentDOM?ie.isSelectable(i)?Pr(n,new ie(e<0?n.state.doc.resolve(s.pos-i.nodeSize):s)):ba?Pr(n,new pe(n.state.doc.resolve(e<0?u:u+i.nodeSize))):!1:!1}}else return!1;else{if(r instanceof ie&&r.node.isInline)return Pr(n,new pe(e>0?r.$to:r.$from));{let s=Of(n.state,e);return s?Pr(n,s):!1}}}function gu(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Fo(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function wi(n,e){return e<0?wN(n):kN(n)}function wN(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let s,i,a=!1;for(mn&&t.nodeType==1&&r<gu(t)&&Fo(t.childNodes[r],-1)&&(a=!0);;)if(r>0){if(t.nodeType!=1)break;{let u=t.childNodes[r-1];if(Fo(u,-1))s=t,i=--r;else if(u.nodeType==3)t=u,r=t.nodeValue.length;else break}}else{if(ok(t))break;{let u=t.previousSibling;for(;u&&Fo(u,-1);)s=t.parentNode,i=xt(u),u=u.previousSibling;if(u)t=u,r=gu(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}a?Rf(n,t,r):s&&Rf(n,s,i)}function kN(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let s=gu(t),i,a;for(;;)if(r<s){if(t.nodeType!=1)break;let u=t.childNodes[r];if(Fo(u,1))i=t,a=++r;else break}else{if(ok(t))break;{let u=t.nextSibling;for(;u&&Fo(u,1);)i=u.parentNode,a=xt(u)+1,u=u.nextSibling;if(u)t=u,r=0,s=gu(t);else{if(t=t.parentNode,t==n.dom)break;r=s=0}}}i&&Rf(n,i,a)}function ok(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function xN(n,e){for(;n&&e==n.childNodes.length&&!Sa(n);)e=xt(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function SN(n,e){for(;n&&!e&&!Sa(n);)e=xt(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function Rf(n,e,t){if(e.nodeType!=3){let i,a;(a=xN(e,t))?(e=a,t=0):(i=SN(e,t))&&(e=i,t=i.nodeValue.length)}let r=n.domSelection();if(!r)return;if(ic(r)){let i=document.createRange();i.setEnd(e,t),i.setStart(e,t),r.removeAllRanges(),r.addRange(i)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:s}=n;setTimeout(()=>{n.state==s&&ar(n)},50)}function bv(n,e){let t=n.state.doc.resolve(e);if(!(lt||W1)&&t.parent.inlineContent){let s=n.coordsAtPos(e);if(e>t.start()){let i=n.coordsAtPos(e-1),a=(i.top+i.bottom)/2;if(a>s.top&&a<s.bottom&&Math.abs(i.left-s.left)>1)return i.left<s.left?"ltr":"rtl"}if(e<t.end()){let i=n.coordsAtPos(e+1),a=(i.top+i.bottom)/2;if(a>s.top&&a<s.bottom&&Math.abs(i.left-s.left)>1)return i.left>s.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function Ev(n,e,t){let r=n.state.selection;if(r instanceof pe&&!r.empty||t.indexOf("s")>-1||hn&&t.indexOf("m")>-1)return!1;let{$from:s,$to:i}=r;if(!s.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let a=Of(n.state,e);if(a&&a instanceof ie)return Pr(n,a)}if(!s.parent.inlineContent){let a=e<0?s:i,u=r instanceof tn?ge.near(a,e):ge.findFrom(a,e);return u?Pr(n,u):!1}return!1}function Cv(n,e){if(!(n.state.selection instanceof pe))return!0;let{$head:t,$anchor:r,empty:s}=n.state.selection;if(!t.sameParent(r))return!0;if(!s)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let i=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(i&&!i.isText){let a=n.state.tr;return e<0?a.delete(t.pos-i.nodeSize,t.pos):a.delete(t.pos,t.pos+i.nodeSize),n.dispatch(a),!0}return!1}function _v(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function bN(n){if(!Nt||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;_v(n,r,"true"),setTimeout(()=>_v(n,r,"false"),20)}return!1}function EN(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function CN(n,e){let t=e.keyCode,r=EN(e);if(t==8||hn&&t==72&&r=="c")return Cv(n,-1)||wi(n,-1);if(t==46&&!e.shiftKey||hn&&t==68&&r=="c")return Cv(n,1)||wi(n,1);if(t==13||t==27)return!0;if(t==37||hn&&t==66&&r=="c"){let s=t==37?bv(n,n.state.selection.from)=="ltr"?-1:1:-1;return Sv(n,s,r)||wi(n,s)}else if(t==39||hn&&t==70&&r=="c"){let s=t==39?bv(n,n.state.selection.from)=="ltr"?1:-1:1;return Sv(n,s,r)||wi(n,s)}else{if(t==38||hn&&t==80&&r=="c")return Ev(n,-1,r)||wi(n,-1);if(t==40||hn&&t==78&&r=="c")return bN(n)||Ev(n,1,r)||wi(n,1);if(r==(hn?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function fp(n,e){n.someProp("transformCopied",w=>{e=w(e,n)});let t=[],{content:r,openStart:s,openEnd:i}=e;for(;s>1&&i>1&&r.childCount==1&&r.firstChild.childCount==1;){s--,i--;let w=r.firstChild;t.push(w.type.name,w.attrs!=w.type.defaultAttrs?w.attrs:null),r=w.content}let a=n.someProp("clipboardSerializer")||Bs.fromSchema(n.state.schema),u=hk(),c=u.createElement("div");c.appendChild(a.serializeFragment(r,{document:u}));let h=c.firstChild,p,m=0;for(;h&&h.nodeType==1&&(p=dk[h.nodeName.toLowerCase()]);){for(let w=p.length-1;w>=0;w--){let k=u.createElement(p[w]);for(;c.firstChild;)k.appendChild(c.firstChild);c.appendChild(k),m++}h=c.firstChild}h&&h.nodeType==1&&h.setAttribute("data-pm-slice",`${s} ${i}${m?` -${m}`:""} ${JSON.stringify(t)}`);let y=n.someProp("clipboardTextSerializer",w=>w(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:c,text:y,slice:e}}function ak(n,e,t,r,s){let i=s.parent.type.spec.code,a,u;if(!t&&!e)return null;let c=!!e&&(r||i||!t);if(c){if(n.someProp("transformPastedText",y=>{e=y(e,i||r,n)}),i)return u=new Y(U.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),n.someProp("transformPasted",y=>{u=y(u,n,!0)}),u;let m=n.someProp("clipboardTextParser",y=>y(e,s,r,n));if(m)u=m;else{let y=s.marks(),{schema:w}=n.state,k=Bs.fromSchema(w);a=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(x=>{let b=a.appendChild(document.createElement("p"));x&&b.appendChild(k.serializeNode(w.text(x,y)))})}}else n.someProp("transformPastedHTML",m=>{t=m(t,n)}),a=RN(t),ba&&NN(a);let h=a&&a.querySelector("[data-pm-slice]"),p=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(p&&p[3])for(let m=+p[3];m>0;m--){let y=a.firstChild;for(;y&&y.nodeType!=1;)y=y.nextSibling;if(!y)break;a=y}if(u||(u=(n.someProp("clipboardParser")||n.someProp("domParser")||Wr.fromSchema(n.state.schema)).parseSlice(a,{preserveWhitespace:!!(c||p),context:s,ruleFromNode(y){return y.nodeName=="BR"&&!y.nextSibling&&y.parentNode&&!_N.test(y.parentNode.nodeName)?{ignore:!0}:null}})),p)u=AN(Tv(u,+p[1],+p[2]),p[4]);else if(u=Y.maxOpen(TN(u.content,s),!0),u.openStart||u.openEnd){let m=0,y=0;for(let w=u.content.firstChild;m<u.openStart&&!w.type.spec.isolating;m++,w=w.firstChild);for(let w=u.content.lastChild;y<u.openEnd&&!w.type.spec.isolating;y++,w=w.lastChild);u=Tv(u,m,y)}return n.someProp("transformPasted",m=>{u=m(u,n,c)}),u}const _N=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function TN(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let s=e.node(t).contentMatchAt(e.index(t)),i,a=[];if(n.forEach(u=>{if(!a)return;let c=s.findWrapping(u.type),h;if(!c)return a=null;if(h=a.length&&i.length&&uk(c,i,u,a[a.length-1],0))a[a.length-1]=h;else{a.length&&(a[a.length-1]=ck(a[a.length-1],i.length));let p=lk(u,c);a.push(p),s=s.matchType(p.type),i=c}}),a)return U.from(a)}return n}function lk(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,U.from(n));return n}function uk(n,e,t,r,s){if(s<n.length&&s<e.length&&n[s]==e[s]){let i=uk(n,e,t,r.lastChild,s+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(s==n.length-1?t.type:n[s+1]))return r.copy(r.content.append(U.from(lk(t,n,s+1))))}}function ck(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,ck(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(U.empty,!0);return n.copy(t.append(r))}function Nf(n,e,t,r,s,i){let a=e<0?n.firstChild:n.lastChild,u=a.content;return n.childCount>1&&(i=0),s<r-1&&(u=Nf(u,e,t,r,s+1,i)),s>=t&&(u=e<0?a.contentMatchAt(0).fillBefore(u,i<=s).append(u):u.append(a.contentMatchAt(a.childCount).fillBefore(U.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,a.copy(u))}function Tv(n,e,t){return e<n.openStart&&(n=new Y(Nf(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new Y(Nf(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const dk={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Ov=null;function hk(){return Ov||(Ov=document.implementation.createHTMLDocument("title"))}let Lh=null;function ON(n){let e=window.trustedTypes;return e?(Lh||(Lh=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),Lh.createHTML(n)):n}function RN(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=hk().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),s;if((s=r&&dk[r[1].toLowerCase()])&&(n=s.map(i=>"<"+i+">").join("")+n+s.map(i=>"</"+i+">").reverse().join("")),t.innerHTML=ON(n),s)for(let i=0;i<s.length;i++)t=t.querySelector(s[i])||t;return t}function NN(n){let e=n.querySelectorAll(lt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function AN(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:s,openStart:i,openEnd:a}=n;for(let u=r.length-2;u>=0;u-=2){let c=t.nodes[r[u]];if(!c||c.hasRequiredAttrs())break;s=U.from(c.create(r[u+1],s)),i++,a++}return new Y(s,i,a)}const Dt={},Lt={},MN={touchstart:!0,touchmove:!0};class IN{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function PN(n){for(let e in Dt){let t=Dt[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{LN(n,r)&&!pp(n,r)&&(n.editable||!(r.type in Lt))&&t(n,r)},MN[e]?{passive:!0}:void 0)}Nt&&n.dom.addEventListener("input",()=>null),Af(n)}function Fr(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function DN(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function Af(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>pp(n,r))})}function pp(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function LN(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function jN(n,e){!pp(n,e)&&Dt[e.type]&&(n.editable||!(e.type in Lt))&&Dt[e.type](n,e)}Lt.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!pk(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(sr&&lt&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),Pi&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",s=>s(n,ks(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||CN(n,t)?t.preventDefault():Fr(n,"key")};Lt.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Lt.keypress=(n,e)=>{let t=e;if(pk(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||hn&&t.metaKey)return;if(n.someProp("handleKeyPress",s=>s(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof pe)||!r.$from.sameParent(r.$to)){let s=String.fromCharCode(t.charCode),i=()=>n.state.tr.insertText(s).scrollIntoView();!/[\r\n]/.test(s)&&!n.someProp("handleTextInput",a=>a(n,r.$from.pos,r.$to.pos,s,i))&&n.dispatch(i()),t.preventDefault()}};function ac(n){return{left:n.clientX,top:n.clientY}}function $N(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function mp(n,e,t,r,s){if(r==-1)return!1;let i=n.state.doc.resolve(r);for(let a=i.depth+1;a>0;a--)if(n.someProp(e,u=>a>i.depth?u(n,t,i.nodeAfter,i.before(a),s,!0):u(n,t,i.node(a),i.before(a),s,!1)))return!0;return!1}function Ai(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function BN(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&ie.isSelectable(r)?(Ai(n,new ie(t)),!0):!1}function zN(n,e){if(e==-1)return!1;let t=n.state.selection,r,s;t instanceof ie&&(r=t.node);let i=n.state.doc.resolve(e);for(let a=i.depth+1;a>0;a--){let u=a>i.depth?i.nodeAfter:i.node(a);if(ie.isSelectable(u)){r&&t.$from.depth>0&&a>=t.$from.depth&&i.before(t.$from.depth+1)==t.$from.pos?s=i.before(t.$from.depth):s=i.before(a);break}}return s!=null?(Ai(n,ie.create(n.state.doc,s)),!0):!1}function UN(n,e,t,r,s){return mp(n,"handleClickOn",e,t,r)||n.someProp("handleClick",i=>i(n,e,r))||(s?zN(n,t):BN(n,t))}function FN(n,e,t,r){return mp(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",s=>s(n,e,r))}function HN(n,e,t,r){return mp(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",s=>s(n,e,r))||VN(n,t,r)}function VN(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(Ai(n,pe.create(r,0,r.content.size)),!0):!1;let s=r.resolve(e);for(let i=s.depth+1;i>0;i--){let a=i>s.depth?s.nodeAfter:s.node(i),u=s.before(i);if(a.inlineContent)Ai(n,pe.create(r,u+1,u+1+a.content.size));else if(ie.isSelectable(a))Ai(n,ie.create(r,u));else continue;return!0}}function gp(n){return yu(n)}const fk=hn?"metaKey":"ctrlKey";Dt.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=gp(n),s=Date.now(),i="singleClick";s-n.input.lastClick.time<500&&$N(t,n.input.lastClick)&&!t[fk]&&n.input.lastClick.button==t.button&&(n.input.lastClick.type=="singleClick"?i="doubleClick":n.input.lastClick.type=="doubleClick"&&(i="tripleClick")),n.input.lastClick={time:s,x:t.clientX,y:t.clientY,type:i,button:t.button};let a=n.posAtCoords(ac(t));a&&(i=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new WN(n,a,t,!!r)):(i=="doubleClick"?FN:HN)(n,a.pos,a.inside,t)?t.preventDefault():Fr(n,"pointer"))};class WN{constructor(e,t,r,s){this.view=e,this.pos=t,this.event=r,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[fk],this.allowDefault=r.shiftKey;let i,a;if(t.inside>-1)i=e.state.doc.nodeAt(t.inside),a=t.inside;else{let p=e.state.doc.resolve(t.pos);i=p.parent,a=p.depth?p.before():0}const u=s?null:r.target,c=u?e.docView.nearestDesc(u,!0):null;this.target=c&&c.nodeDOM.nodeType==1?c.nodeDOM:null;let{selection:h}=e.state;(r.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||h instanceof ie&&h.from<=a&&h.to>a)&&(this.mightDrag={node:i,pos:a,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&mn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Fr(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>ar(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(ac(e))),this.updateAllowDefault(e),this.allowDefault||!t?Fr(this.view,"pointer"):UN(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Nt&&this.mightDrag&&!this.mightDrag.node.isAtom||lt&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Ai(this.view,ge.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):Fr(this.view,"pointer")}move(e){this.updateAllowDefault(e),Fr(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Dt.touchstart=n=>{n.input.lastTouch=Date.now(),gp(n),Fr(n,"pointer")};Dt.touchmove=n=>{n.input.lastTouch=Date.now(),Fr(n,"pointer")};Dt.contextmenu=n=>gp(n);function pk(n,e){return n.composing?!0:Nt&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const KN=sr?5e3:-1;Lt.compositionstart=Lt.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof pe&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||lt&&W1&&qN(n)))n.markCursor=n.state.storedMarks||t.marks(),yu(n,!0),n.markCursor=null;else if(yu(n,!e.selection.empty),mn&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let s=r.focusNode,i=r.focusOffset;s&&s.nodeType==1&&i!=0;){let a=i<0?s.lastChild:s.childNodes[i-1];if(!a)break;if(a.nodeType==3){let u=n.domSelection();u&&u.collapse(a,a.nodeValue.length);break}else s=a,i=-1}}n.input.composing=!0}mk(n,KN)};function qN(n){let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(!e||e.nodeType!=1||t>=e.childNodes.length)return!1;let r=e.childNodes[t];return r.nodeType==1&&r.contentEditable=="false"}Lt.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,mk(n,20))};function mk(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>yu(n),e))}function gk(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=JN());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function GN(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=zR(e.focusNode,e.focusOffset),r=UR(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let s=r.pmViewDesc,i=n.domObserver.lastChangedTextNode;if(t==i||r==i)return i;if(!s||!s.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let a=t.pmViewDesc;if(!(!a||!a.isText(t.nodeValue)))return r}}return t||r}function JN(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function yu(n,e=!1){if(!(sr&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),gk(n),e||n.docView&&n.docView.dirty){let t=dp(n),r=n.state.selection;return t&&!t.eq(r)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function YN(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),s=document.createRange();s.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(s),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const ua=Vt&&Kr<15||Pi&&WR<604;Dt.copy=Lt.cut=(n,e)=>{let t=e,r=n.state.selection,s=t.type=="cut";if(r.empty)return;let i=ua?null:t.clipboardData,a=r.content(),{dom:u,text:c}=fp(n,a);i?(t.preventDefault(),i.clearData(),i.setData("text/html",u.innerHTML),i.setData("text/plain",c)):YN(n,u),s&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function QN(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function XN(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let s=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?ca(n,r.value,null,s,e):ca(n,r.textContent,r.innerHTML,s,e)},50)}function ca(n,e,t,r,s){let i=ak(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",c=>c(n,s,i||Y.empty)))return!0;if(!i)return!1;let a=QN(i),u=a?n.state.tr.replaceSelectionWith(a,r):n.state.tr.replaceSelection(i);return n.dispatch(u.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function yk(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Lt.paste=(n,e)=>{let t=e;if(n.composing&&!sr)return;let r=ua?null:t.clipboardData,s=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&ca(n,yk(r),r.getData("text/html"),s,t)?t.preventDefault():XN(n,t)};class vk{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const ZN=hn?"altKey":"ctrlKey";function wk(n,e){let t=n.someProp("dragCopies",r=>!r(e));return t??!e[ZN]}Dt.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let s=n.state.selection,i=s.empty?null:n.posAtCoords(ac(t)),a;if(!(i&&i.pos>=s.from&&i.pos<=(s instanceof ie?s.to-1:s.to))){if(r&&r.mightDrag)a=ie.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let m=n.docView.nearestDesc(t.target,!0);m&&m.node.type.spec.draggable&&m!=n.docView&&(a=ie.create(n.state.doc,m.posBefore))}}let u=(a||n.state.selection).content(),{dom:c,text:h,slice:p}=fp(n,u);(!t.dataTransfer.files.length||!lt||V1>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(ua?"Text":"text/html",c.innerHTML),t.dataTransfer.effectAllowed="copyMove",ua||t.dataTransfer.setData("text/plain",h),n.dragging=new vk(p,wk(n,t),a)};Dt.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Lt.dragover=Lt.dragenter=(n,e)=>e.preventDefault();Lt.drop=(n,e)=>{try{eA(n,e,n.dragging)}finally{n.dragging=null}};function eA(n,e,t){if(!e.dataTransfer)return;let r=n.posAtCoords(ac(e));if(!r)return;let s=n.state.doc.resolve(r.pos),i=t&&t.slice;i?n.someProp("transformPasted",w=>{i=w(i,n,!1)}):i=ak(n,yk(e.dataTransfer),ua?null:e.dataTransfer.getData("text/html"),!1,s);let a=!!(t&&wk(n,e));if(n.someProp("handleDrop",w=>w(n,e,i||Y.empty,a))){e.preventDefault();return}if(!i)return;e.preventDefault();let u=i?D1(n.state.doc,s.pos,i):s.pos;u==null&&(u=s.pos);let c=n.state.tr;if(a){let{node:w}=t;w?w.replace(c):c.deleteSelection()}let h=c.mapping.map(u),p=i.openStart==0&&i.openEnd==0&&i.content.childCount==1,m=c.doc;if(p?c.replaceRangeWith(h,h,i.content.firstChild):c.replaceRange(h,h,i),c.doc.eq(m))return;let y=c.doc.resolve(h);if(p&&ie.isSelectable(i.content.firstChild)&&y.nodeAfter&&y.nodeAfter.sameMarkup(i.content.firstChild))c.setSelection(new ie(y));else{let w=c.mapping.map(u);c.mapping.maps[c.mapping.maps.length-1].forEach((k,x,b,C)=>w=C),c.setSelection(hp(n,y,c.doc.resolve(w)))}n.focus(),n.dispatch(c.setMeta("uiEvent","drop"))}Dt.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&ar(n)},20))};Dt.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Dt.beforeinput=(n,e)=>{if(lt&&sr&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",i=>i(n,ks(8,"Backspace")))))return;let{$cursor:s}=n.state.selection;s&&s.pos>0&&n.dispatch(n.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let n in Lt)Dt[n]=Lt[n];function da(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class vu{constructor(e,t){this.toDOM=e,this.spec=t||Ns,this.side=this.spec.side||0}map(e,t,r,s){let{pos:i,deleted:a}=e.mapResult(t.from+s,this.side<0?-1:1);return a?null:new pn(i-r,i-r,this)}valid(){return!0}eq(e){return this==e||e instanceof vu&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&da(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Gr{constructor(e,t){this.attrs=e,this.spec=t||Ns}map(e,t,r,s){let i=e.map(t.from+s,this.spec.inclusiveStart?-1:1)-r,a=e.map(t.to+s,this.spec.inclusiveEnd?1:-1)-r;return i>=a?null:new pn(i,a,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Gr&&da(this.attrs,e.attrs)&&da(this.spec,e.spec)}static is(e){return e.type instanceof Gr}destroy(){}}class yp{constructor(e,t){this.attrs=e,this.spec=t||Ns}map(e,t,r,s){let i=e.mapResult(t.from+s,1);if(i.deleted)return null;let a=e.mapResult(t.to+s,-1);return a.deleted||a.pos<=i.pos?null:new pn(i.pos-r,a.pos-r,this)}valid(e,t){let{index:r,offset:s}=e.content.findIndex(t.from),i;return s==t.from&&!(i=e.child(r)).isText&&s+i.nodeSize==t.to}eq(e){return this==e||e instanceof yp&&da(this.attrs,e.attrs)&&da(this.spec,e.spec)}destroy(){}}class pn{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new pn(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new pn(e,e,new vu(t,r))}static inline(e,t,r,s){return new pn(e,t,new Gr(r,s))}static node(e,t,r,s){return new pn(e,t,new yp(r,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof Gr}get widget(){return this.type instanceof vu}}const Ei=[],Ns={};class tt{constructor(e,t){this.local=e.length?e:Ei,this.children=t.length?t:Ei}static create(e,t){return t.length?wu(t,e,0,Ns):Ot}find(e,t,r){let s=[];return this.findInner(e??0,t??1e9,s,0,r),s}findInner(e,t,r,s,i){for(let a=0;a<this.local.length;a++){let u=this.local[a];u.from<=t&&u.to>=e&&(!i||i(u.spec))&&r.push(u.copy(u.from+s,u.to+s))}for(let a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){let u=this.children[a]+1;this.children[a+2].findInner(e-u,t-u,r,s+u,i)}}map(e,t,r){return this==Ot||e.maps.length==0?this:this.mapInner(e,t,0,0,r||Ns)}mapInner(e,t,r,s,i){let a;for(let u=0;u<this.local.length;u++){let c=this.local[u].map(e,r,s);c&&c.type.valid(t,c)?(a||(a=[])).push(c):i.onRemove&&i.onRemove(this.local[u].spec)}return this.children.length?tA(this.children,a||[],e,t,r,s,i):a?new tt(a.sort(As),Ei):Ot}add(e,t){return t.length?this==Ot?tt.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let s,i=0;e.forEach((u,c)=>{let h=c+r,p;if(p=xk(t,u,h)){for(s||(s=this.children.slice());i<s.length&&s[i]<c;)i+=3;s[i]==c?s[i+2]=s[i+2].addInner(u,p,h+1):s.splice(i,0,c,c+u.nodeSize,wu(p,u,h+1,Ns)),i+=3}});let a=kk(i?Sk(t):t,-r);for(let u=0;u<a.length;u++)a[u].type.valid(e,a[u])||a.splice(u--,1);return new tt(a.length?this.local.concat(a).sort(As):this.local,s||this.children)}remove(e){return e.length==0||this==Ot?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,s=this.local;for(let i=0;i<r.length;i+=3){let a,u=r[i]+t,c=r[i+1]+t;for(let p=0,m;p<e.length;p++)(m=e[p])&&m.from>u&&m.to<c&&(e[p]=null,(a||(a=[])).push(m));if(!a)continue;r==this.children&&(r=this.children.slice());let h=r[i+2].removeInner(a,u+1);h!=Ot?r[i+2]=h:(r.splice(i,3),i-=3)}if(s.length){for(let i=0,a;i<e.length;i++)if(a=e[i])for(let u=0;u<s.length;u++)s[u].eq(a,t)&&(s==this.local&&(s=this.local.slice()),s.splice(u--,1))}return r==this.children&&s==this.local?this:s.length||r.length?new tt(s,r):Ot}forChild(e,t){if(this==Ot)return this;if(t.isLeaf)return tt.empty;let r,s;for(let u=0;u<this.children.length;u+=3)if(this.children[u]>=e){this.children[u]==e&&(r=this.children[u+2]);break}let i=e+1,a=i+t.content.size;for(let u=0;u<this.local.length;u++){let c=this.local[u];if(c.from<a&&c.to>i&&c.type instanceof Gr){let h=Math.max(i,c.from)-i,p=Math.min(a,c.to)-i;h<p&&(s||(s=[])).push(c.copy(h,p))}}if(s){let u=new tt(s.sort(As),Ei);return r?new $r([u,r]):u}return r||Ot}eq(e){if(this==e)return!0;if(!(e instanceof tt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return vp(this.localsInner(e))}localsInner(e){if(this==Ot)return Ei;if(e.inlineContent||!this.local.some(Gr.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Gr||t.push(this.local[r]);return t}forEachSet(e){e(this)}}tt.empty=new tt([],[]);tt.removeOverlap=vp;const Ot=tt.empty;class $r{constructor(e){this.members=e}map(e,t){const r=this.members.map(s=>s.map(e,t,Ns));return $r.from(r)}forChild(e,t){if(t.isLeaf)return tt.empty;let r=[];for(let s=0;s<this.members.length;s++){let i=this.members[s].forChild(e,t);i!=Ot&&(i instanceof $r?r=r.concat(i.members):r.push(i))}return $r.from(r)}eq(e){if(!(e instanceof $r)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let s=0;s<this.members.length;s++){let i=this.members[s].localsInner(e);if(i.length)if(!t)t=i;else{r&&(t=t.slice(),r=!1);for(let a=0;a<i.length;a++)t.push(i[a])}}return t?vp(r?t:t.sort(As)):Ei}static from(e){switch(e.length){case 0:return Ot;case 1:return e[0];default:return new $r(e.every(t=>t instanceof tt)?e:e.reduce((t,r)=>t.concat(r instanceof tt?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function tA(n,e,t,r,s,i,a){let u=n.slice();for(let h=0,p=i;h<t.maps.length;h++){let m=0;t.maps[h].forEach((y,w,k,x)=>{let b=x-k-(w-y);for(let C=0;C<u.length;C+=3){let A=u[C+1];if(A<0||y>A+p-m)continue;let O=u[C]+p-m;w>=O?u[C+1]=y<=O?-2:-1:y>=p&&b&&(u[C]+=b,u[C+1]+=b)}m+=b}),p=t.maps[h].map(p,-1)}let c=!1;for(let h=0;h<u.length;h+=3)if(u[h+1]<0){if(u[h+1]==-2){c=!0,u[h+1]=-1;continue}let p=t.map(n[h]+i),m=p-s;if(m<0||m>=r.content.size){c=!0;continue}let y=t.map(n[h+1]+i,-1),w=y-s,{index:k,offset:x}=r.content.findIndex(m),b=r.maybeChild(k);if(b&&x==m&&x+b.nodeSize==w){let C=u[h+2].mapInner(t,b,p+1,n[h]+i+1,a);C!=Ot?(u[h]=m,u[h+1]=w,u[h+2]=C):(u[h+1]=-2,c=!0)}else c=!0}if(c){let h=nA(u,n,e,t,s,i,a),p=wu(h,r,0,a);e=p.local;for(let m=0;m<u.length;m+=3)u[m+1]<0&&(u.splice(m,3),m-=3);for(let m=0,y=0;m<p.children.length;m+=3){let w=p.children[m];for(;y<u.length&&u[y]<w;)y+=3;u.splice(y,0,p.children[m],p.children[m+1],p.children[m+2])}}return new tt(e.sort(As),u)}function kk(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let s=n[r];t.push(new pn(s.from+e,s.to+e,s.type))}return t}function nA(n,e,t,r,s,i,a){function u(c,h){for(let p=0;p<c.local.length;p++){let m=c.local[p].map(r,s,h);m?t.push(m):a.onRemove&&a.onRemove(c.local[p].spec)}for(let p=0;p<c.children.length;p+=3)u(c.children[p+2],c.children[p]+h+1)}for(let c=0;c<n.length;c+=3)n[c+1]==-1&&u(n[c+2],e[c]+i+1);return t}function xk(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,s=null;for(let i=0,a;i<n.length;i++)(a=n[i])&&a.from>t&&a.to<r&&((s||(s=[])).push(a),n[i]=null);return s}function Sk(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function wu(n,e,t,r){let s=[],i=!1;e.forEach((u,c)=>{let h=xk(n,u,c+t);if(h){i=!0;let p=wu(h,u,t+c+1,r);p!=Ot&&s.push(c,c+u.nodeSize,p)}});let a=kk(i?Sk(n):n,-t).sort(As);for(let u=0;u<a.length;u++)a[u].type.valid(e,a[u])||(r.onRemove&&r.onRemove(a[u].spec),a.splice(u--,1));return a.length||s.length?new tt(a,s):Ot}function As(n,e){return n.from-e.from||n.to-e.to}function vp(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let s=t+1;s<e.length;s++){let i=e[s];if(i.from==r.from){i.to!=r.to&&(e==n&&(e=n.slice()),e[s]=i.copy(i.from,r.to),Rv(e,s+1,i.copy(r.to,i.to)));continue}else{i.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,i.from),Rv(e,s,r.copy(i.from,r.to)));break}}}return e}function Rv(n,e,t){for(;e<n.length&&As(t,n[e])>0;)e++;n.splice(e,0,t)}function jh(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=Ot&&e.push(r)}),n.cursorWrapper&&e.push(tt.create(n.state.doc,[n.cursorWrapper.deco])),$r.from(e)}const rA={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},sA=Vt&&Kr<=11;class iA{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class oA{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new iA,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let s=0;s<r.length;s++)this.queue.push(r[s]);Vt&&Kr<=11&&r.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),sA&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,rA)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(xv(this.view)){if(this.suppressingSelectionUpdates)return ar(this.view);if(Vt&&Kr<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Ls(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let i=e.focusNode;i;i=Ii(i))t.add(i);for(let i=e.anchorNode;i;i=Ii(i))if(t.has(i)){r=i;break}let s=r&&this.view.docView.nearestDesc(r);if(s&&s.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&xv(e)&&!this.ignoreSelectionChange(r),i=-1,a=-1,u=!1,c=[];if(e.editable)for(let p=0;p<t.length;p++){let m=this.registerMutation(t[p],c);m&&(i=i<0?m.from:Math.min(m.from,i),a=a<0?m.to:Math.max(m.to,a),m.typeOver&&(u=!0))}if(mn&&c.length){let p=c.filter(m=>m.nodeName=="BR");if(p.length==2){let[m,y]=p;m.parentNode&&m.parentNode.parentNode==y.parentNode?y.remove():m.remove()}else{let{focusNode:m}=this.currentSelection;for(let y of p){let w=y.parentNode;w&&w.nodeName=="LI"&&(!m||uA(e,m)!=w)&&y.remove()}}}else if((lt||Nt)&&c.some(p=>p.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let p of c)if(p.nodeName=="BR"&&p.parentNode){let m=p.nextSibling;m&&m.nodeType==1&&m.contentEditable=="false"&&p.parentNode.removeChild(p)}}let h=null;i<0&&s&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&ic(r)&&(h=dp(e))&&h.eq(ge.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,ar(e),this.currentSelection.set(r),e.scrollToSelection()):(i>-1||s)&&(i>-1&&(e.docView.markDirty(i,a),aA(e)),this.handleDOMChange(i,a,u,c),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||ar(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let p=0;p<e.addedNodes.length;p++){let m=e.addedNodes[p];t.push(m),m.nodeType==3&&(this.lastChangedTextNode=m)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let s=e.previousSibling,i=e.nextSibling;if(Vt&&Kr<=11&&e.addedNodes.length)for(let p=0;p<e.addedNodes.length;p++){let{previousSibling:m,nextSibling:y}=e.addedNodes[p];(!m||Array.prototype.indexOf.call(e.addedNodes,m)<0)&&(s=m),(!y||Array.prototype.indexOf.call(e.addedNodes,y)<0)&&(i=y)}let a=s&&s.parentNode==e.target?xt(s)+1:0,u=r.localPosFromDOM(e.target,a,-1),c=i&&i.parentNode==e.target?xt(i):e.target.childNodes.length,h=r.localPosFromDOM(e.target,c,1);return{from:u,to:h}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Nv=new WeakMap,Av=!1;function aA(n){if(!Nv.has(n)&&(Nv.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=mn,Av)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Av=!0}}function Mv(n,e){let t=e.startContainer,r=e.startOffset,s=e.endContainer,i=e.endOffset,a=n.domAtPos(n.state.selection.anchor);return Ls(a.node,a.offset,s,i)&&([t,r,s,i]=[s,i,t,r]),{anchorNode:t,anchorOffset:r,focusNode:s,focusOffset:i}}function lA(n,e){if(e.getComposedRanges){let s=e.getComposedRanges(n.root)[0];if(s)return Mv(n,s)}let t;function r(s){s.preventDefault(),s.stopImmediatePropagation(),t=s.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?Mv(n,t):null}function uA(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function cA(n,e,t){let{node:r,fromOffset:s,toOffset:i,from:a,to:u}=n.docView.parseRange(e,t),c=n.domSelectionRange(),h,p=c.anchorNode;if(p&&n.dom.contains(p.nodeType==1?p:p.parentNode)&&(h=[{node:p,offset:c.anchorOffset}],ic(c)||h.push({node:c.focusNode,offset:c.focusOffset})),lt&&n.input.lastKeyCode===8)for(let b=i;b>s;b--){let C=r.childNodes[b-1],A=C.pmViewDesc;if(C.nodeName=="BR"&&!A){i=b;break}if(!A||A.size)break}let m=n.state.doc,y=n.someProp("domParser")||Wr.fromSchema(n.state.schema),w=m.resolve(a),k=null,x=y.parse(r,{topNode:w.parent,topMatch:w.parent.contentMatchAt(w.index()),topOpen:!0,from:s,to:i,preserveWhitespace:w.parent.type.whitespace=="pre"?"full":!0,findPositions:h,ruleFromNode:dA,context:w});if(h&&h[0].pos!=null){let b=h[0].pos,C=h[1]&&h[1].pos;C==null&&(C=b),k={anchor:b+a,head:C+a}}return{doc:x,sel:k,from:a,to:u}}function dA(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Nt&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Nt&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const hA=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function fA(n,e,t,r,s){let i=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let L=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,q=dp(n,L);if(q&&!n.state.selection.eq(q)){if(lt&&sr&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",De=>De(n,ks(13,"Enter"))))return;let he=n.state.tr.setSelection(q);L=="pointer"?he.setMeta("pointer",!0):L=="key"&&he.scrollIntoView(),i&&he.setMeta("composition",i),n.dispatch(he)}return}let a=n.state.doc.resolve(e),u=a.sharedDepth(t);e=a.before(u+1),t=n.state.doc.resolve(t).after(u+1);let c=n.state.selection,h=cA(n,e,t),p=n.state.doc,m=p.slice(h.from,h.to),y,w;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(y=n.state.selection.to,w="end"):(y=n.state.selection.from,w="start"),n.input.lastKeyCode=null;let k=gA(m.content,h.doc.content,h.from,y,w);if(k&&n.input.domChangeCount++,(Pi&&n.input.lastIOSEnter>Date.now()-225||sr)&&s.some(L=>L.nodeType==1&&!hA.test(L.nodeName))&&(!k||k.endA>=k.endB)&&n.someProp("handleKeyDown",L=>L(n,ks(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!k)if(r&&c instanceof pe&&!c.empty&&c.$head.sameParent(c.$anchor)&&!n.composing&&!(h.sel&&h.sel.anchor!=h.sel.head))k={start:c.from,endA:c.to,endB:c.to};else{if(h.sel){let L=Iv(n,n.state.doc,h.sel);if(L&&!L.eq(n.state.selection)){let q=n.state.tr.setSelection(L);i&&q.setMeta("composition",i),n.dispatch(q)}}return}n.state.selection.from<n.state.selection.to&&k.start==k.endB&&n.state.selection instanceof pe&&(k.start>n.state.selection.from&&k.start<=n.state.selection.from+2&&n.state.selection.from>=h.from?k.start=n.state.selection.from:k.endA<n.state.selection.to&&k.endA>=n.state.selection.to-2&&n.state.selection.to<=h.to&&(k.endB+=n.state.selection.to-k.endA,k.endA=n.state.selection.to)),Vt&&Kr<=11&&k.endB==k.start+1&&k.endA==k.start&&k.start>h.from&&h.doc.textBetween(k.start-h.from-1,k.start-h.from+1)==" "&&(k.start--,k.endA--,k.endB--);let x=h.doc.resolveNoCache(k.start-h.from),b=h.doc.resolveNoCache(k.endB-h.from),C=p.resolve(k.start),A=x.sameParent(b)&&x.parent.inlineContent&&C.end()>=k.endA;if((Pi&&n.input.lastIOSEnter>Date.now()-225&&(!A||s.some(L=>L.nodeName=="DIV"||L.nodeName=="P"))||!A&&x.pos<h.doc.content.size&&(!x.sameParent(b)||!x.parent.inlineContent)&&x.pos<b.pos&&!/\S/.test(h.doc.textBetween(x.pos,b.pos,"","")))&&n.someProp("handleKeyDown",L=>L(n,ks(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>k.start&&mA(p,k.start,k.endA,x,b)&&n.someProp("handleKeyDown",L=>L(n,ks(8,"Backspace")))){sr&&lt&&n.domObserver.suppressSelectionUpdates();return}lt&&k.endB==k.start&&(n.input.lastChromeDelete=Date.now()),sr&&!A&&x.start()!=b.start()&&b.parentOffset==0&&x.depth==b.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==k.endA&&(k.endB-=2,b=h.doc.resolveNoCache(k.endB-h.from),setTimeout(()=>{n.someProp("handleKeyDown",function(L){return L(n,ks(13,"Enter"))})},20));let O=k.start,j=k.endA,F=L=>{let q=L||n.state.tr.replace(O,j,h.doc.slice(k.start-h.from,k.endB-h.from));if(h.sel){let he=Iv(n,q.doc,h.sel);he&&!(lt&&n.composing&&he.empty&&(k.start!=k.endB||n.input.lastChromeDelete<Date.now()-100)&&(he.head==O||he.head==q.mapping.map(j)-1)||Vt&&he.empty&&he.head==O)&&q.setSelection(he)}return i&&q.setMeta("composition",i),q.scrollIntoView()},W;if(A)if(x.pos==b.pos){Vt&&Kr<=11&&x.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>ar(n),20));let L=F(n.state.tr.delete(O,j)),q=p.resolve(k.start).marksAcross(p.resolve(k.endA));q&&L.ensureMarks(q),n.dispatch(L)}else if(k.endA==k.endB&&(W=pA(x.parent.content.cut(x.parentOffset,b.parentOffset),C.parent.content.cut(C.parentOffset,k.endA-C.start())))){let L=F(n.state.tr);W.type=="add"?L.addMark(O,j,W.mark):L.removeMark(O,j,W.mark),n.dispatch(L)}else if(x.parent.child(x.index()).isText&&x.index()==b.index()-(b.textOffset?0:1)){let L=x.parent.textBetween(x.parentOffset,b.parentOffset),q=()=>F(n.state.tr.insertText(L,O,j));n.someProp("handleTextInput",he=>he(n,O,j,L,q))||n.dispatch(q())}else n.dispatch(F());else n.dispatch(F())}function Iv(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:hp(n,e.resolve(t.anchor),e.resolve(t.head))}function pA(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,s=t,i=r,a,u,c;for(let p=0;p<r.length;p++)s=r[p].removeFromSet(s);for(let p=0;p<t.length;p++)i=t[p].removeFromSet(i);if(s.length==1&&i.length==0)u=s[0],a="add",c=p=>p.mark(u.addToSet(p.marks));else if(s.length==0&&i.length==1)u=i[0],a="remove",c=p=>p.mark(u.removeFromSet(p.marks));else return null;let h=[];for(let p=0;p<e.childCount;p++)h.push(c(e.child(p)));if(U.from(h).eq(n))return{mark:u,type:a}}function mA(n,e,t,r,s){if(t-e<=s.pos-r.pos||$h(r,!0,!1)<s.pos)return!1;let i=n.resolve(e);if(!r.parent.isTextblock){let u=i.nodeAfter;return u!=null&&t==e+u.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let a=n.resolve($h(i,!0,!0));return!a.parent.isTextblock||a.pos>t||$h(a,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(a.parent.content)}function $h(n,e,t){let r=n.depth,s=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,s++,e=!1;if(t){let i=n.node(r).maybeChild(n.indexAfter(r));for(;i&&!i.isLeaf;)i=i.firstChild,s++}return s}function gA(n,e,t,r,s){let i=n.findDiffStart(e,t);if(i==null)return null;let{a,b:u}=n.findDiffEnd(e,t+n.size,t+e.size);if(s=="end"){let c=Math.max(0,i-Math.min(a,u));r-=a+c-i}if(a<i&&n.size<e.size){let c=r<=i&&r>=a?i-r:0;i-=c,i&&i<e.size&&Pv(e.textBetween(i-1,i+1))&&(i+=c?1:-1),u=i+(u-a),a=i}else if(u<i){let c=r<=i&&r>=u?i-r:0;i-=c,i&&i<n.size&&Pv(n.textBetween(i-1,i+1))&&(i+=c?1:-1),a=i+(a-u),u=i}return{start:i,endA:a,endB:u}}function Pv(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class bk{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new IN,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(Bv),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=jv(this),Lv(this),this.nodeViews=$v(this),this.docView=mv(this.state.doc,Dv(this),jh(this),this.dom,this),this.domObserver=new oA(this,(r,s,i,a)=>fA(this,r,s,i,a)),this.domObserver.start(),PN(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Af(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Bv),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let s=this.state,i=!1,a=!1;e.storedMarks&&this.composing&&(gk(this),a=!0),this.state=e;let u=s.plugins!=e.plugins||this._props.plugins!=t.plugins;if(u||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let w=$v(this);vA(w,this.nodeViews)&&(this.nodeViews=w,i=!0)}(u||t.handleDOMEvents!=this._props.handleDOMEvents)&&Af(this),this.editable=jv(this),Lv(this);let c=jh(this),h=Dv(this),p=s.plugins!=e.plugins&&!s.doc.eq(e.doc)?"reset":e.scrollToSelection>s.scrollToSelection?"to selection":"preserve",m=i||!this.docView.matchesNode(e.doc,h,c);(m||!e.selection.eq(s.selection))&&(a=!0);let y=p=="preserve"&&a&&this.dom.style.overflowAnchor==null&&GR(this);if(a){this.domObserver.stop();let w=m&&(Vt||lt)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&yA(s.selection,e.selection);if(m){let k=lt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=GN(this)),(i||!this.docView.update(e.doc,h,c,this))&&(this.docView.updateOuterDeco(h),this.docView.destroy(),this.docView=mv(e.doc,h,c,this.dom,this)),k&&!this.trackWrites&&(w=!0)}w||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&vN(this))?ar(this,w):(sk(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((r=this.dragging)===null||r===void 0)&&r.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),p=="reset"?this.dom.scrollTop=0:p=="to selection"?this.scrollToSelection():y&&JR(y)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof ie){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&uv(this,t.getBoundingClientRect(),e)}else uv(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,s=-1;if(this.state.doc.nodeAt(r.from)==r.node)s=r.from;else{let i=r.from+(this.state.doc.content.size-t.doc.content.size);(i>0&&this.state.doc.nodeAt(i))==r.node&&(s=i)}this.dragging=new vk(e.slice,e.move,s<0?void 0:ie.create(this.state.doc,s))}someProp(e,t){let r=this._props&&this._props[e],s;if(r!=null&&(s=t?t(r):r))return s;for(let a=0;a<this.directPlugins.length;a++){let u=this.directPlugins[a].props[e];if(u!=null&&(s=t?t(u):u))return s}let i=this.state.plugins;if(i)for(let a=0;a<i.length;a++){let u=i[a].props[e];if(u!=null&&(s=t?t(u):u))return s}}hasFocus(){if(Vt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&YR(this.dom),ar(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return tN(this,e)}coordsAtPos(e,t=1){return Y1(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let s=this.docView.posFromDOM(e,t,r);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(e,t){return oN(this,t||this.state,e)}pasteHTML(e,t){return ca(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return ca(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return fp(this,e)}destroy(){this.docView&&(DN(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],jh(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,$R())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return jN(this,e)}domSelectionRange(){let e=this.domSelection();return e?Nt&&this.root.nodeType===11&&HR(this.dom.ownerDocument)==this.dom&&lA(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}bk.prototype.dispatch=function(n){let e=this._props.dispatchTransaction;e?e.call(this,n):this.updateState(this.state.apply(n))};function Dv(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[pn.node(0,n.state.doc.content.size,e)]}function Lv(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:pn.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function jv(n){return!n.someProp("editable",e=>e(n.state)===!1)}function yA(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function $v(n){let e=Object.create(null);function t(r){for(let s in r)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=r[s])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function vA(n,e){let t=0,r=0;for(let s in n){if(n[s]!=e[s])return!0;t++}for(let s in e)r++;return t!=r}function Bv(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Jr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},ku={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},wA=typeof navigator<"u"&&/Mac/.test(navigator.platform),kA=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var St=0;St<10;St++)Jr[48+St]=Jr[96+St]=String(St);for(var St=1;St<=24;St++)Jr[St+111]="F"+St;for(var St=65;St<=90;St++)Jr[St]=String.fromCharCode(St+32),ku[St]=String.fromCharCode(St);for(var Bh in Jr)ku.hasOwnProperty(Bh)||(ku[Bh]=Jr[Bh]);function xA(n){var e=wA&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||kA&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?ku:Jr)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const SA=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),bA=typeof navigator<"u"&&/Win/.test(navigator.platform);function EA(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,s,i,a;for(let u=0;u<e.length-1;u++){let c=e[u];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))i=!0;else if(/^mod$/i.test(c))SA?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(t="Alt-"+t),s&&(t="Ctrl-"+t),a&&(t="Meta-"+t),i&&(t="Shift-"+t),t}function CA(n){let e=Object.create(null);for(let t in n)e[EA(t)]=n[t];return e}function zh(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function _A(n){return new bt({props:{handleKeyDown:Ek(n)}})}function Ek(n){let e=CA(n);return function(t,r){let s=xA(r),i,a=e[zh(s,r)];if(a&&a(t.state,t.dispatch,t))return!0;if(s.length==1&&s!=" "){if(r.shiftKey){let u=e[zh(s,r,!1)];if(u&&u(t.state,t.dispatch,t))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(bA&&r.ctrlKey&&r.altKey)&&(i=Jr[r.keyCode])&&i!=s){let u=e[zh(i,r)];if(u&&u(t.state,t.dispatch,t))return!0}}return!1}}const wp=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function Ck(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const _k=(n,e,t)=>{let r=Ck(n,t);if(!r)return!1;let s=kp(r);if(!s){let a=r.blockRange(),u=a&&zi(a);return u==null?!1:(e&&e(n.tr.lift(a,u).scrollIntoView()),!0)}let i=s.nodeBefore;if(Dk(n,s,e,-1))return!0;if(r.parent.content.size==0&&(Di(i,"end")||ie.isSelectable(i)))for(let a=r.depth;;a--){let u=rc(n.doc,r.before(a),r.after(a),Y.empty);if(u&&u.slice.size<u.to-u.from){if(e){let c=n.tr.step(u);c.setSelection(Di(i,"end")?ge.findFrom(c.doc.resolve(c.mapping.map(s.pos,-1)),-1):ie.create(c.doc,s.pos-i.nodeSize)),e(c.scrollIntoView())}return!0}if(a==1||r.node(a-1).childCount>1)break}return i.isAtom&&s.depth==r.depth-1?(e&&e(n.tr.delete(s.pos-i.nodeSize,s.pos).scrollIntoView()),!0):!1},TA=(n,e,t)=>{let r=Ck(n,t);if(!r)return!1;let s=kp(r);return s?Tk(n,s,e):!1},OA=(n,e,t)=>{let r=Rk(n,t);if(!r)return!1;let s=xp(r);return s?Tk(n,s,e):!1};function Tk(n,e,t){let r=e.nodeBefore,s=r,i=e.pos-1;for(;!s.isTextblock;i--){if(s.type.spec.isolating)return!1;let p=s.lastChild;if(!p)return!1;s=p}let a=e.nodeAfter,u=a,c=e.pos+1;for(;!u.isTextblock;c++){if(u.type.spec.isolating)return!1;let p=u.firstChild;if(!p)return!1;u=p}let h=rc(n.doc,i,c,Y.empty);if(!h||h.from!=i||h instanceof at&&h.slice.size>=c-i)return!1;if(t){let p=n.tr.step(h);p.setSelection(pe.create(p.doc,i)),t(p.scrollIntoView())}return!0}function Di(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const Ok=(n,e,t)=>{let{$head:r,empty:s}=n.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;i=kp(r)}let a=i&&i.nodeBefore;return!a||!ie.isSelectable(a)?!1:(e&&e(n.tr.setSelection(ie.create(n.doc,i.pos-a.nodeSize)).scrollIntoView()),!0)};function kp(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function Rk(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const Nk=(n,e,t)=>{let r=Rk(n,t);if(!r)return!1;let s=xp(r);if(!s)return!1;let i=s.nodeAfter;if(Dk(n,s,e,1))return!0;if(r.parent.content.size==0&&(Di(i,"start")||ie.isSelectable(i))){let a=rc(n.doc,r.before(),r.after(),Y.empty);if(a&&a.slice.size<a.to-a.from){if(e){let u=n.tr.step(a);u.setSelection(Di(i,"start")?ge.findFrom(u.doc.resolve(u.mapping.map(s.pos)),1):ie.create(u.doc,u.mapping.map(s.pos))),e(u.scrollIntoView())}return!0}}return i.isAtom&&s.depth==r.depth-1?(e&&e(n.tr.delete(s.pos,s.pos+i.nodeSize).scrollIntoView()),!0):!1},Ak=(n,e,t)=>{let{$head:r,empty:s}=n.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;i=xp(r)}let a=i&&i.nodeAfter;return!a||!ie.isSelectable(a)?!1:(e&&e(n.tr.setSelection(ie.create(n.doc,i.pos)).scrollIntoView()),!0)};function xp(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const RA=(n,e)=>{let t=n.selection,r=t instanceof ie,s;if(r){if(t.node.isTextblock||!Qr(n.doc,t.from))return!1;s=t.from}else if(s=nc(n.doc,t.from,-1),s==null)return!1;if(e){let i=n.tr.join(s);r&&i.setSelection(ie.create(i.doc,s-n.doc.resolve(s).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},NA=(n,e)=>{let t=n.selection,r;if(t instanceof ie){if(t.node.isTextblock||!Qr(n.doc,t.to))return!1;r=t.to}else if(r=nc(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},AA=(n,e)=>{let{$from:t,$to:r}=n.selection,s=t.blockRange(r),i=s&&zi(s);return i==null?!1:(e&&e(n.tr.lift(s,i).scrollIntoView()),!0)},Mk=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function Sp(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const MA=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let s=t.node(-1),i=t.indexAfter(-1),a=Sp(s.contentMatchAt(i));if(!a||!s.canReplaceWith(i,i,a))return!1;if(e){let u=t.after(),c=n.tr.replaceWith(u,u,a.createAndFill());c.setSelection(ge.near(c.doc.resolve(u),1)),e(c.scrollIntoView())}return!0},Ik=(n,e)=>{let t=n.selection,{$from:r,$to:s}=t;if(t instanceof tn||r.parent.inlineContent||s.parent.inlineContent)return!1;let i=Sp(s.parent.contentMatchAt(s.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){let a=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,u=n.tr.insert(a,i.createAndFill());u.setSelection(pe.create(u.doc,a+1)),e(u.scrollIntoView())}return!0},Pk=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let i=t.before();if(or(n.doc,i))return e&&e(n.tr.split(i).scrollIntoView()),!0}let r=t.blockRange(),s=r&&zi(r);return s==null?!1:(e&&e(n.tr.lift(r,s).scrollIntoView()),!0)};function IA(n){return(e,t)=>{let{$from:r,$to:s}=e.selection;if(e.selection instanceof ie&&e.selection.node.isBlock)return!r.parentOffset||!or(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let i=[],a,u,c=!1,h=!1;for(let w=r.depth;;w--)if(r.node(w).isBlock){c=r.end(w)==r.pos+(r.depth-w),h=r.start(w)==r.pos-(r.depth-w),u=Sp(r.node(w-1).contentMatchAt(r.indexAfter(w-1))),i.unshift(c&&u?{type:u}:null),a=w;break}else{if(w==1)return!1;i.unshift(null)}let p=e.tr;(e.selection instanceof pe||e.selection instanceof tn)&&p.deleteSelection();let m=p.mapping.map(r.pos),y=or(p.doc,m,i.length,i);if(y||(i[0]=u?{type:u}:null,y=or(p.doc,m,i.length,i)),!y)return!1;if(p.split(m,i.length,i),!c&&h&&r.node(a).type!=u){let w=p.mapping.map(r.before(a)),k=p.doc.resolve(w);u&&r.node(a-1).canReplaceWith(k.index(),k.index()+1,u)&&p.setNodeMarkup(p.mapping.map(r.before(a)),u)}return t&&t(p.scrollIntoView()),!0}}const PA=IA(),DA=(n,e)=>{let{$from:t,to:r}=n.selection,s,i=t.sharedDepth(r);return i==0?!1:(s=t.before(i),e&&e(n.tr.setSelection(ie.create(n.doc,s))),!0)};function LA(n,e,t){let r=e.nodeBefore,s=e.nodeAfter,i=e.index();return!r||!s||!r.type.compatibleContent(s.type)?!1:!r.content.size&&e.parent.canReplace(i-1,i)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(i,i+1)||!(s.isTextblock||Qr(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function Dk(n,e,t,r){let s=e.nodeBefore,i=e.nodeAfter,a,u,c=s.type.spec.isolating||i.type.spec.isolating;if(!c&&LA(n,e,t))return!0;let h=!c&&e.parent.canReplace(e.index(),e.index()+1);if(h&&(a=(u=s.contentMatchAt(s.childCount)).findWrapping(i.type))&&u.matchType(a[0]||i.type).validEnd){if(t){let w=e.pos+i.nodeSize,k=U.empty;for(let C=a.length-1;C>=0;C--)k=U.from(a[C].create(null,k));k=U.from(s.copy(k));let x=n.tr.step(new ut(e.pos-1,w,e.pos,w,new Y(k,1,0),a.length,!0)),b=x.doc.resolve(w+2*a.length);b.nodeAfter&&b.nodeAfter.type==s.type&&Qr(x.doc,b.pos)&&x.join(b.pos),t(x.scrollIntoView())}return!0}let p=i.type.spec.isolating||r>0&&c?null:ge.findFrom(e,1),m=p&&p.$from.blockRange(p.$to),y=m&&zi(m);if(y!=null&&y>=e.depth)return t&&t(n.tr.lift(m,y).scrollIntoView()),!0;if(h&&Di(i,"start",!0)&&Di(s,"end")){let w=s,k=[];for(;k.push(w),!w.isTextblock;)w=w.lastChild;let x=i,b=1;for(;!x.isTextblock;x=x.firstChild)b++;if(w.canReplace(w.childCount,w.childCount,x.content)){if(t){let C=U.empty;for(let O=k.length-1;O>=0;O--)C=U.from(k[O].copy(C));let A=n.tr.step(new ut(e.pos-k.length,e.pos+i.nodeSize,e.pos+b,e.pos+i.nodeSize-b,new Y(C,k.length,0),0,!0));t(A.scrollIntoView())}return!0}}return!1}function Lk(n){return function(e,t){let r=e.selection,s=n<0?r.$from:r.$to,i=s.depth;for(;s.node(i).isInline;){if(!i)return!1;i--}return s.node(i).isTextblock?(t&&t(e.tr.setSelection(pe.create(e.doc,n<0?s.start(i):s.end(i)))),!0):!1}}const jA=Lk(-1),$A=Lk(1);function BA(n,e=null){return function(t,r){let{$from:s,$to:i}=t.selection,a=s.blockRange(i),u=a&&lp(a,n,e);return u?(r&&r(t.tr.wrap(a,u).scrollIntoView()),!0):!1}}function zv(n,e=null){return function(t,r){let s=!1;for(let i=0;i<t.selection.ranges.length&&!s;i++){let{$from:{pos:a},$to:{pos:u}}=t.selection.ranges[i];t.doc.nodesBetween(a,u,(c,h)=>{if(s)return!1;if(!(!c.isTextblock||c.hasMarkup(n,e)))if(c.type==n)s=!0;else{let p=t.doc.resolve(h),m=p.index();s=p.parent.canReplaceWith(m,m+1,n)}})}if(!s)return!1;if(r){let i=t.tr;for(let a=0;a<t.selection.ranges.length;a++){let{$from:{pos:u},$to:{pos:c}}=t.selection.ranges[a];i.setBlockType(u,c,n,e)}r(i.scrollIntoView())}return!0}}function bp(...n){return function(e,t,r){for(let s=0;s<n.length;s++)if(n[s](e,t,r))return!0;return!1}}bp(wp,_k,Ok);bp(wp,Nk,Ak);bp(Mk,Ik,Pk,PA);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function zA(n,e=null){return function(t,r){let{$from:s,$to:i}=t.selection,a=s.blockRange(i);if(!a)return!1;let u=r?t.tr:null;return UA(u,a,n,e)?(r&&r(u.scrollIntoView()),!0):!1}}function UA(n,e,t,r=null){let s=!1,i=e,a=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let c=a.resolve(e.start-2);i=new fu(c,c,e.depth),e.endIndex<e.parent.childCount&&(e=new fu(e.$from,a.resolve(e.$to.end(e.depth)),e.depth)),s=!0}let u=lp(i,t,r,e);return u?(n&&FA(n,e,u,s,t),!0):!1}function FA(n,e,t,r,s){let i=U.empty;for(let p=t.length-1;p>=0;p--)i=U.from(t[p].type.create(t[p].attrs,i));n.step(new ut(e.start-(r?2:0),e.end,e.start,e.end,new Y(i,0,0),t.length,!0));let a=0;for(let p=0;p<t.length;p++)t[p].type==s&&(a=p+1);let u=t.length-a,c=e.start+t.length-(r?2:0),h=e.parent;for(let p=e.startIndex,m=e.endIndex,y=!0;p<m;p++,y=!1)!y&&or(n.doc,c,u)&&(n.split(c,u),c+=2*u),c+=h.child(p).nodeSize;return n}function HA(n){return function(e,t){let{$from:r,$to:s}=e.selection,i=r.blockRange(s,a=>a.childCount>0&&a.firstChild.type==n);return i?t?r.node(i.depth-1).type==n?VA(e,t,n,i):WA(e,t,i):!0:!1}}function VA(n,e,t,r){let s=n.tr,i=r.end,a=r.$to.end(r.depth);i<a&&(s.step(new ut(i-1,a,i,a,new Y(U.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new fu(s.doc.resolve(r.$from.pos),s.doc.resolve(a),r.depth));const u=zi(r);if(u==null)return!1;s.lift(r,u);let c=s.doc.resolve(s.mapping.map(i,-1)-1);return Qr(s.doc,c.pos)&&c.nodeBefore.type==c.nodeAfter.type&&s.join(c.pos),e(s.scrollIntoView()),!0}function WA(n,e,t){let r=n.tr,s=t.parent;for(let w=t.end,k=t.endIndex-1,x=t.startIndex;k>x;k--)w-=s.child(k).nodeSize,r.delete(w-1,w+1);let i=r.doc.resolve(t.start),a=i.nodeAfter;if(r.mapping.map(t.end)!=t.start+i.nodeAfter.nodeSize)return!1;let u=t.startIndex==0,c=t.endIndex==s.childCount,h=i.node(-1),p=i.index(-1);if(!h.canReplace(p+(u?0:1),p+1,a.content.append(c?U.empty:U.from(s))))return!1;let m=i.pos,y=m+a.nodeSize;return r.step(new ut(m-(u?1:0),y+(c?1:0),m+1,y-1,new Y((u?U.empty:U.from(s.copy(U.empty))).append(c?U.empty:U.from(s.copy(U.empty))),u?0:1,c?0:1),u?0:1)),e(r.scrollIntoView()),!0}function KA(n){return function(e,t){let{$from:r,$to:s}=e.selection,i=r.blockRange(s,h=>h.childCount>0&&h.firstChild.type==n);if(!i)return!1;let a=i.startIndex;if(a==0)return!1;let u=i.parent,c=u.child(a-1);if(c.type!=n)return!1;if(t){let h=c.lastChild&&c.lastChild.type==u.type,p=U.from(h?n.create():null),m=new Y(U.from(n.create(null,U.from(u.type.create(null,p)))),h?3:1,0),y=i.start,w=i.end;t(e.tr.step(new ut(y-(h?3:1),w,y,w,m,1,!0)).scrollIntoView())}return!0}}function lc(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:s}=t,{storedMarks:i}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return r},get doc(){return s},get tr(){return r=t.selection,s=t.doc,i=t.storedMarks,t}}}class uc{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:s}=t,{tr:i}=r,a=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([u,c])=>[u,(...p)=>{const m=c(...p)(a);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(i),m}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:s,state:i}=this,{view:a}=s,u=[],c=!!e,h=e||i.tr,p=()=>(!c&&t&&!h.getMeta("preventDispatch")&&!this.hasCustomState&&a.dispatch(h),u.every(y=>y===!0)),m={...Object.fromEntries(Object.entries(r).map(([y,w])=>[y,(...x)=>{const b=this.buildProps(h,t),C=w(...x)(b);return u.push(C),m}])),run:p};return m}createCan(e){const{rawCommands:t,state:r}=this,s=!1,i=e||r.tr,a=this.buildProps(i,s);return{...Object.fromEntries(Object.entries(t).map(([c,h])=>[c,(...p)=>h(...p)({...a,dispatch:void 0})])),chain:()=>this.createChain(i,s)}}buildProps(e,t=!0){const{rawCommands:r,editor:s,state:i}=this,{view:a}=s,u={tr:e,editor:s,view:a,state:lc({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([c,h])=>[c,(...p)=>h(...p)(u)]))}};return u}}class qA{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const r=this.callbacks[e];return r&&r.forEach(s=>s.apply(this,t)),this}off(e,t){const r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(s=>s!==t):delete this.callbacks[e]),this}once(e,t){const r=(...s)=>{this.off(e,r),t.apply(this,s)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function ee(n,e,t){return n.config[e]===void 0&&n.parent?ee(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?ee(n.parent,e,t):null}):n.config[e]}function cc(n){const e=n.filter(s=>s.type==="extension"),t=n.filter(s=>s.type==="node"),r=n.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function jk(n){const e=[],{nodeExtensions:t,markExtensions:r}=cc(n),s=[...t,...r],i={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(a=>{const u={name:a.name,options:a.options,storage:a.storage,extensions:s},c=ee(a,"addGlobalAttributes",u);if(!c)return;c().forEach(p=>{p.types.forEach(m=>{Object.entries(p.attributes).forEach(([y,w])=>{e.push({type:m,name:y,attribute:{...i,...w}})})})})}),s.forEach(a=>{const u={name:a.name,options:a.options,storage:a.storage},c=ee(a,"addAttributes",u);if(!c)return;const h=c();Object.entries(h).forEach(([p,m])=>{const y={...i,...m};typeof(y==null?void 0:y.default)=="function"&&(y.default=y.default()),y!=null&&y.isRequired&&(y==null?void 0:y.default)===void 0&&delete y.default,e.push({type:a.name,name:p,attribute:y})})}),e}function dt(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function ht(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([s,i])=>{if(!r[s]){r[s]=i;return}if(s==="class"){const u=i?String(i).split(" "):[],c=r[s]?r[s].split(" "):[],h=u.filter(p=>!c.includes(p));r[s]=[...c,...h].join(" ")}else if(s==="style"){const u=i?i.split(";").map(p=>p.trim()).filter(Boolean):[],c=r[s]?r[s].split(";").map(p=>p.trim()).filter(Boolean):[],h=new Map;c.forEach(p=>{const[m,y]=p.split(":").map(w=>w.trim());h.set(m,y)}),u.forEach(p=>{const[m,y]=p.split(":").map(w=>w.trim());h.set(m,y)}),r[s]=Array.from(h.entries()).map(([p,m])=>`${p}: ${m}`).join("; ")}else r[s]=i}),r},{})}function Mf(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>ht(t,r),{})}function $k(n){return typeof n=="function"}function ve(n,e=void 0,...t){return $k(n)?e?n.bind(e)(...t):n(...t):n}function GA(n={}){return Object.keys(n).length===0&&n.constructor===Object}function JA(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function Uv(n,e){return"style"in n?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const s=e.reduce((i,a)=>{const u=a.attribute.parseHTML?a.attribute.parseHTML(t):JA(t.getAttribute(a.name));return u==null?i:{...i,[a.name]:u}},{});return{...r,...s}}}}function Fv(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&GA(t)?!1:t!=null))}function YA(n,e){var t;const r=jk(n),{nodeExtensions:s,markExtensions:i}=cc(n),a=(t=s.find(h=>ee(h,"topNode")))===null||t===void 0?void 0:t.name,u=Object.fromEntries(s.map(h=>{const p=r.filter(C=>C.type===h.name),m={name:h.name,options:h.options,storage:h.storage,editor:e},y=n.reduce((C,A)=>{const O=ee(A,"extendNodeSchema",m);return{...C,...O?O(h):{}}},{}),w=Fv({...y,content:ve(ee(h,"content",m)),marks:ve(ee(h,"marks",m)),group:ve(ee(h,"group",m)),inline:ve(ee(h,"inline",m)),atom:ve(ee(h,"atom",m)),selectable:ve(ee(h,"selectable",m)),draggable:ve(ee(h,"draggable",m)),code:ve(ee(h,"code",m)),whitespace:ve(ee(h,"whitespace",m)),linebreakReplacement:ve(ee(h,"linebreakReplacement",m)),defining:ve(ee(h,"defining",m)),isolating:ve(ee(h,"isolating",m)),attrs:Object.fromEntries(p.map(C=>{var A;return[C.name,{default:(A=C==null?void 0:C.attribute)===null||A===void 0?void 0:A.default}]}))}),k=ve(ee(h,"parseHTML",m));k&&(w.parseDOM=k.map(C=>Uv(C,p)));const x=ee(h,"renderHTML",m);x&&(w.toDOM=C=>x({node:C,HTMLAttributes:Mf(C,p)}));const b=ee(h,"renderText",m);return b&&(w.toText=b),[h.name,w]})),c=Object.fromEntries(i.map(h=>{const p=r.filter(b=>b.type===h.name),m={name:h.name,options:h.options,storage:h.storage,editor:e},y=n.reduce((b,C)=>{const A=ee(C,"extendMarkSchema",m);return{...b,...A?A(h):{}}},{}),w=Fv({...y,inclusive:ve(ee(h,"inclusive",m)),excludes:ve(ee(h,"excludes",m)),group:ve(ee(h,"group",m)),spanning:ve(ee(h,"spanning",m)),code:ve(ee(h,"code",m)),attrs:Object.fromEntries(p.map(b=>{var C;return[b.name,{default:(C=b==null?void 0:b.attribute)===null||C===void 0?void 0:C.default}]}))}),k=ve(ee(h,"parseHTML",m));k&&(w.parseDOM=k.map(b=>Uv(b,p)));const x=ee(h,"renderHTML",m);return x&&(w.toDOM=b=>x({mark:b,HTMLAttributes:Mf(b,p)})),[h.name,w]}));return new E1({topNode:a,nodes:u,marks:c})}function Uh(n,e){return e.nodes[n]||e.marks[n]||null}function Hv(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function Ep(n,e){const t=Bs.fromSchema(e).serializeFragment(n),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(t),s.innerHTML}const QA=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(s,i,a,u)=>{var c,h;const p=((h=(c=s.type.spec).toText)===null||h===void 0?void 0:h.call(c,{node:s,pos:i,parent:a,index:u}))||s.textContent||"%leaf%";t+=s.isAtom&&!s.isText?p:p.slice(0,Math.max(0,r-i))}),t};function Cp(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class dc{constructor(e){this.find=e.find,this.handler=e.handler}}const XA=(n,e)=>{if(Cp(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function Vl(n){var e;const{editor:t,from:r,to:s,text:i,rules:a,plugin:u}=n,{view:c}=t;if(c.composing)return!1;const h=c.state.doc.resolve(r);if(h.parent.type.spec.code||!((e=h.nodeBefore||h.nodeAfter)===null||e===void 0)&&e.marks.find(y=>y.type.spec.code))return!1;let p=!1;const m=QA(h)+i;return a.forEach(y=>{if(p)return;const w=XA(m,y.find);if(!w)return;const k=c.state.tr,x=lc({state:c.state,transaction:k}),b={from:r-(w[0].length-i.length),to:s},{commands:C,chain:A,can:O}=new uc({editor:t,state:x});y.handler({state:x,range:b,match:w,commands:C,chain:A,can:O})===null||!k.steps.length||(k.setMeta(u,{transform:k,from:r,to:s,text:i}),c.dispatch(k),p=!0)}),p}function ZA(n){const{editor:e,rules:t}=n,r=new bt({state:{init(){return null},apply(s,i,a){const u=s.getMeta(r);if(u)return u;const c=s.getMeta("applyInputRules");return!!c&&setTimeout(()=>{let{text:p}=c;typeof p=="string"?p=p:p=Ep(U.from(p),a.schema);const{from:m}=c,y=m+p.length;Vl({editor:e,from:m,to:y,text:p,rules:t,plugin:r})}),s.selectionSet||s.docChanged?null:i}},props:{handleTextInput(s,i,a,u){return Vl({editor:e,from:i,to:a,text:u,rules:t,plugin:r})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:i}=s.state.selection;i&&Vl({editor:e,from:i.pos,to:i.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(s,i){if(i.key!=="Enter")return!1;const{$cursor:a}=s.state.selection;return a?Vl({editor:e,from:a.pos,to:a.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function eM(n){return Object.prototype.toString.call(n).slice(8,-1)}function Wl(n){return eM(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function hc(n,e){const t={...n};return Wl(n)&&Wl(e)&&Object.keys(e).forEach(r=>{Wl(e[r])&&Wl(n[r])?t[r]=hc(n[r],e[r]):t[r]=e[r]}),t}class Fn{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ve(ee(this,"addOptions",{name:this.name}))),this.storage=ve(ee(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Fn(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>hc(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Fn(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ve(ee(t,"addOptions",{name:t.name})),t.storage=ve(ee(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,s=e.state.selection.$from;if(s.pos===s.end()){const a=s.marks();if(!!!a.find(h=>(h==null?void 0:h.type.name)===t.name))return!1;const c=a.find(h=>(h==null?void 0:h.type.name)===t.name);return c&&r.removeStoredMark(c),r.insertText(" ",s.pos),e.view.dispatch(r),!0}return!1}}function tM(n){return typeof n=="number"}class nM{constructor(e){this.find=e.find,this.handler=e.handler}}const rM=(n,e,t)=>{if(Cp(e))return[...n.matchAll(e)];const r=e(n,t);return r?r.map(s=>{const i=[s.text];return i.index=s.index,i.input=n,i.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(s.replaceWith)),i}):[]};function sM(n){const{editor:e,state:t,from:r,to:s,rule:i,pasteEvent:a,dropEvent:u}=n,{commands:c,chain:h,can:p}=new uc({editor:e,state:t}),m=[];return t.doc.nodesBetween(r,s,(w,k)=>{if(!w.isTextblock||w.type.spec.code)return;const x=Math.max(r,k),b=Math.min(s,k+w.content.size),C=w.textBetween(x-k,b-k,void 0,"");rM(C,i.find,a).forEach(O=>{if(O.index===void 0)return;const j=x+O.index+1,F=j+O[0].length,W={from:t.tr.mapping.map(j),to:t.tr.mapping.map(F)},L=i.handler({state:t,range:W,match:O,commands:c,chain:h,can:p,pasteEvent:a,dropEvent:u});m.push(L)})}),m.every(w=>w!==null)}let Kl=null;const iM=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",n),t};function oM(n){const{editor:e,rules:t}=n;let r=null,s=!1,i=!1,a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,u;try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}const c=({state:p,from:m,to:y,rule:w,pasteEvt:k})=>{const x=p.tr,b=lc({state:p,transaction:x});if(!(!sM({editor:e,state:b,from:Math.max(m-1,0),to:y.b-1,rule:w,pasteEvent:k,dropEvent:u})||!x.steps.length)){try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}return a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,x}};return t.map(p=>new bt({view(m){const y=k=>{var x;r=!((x=m.dom.parentElement)===null||x===void 0)&&x.contains(k.target)?m.dom.parentElement:null,r&&(Kl=e)},w=()=>{Kl&&(Kl=null)};return window.addEventListener("dragstart",y),window.addEventListener("dragend",w),{destroy(){window.removeEventListener("dragstart",y),window.removeEventListener("dragend",w)}}},props:{handleDOMEvents:{drop:(m,y)=>{if(i=r===m.dom.parentElement,u=y,!i){const w=Kl;w!=null&&w.isEditable&&setTimeout(()=>{const k=w.state.selection;k&&w.commands.deleteRange({from:k.from,to:k.to})},10)}return!1},paste:(m,y)=>{var w;const k=(w=y.clipboardData)===null||w===void 0?void 0:w.getData("text/html");return a=y,s=!!(k!=null&&k.includes("data-pm-slice")),!1}}},appendTransaction:(m,y,w)=>{const k=m[0],x=k.getMeta("uiEvent")==="paste"&&!s,b=k.getMeta("uiEvent")==="drop"&&!i,C=k.getMeta("applyPasteRules"),A=!!C;if(!x&&!b&&!A)return;if(A){let{text:F}=C;typeof F=="string"?F=F:F=Ep(U.from(F),w.schema);const{from:W}=C,L=W+F.length,q=iM(F);return c({rule:p,state:w,from:W,to:{b:L},pasteEvt:q})}const O=y.doc.content.findDiffStart(w.doc.content),j=y.doc.content.findDiffEnd(w.doc.content);if(!(!tM(O)||!j||O===j.b))return c({rule:p,state:w,from:O,to:j,pasteEvt:a})}}))}function aM(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return Array.from(new Set(e))}class Oi{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Oi.resolve(e),this.schema=YA(this.extensions,t),this.setupExtensions()}static resolve(e){const t=Oi.sort(Oi.flatten(e)),r=aM(t.map(s=>s.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(s=>`'${s}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},s=ee(t,"addExtensions",r);return s?[t,...this.flatten(s())]:t}).flat(10)}static sort(e){return e.sort((r,s)=>{const i=ee(r,"priority")||100,a=ee(s,"priority")||100;return i>a?-1:i<a?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:Uh(t.name,this.schema)},s=ee(t,"addCommands",r);return s?{...e,...s()}:e},{})}get plugins(){const{editor:e}=this,t=Oi.sort([...this.extensions].reverse()),r=[],s=[],i=t.map(a=>{const u={name:a.name,options:a.options,storage:a.storage,editor:e,type:Uh(a.name,this.schema)},c=[],h=ee(a,"addKeyboardShortcuts",u);let p={};if(a.type==="mark"&&ee(a,"exitable",u)&&(p.ArrowRight=()=>Fn.handleExit({editor:e,mark:a})),h){const x=Object.fromEntries(Object.entries(h()).map(([b,C])=>[b,()=>C({editor:e})]));p={...p,...x}}const m=_A(p);c.push(m);const y=ee(a,"addInputRules",u);Hv(a,e.options.enableInputRules)&&y&&r.push(...y());const w=ee(a,"addPasteRules",u);Hv(a,e.options.enablePasteRules)&&w&&s.push(...w());const k=ee(a,"addProseMirrorPlugins",u);if(k){const x=k();c.push(...x)}return c}).flat();return[ZA({editor:e,rules:r}),...oM({editor:e,rules:s}),...i]}get attributes(){return jk(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=cc(this.extensions);return Object.fromEntries(t.filter(r=>!!ee(r,"addNodeView")).map(r=>{const s=this.attributes.filter(c=>c.type===r.name),i={name:r.name,options:r.options,storage:r.storage,editor:e,type:dt(r.name,this.schema)},a=ee(r,"addNodeView",i);if(!a)return[];const u=(c,h,p,m,y)=>{const w=Mf(c,s);return a()({node:c,view:h,getPos:p,decorations:m,innerDecorations:y,editor:e,extension:r,HTMLAttributes:w})};return[r.name,u]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Uh(e.name,this.schema)};e.type==="mark"&&(!((t=ve(ee(e,"keepOnSplit",r)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const s=ee(e,"onBeforeCreate",r),i=ee(e,"onCreate",r),a=ee(e,"onUpdate",r),u=ee(e,"onSelectionUpdate",r),c=ee(e,"onTransaction",r),h=ee(e,"onFocus",r),p=ee(e,"onBlur",r),m=ee(e,"onDestroy",r);s&&this.editor.on("beforeCreate",s),i&&this.editor.on("create",i),a&&this.editor.on("update",a),u&&this.editor.on("selectionUpdate",u),c&&this.editor.on("transaction",c),h&&this.editor.on("focus",h),p&&this.editor.on("blur",p),m&&this.editor.on("destroy",m)})}}class At{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ve(ee(this,"addOptions",{name:this.name}))),this.storage=ve(ee(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new At(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>hc(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new At({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ve(ee(t,"addOptions",{name:t.name})),t.storage=ve(ee(t,"addStorage",{name:t.name,options:t.options})),t}}function Bk(n,e,t){const{from:r,to:s}=e,{blockSeparator:i=`

`,textSerializers:a={}}=t||{};let u="";return n.nodesBetween(r,s,(c,h,p,m)=>{var y;c.isBlock&&h>r&&(u+=i);const w=a==null?void 0:a[c.type.name];if(w)return p&&(u+=w({node:c,pos:h,parent:p,index:m,range:e})),!1;c.isText&&(u+=(y=c==null?void 0:c.text)===null||y===void 0?void 0:y.slice(Math.max(r,h)-h,s-h))}),u}function zk(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const lM=At.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new bt({key:new nn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:s}=e,{ranges:i}=s,a=Math.min(...i.map(p=>p.$from.pos)),u=Math.max(...i.map(p=>p.$to.pos)),c=zk(t);return Bk(r,{from:a,to:u},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:c})}}})]}}),uM=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),cM=(n=!1)=>({commands:e})=>e.setContent("",n),dM=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:s}=r;return t&&s.forEach(({$from:i,$to:a})=>{n.doc.nodesBetween(i.pos,a.pos,(u,c)=>{if(u.type.isText)return;const{doc:h,mapping:p}=e,m=h.resolve(p.map(c)),y=h.resolve(p.map(c+u.nodeSize)),w=m.blockRange(y);if(!w)return;const k=zi(w);if(u.type.isTextblock){const{defaultType:x}=m.parent.contentMatchAt(m.index());e.setNodeMarkup(w.start,x)}(k||k===0)&&e.lift(w,k)})}),!0},hM=n=>e=>n(e),fM=()=>({state:n,dispatch:e})=>Ik(n,e),pM=(n,e)=>({editor:t,tr:r})=>{const{state:s}=t,i=s.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const a=r.mapping.map(e);return r.insert(a,i.content),r.setSelection(new pe(r.doc.resolve(Math.max(a-1,0)))),!0},mM=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const s=n.selection.$anchor;for(let i=s.depth;i>0;i-=1)if(s.node(i).type===r.type){if(e){const u=s.before(i),c=s.after(i);n.delete(u,c).scrollIntoView()}return!0}return!1},gM=n=>({tr:e,state:t,dispatch:r})=>{const s=dt(n,t.schema),i=e.selection.$anchor;for(let a=i.depth;a>0;a-=1)if(i.node(a).type===s){if(r){const c=i.before(a),h=i.after(a);e.delete(c,h).scrollIntoView()}return!0}return!1},yM=n=>({tr:e,dispatch:t})=>{const{from:r,to:s}=n;return t&&e.delete(r,s),!0},vM=()=>({state:n,dispatch:e})=>wp(n,e),wM=()=>({commands:n})=>n.keyboardShortcut("Enter"),kM=()=>({state:n,dispatch:e})=>MA(n,e);function xu(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(s=>t.strict?e[s]===n[s]:Cp(e[s])?e[s].test(n[s]):e[s]===n[s]):!0}function Uk(n,e,t={}){return n.find(r=>r.type===e&&xu(Object.fromEntries(Object.keys(t).map(s=>[s,r.attrs[s]])),t))}function Vv(n,e,t={}){return!!Uk(n,e,t)}function _p(n,e,t){var r;if(!n||!e)return;let s=n.parent.childAfter(n.parentOffset);if((!s.node||!s.node.marks.some(p=>p.type===e))&&(s=n.parent.childBefore(n.parentOffset)),!s.node||!s.node.marks.some(p=>p.type===e)||(t=t||((r=s.node.marks[0])===null||r===void 0?void 0:r.attrs),!Uk([...s.node.marks],e,t)))return;let a=s.index,u=n.start()+s.offset,c=a+1,h=u+s.node.nodeSize;for(;a>0&&Vv([...n.parent.child(a-1).marks],e,t);)a-=1,u-=n.parent.child(a).nodeSize;for(;c<n.parent.childCount&&Vv([...n.parent.child(c).marks],e,t);)h+=n.parent.child(c).nodeSize,c+=1;return{from:u,to:h}}function Zr(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const xM=(n,e={})=>({tr:t,state:r,dispatch:s})=>{const i=Zr(n,r.schema),{doc:a,selection:u}=t,{$from:c,from:h,to:p}=u;if(s){const m=_p(c,i,e);if(m&&m.from<=h&&m.to>=p){const y=pe.create(a,m.from,m.to);t.setSelection(y)}}return!0},SM=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function Fk(n){return n instanceof pe}function _s(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function Hk(n,e=null){if(!e)return null;const t=ge.atStart(n),r=ge.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const s=t.from,i=r.to;return e==="all"?pe.create(n,_s(0,s,i),_s(n.content.size,s,i)):pe.create(n,_s(e,s,i),_s(e,s,i))}function bM(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Tp(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const EM=(n=null,e={})=>({editor:t,view:r,tr:s,dispatch:i})=>{e={scrollIntoView:!0,...e};const a=()=>{(Tp()||bM())&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(i&&n===null&&!Fk(t.state.selection))return a(),!0;const u=Hk(s.doc,n)||t.state.selection,c=t.state.selection.eq(u);return i&&(c||s.setSelection(u),c&&s.storedMarks&&s.setStoredMarks(s.storedMarks),a()),!0},CM=(n,e)=>t=>n.every((r,s)=>e(r,{...t,index:s})),_M=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),Vk=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&Vk(r)}return n};function ql(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return Vk(t)}function ha(n,e,t){if(n instanceof Vr||n instanceof U)return n;t={slice:!0,parseOptions:{},...t};const r=typeof n=="object"&&n!==null,s=typeof n=="string";if(r)try{if(Array.isArray(n)&&n.length>0)return U.fromArray(n.map(u=>e.nodeFromJSON(u)));const a=e.nodeFromJSON(n);return t.errorOnInvalidContent&&a.check(),a}catch(i){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",i),ha("",e,t)}if(s){if(t.errorOnInvalidContent){let a=!1,u="";const c=new E1({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:h=>(a=!0,u=typeof h=="string"?h:h.outerHTML,null)}]}})});if(t.slice?Wr.fromSchema(c).parseSlice(ql(n),t.parseOptions):Wr.fromSchema(c).parse(ql(n),t.parseOptions),t.errorOnInvalidContent&&a)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${u}`)})}const i=Wr.fromSchema(e);return t.slice?i.parseSlice(ql(n),t.parseOptions).content:i.parse(ql(n),t.parseOptions)}return ha("",e,t)}function TM(n,e,t){const r=n.steps.length-1;if(r<e)return;const s=n.steps[r];if(!(s instanceof at||s instanceof ut))return;const i=n.mapping.maps[r];let a=0;i.forEach((u,c,h,p)=>{a===0&&(a=p)}),n.setSelection(ge.near(n.doc.resolve(a),t))}const OM=n=>!("type"in n),RM=(n,e,t)=>({tr:r,dispatch:s,editor:i})=>{var a;if(s){t={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let u;const c=b=>{i.emit("contentError",{editor:i,error:b,disableCollaboration:()=>{i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}})},h={preserveWhitespace:"full",...t.parseOptions};if(!t.errorOnInvalidContent&&!i.options.enableContentCheck&&i.options.emitContentError)try{ha(e,i.schema,{parseOptions:h,errorOnInvalidContent:!0})}catch(b){c(b)}try{u=ha(e,i.schema,{parseOptions:h,errorOnInvalidContent:(a=t.errorOnInvalidContent)!==null&&a!==void 0?a:i.options.enableContentCheck})}catch(b){return c(b),!1}let{from:p,to:m}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},y=!0,w=!0;if((OM(u)?u:[u]).forEach(b=>{b.check(),y=y?b.isText&&b.marks.length===0:!1,w=w?b.isBlock:!1}),p===m&&w){const{parent:b}=r.doc.resolve(p);b.isTextblock&&!b.type.spec.code&&!b.childCount&&(p-=1,m+=1)}let x;if(y){if(Array.isArray(e))x=e.map(b=>b.text||"").join("");else if(e instanceof U){let b="";e.forEach(C=>{C.text&&(b+=C.text)}),x=b}else typeof e=="object"&&e&&e.text?x=e.text:x=e;r.insertText(x,p,m)}else x=u,r.replaceWith(p,m,x);t.updateSelection&&TM(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:p,text:x}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:p,text:x})}return!0},NM=()=>({state:n,dispatch:e})=>RA(n,e),AM=()=>({state:n,dispatch:e})=>NA(n,e),MM=()=>({state:n,dispatch:e})=>_k(n,e),IM=()=>({state:n,dispatch:e})=>Nk(n,e),PM=()=>({state:n,dispatch:e,tr:t})=>{try{const r=nc(n.doc,n.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},DM=()=>({state:n,dispatch:e,tr:t})=>{try{const r=nc(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},LM=()=>({state:n,dispatch:e})=>TA(n,e),jM=()=>({state:n,dispatch:e})=>OA(n,e);function Wk(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function $M(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,s,i,a;for(let u=0;u<e.length-1;u+=1){const c=e[u];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))i=!0;else if(/^mod$/i.test(c))Tp()||Wk()?a=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${c}`)}return r&&(t=`Alt-${t}`),s&&(t=`Ctrl-${t}`),a&&(t=`Meta-${t}`),i&&(t=`Shift-${t}`),t}const BM=n=>({editor:e,view:t,tr:r,dispatch:s})=>{const i=$M(n).split(/-(?!$)/),a=i.find(h=>!["Alt","Ctrl","Meta","Shift"].includes(h)),u=new KeyboardEvent("keydown",{key:a==="Space"?" ":a,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),c=e.captureTransaction(()=>{t.someProp("handleKeyDown",h=>h(t,u))});return c==null||c.steps.forEach(h=>{const p=h.map(r.mapping);p&&s&&r.maybeStep(p)}),!0};function fa(n,e,t={}){const{from:r,to:s,empty:i}=n.selection,a=e?dt(e,n.schema):null,u=[];n.doc.nodesBetween(r,s,(m,y)=>{if(m.isText)return;const w=Math.max(r,y),k=Math.min(s,y+m.nodeSize);u.push({node:m,from:w,to:k})});const c=s-r,h=u.filter(m=>a?a.name===m.node.type.name:!0).filter(m=>xu(m.node.attrs,t,{strict:!1}));return i?!!h.length:h.reduce((m,y)=>m+y.to-y.from,0)>=c}const zM=(n,e={})=>({state:t,dispatch:r})=>{const s=dt(n,t.schema);return fa(t,s,e)?AA(t,r):!1},UM=()=>({state:n,dispatch:e})=>Pk(n,e),FM=n=>({state:e,dispatch:t})=>{const r=dt(n,e.schema);return HA(r)(e,t)},HM=()=>({state:n,dispatch:e})=>Mk(n,e);function fc(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function Wv(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,s)=>(t.includes(s)||(r[s]=n[s]),r),{})}const VM=(n,e)=>({tr:t,state:r,dispatch:s})=>{let i=null,a=null;const u=fc(typeof n=="string"?n:n.name,r.schema);return u?(u==="node"&&(i=dt(n,r.schema)),u==="mark"&&(a=Zr(n,r.schema)),s&&t.selection.ranges.forEach(c=>{r.doc.nodesBetween(c.$from.pos,c.$to.pos,(h,p)=>{i&&i===h.type&&t.setNodeMarkup(p,void 0,Wv(h.attrs,e)),a&&h.marks.length&&h.marks.forEach(m=>{a===m.type&&t.addMark(p,p+h.nodeSize,a.create(Wv(m.attrs,e)))})})}),!0):!1},WM=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),KM=()=>({tr:n,dispatch:e})=>{if(e){const t=new tn(n.doc);n.setSelection(t)}return!0},qM=()=>({state:n,dispatch:e})=>Ok(n,e),GM=()=>({state:n,dispatch:e})=>Ak(n,e),JM=()=>({state:n,dispatch:e})=>DA(n,e),YM=()=>({state:n,dispatch:e})=>$A(n,e),QM=()=>({state:n,dispatch:e})=>jA(n,e);function If(n,e,t={},r={}){return ha(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:r.errorOnInvalidContent})}const XM=(n,e=!1,t={},r={})=>({editor:s,tr:i,dispatch:a,commands:u})=>{var c,h;const{doc:p}=i;if(t.preserveWhitespace!=="full"){const m=If(n,s.schema,t,{errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:s.options.enableContentCheck});return a&&i.replaceWith(0,p.content.size,m).setMeta("preventUpdate",!e),!0}return a&&i.setMeta("preventUpdate",!e),u.insertContentAt({from:0,to:p.content.size},n,{parseOptions:t,errorOnInvalidContent:(h=r.errorOnInvalidContent)!==null&&h!==void 0?h:s.options.enableContentCheck})};function Kk(n,e){const t=Zr(e,n.schema),{from:r,to:s,empty:i}=n.selection,a=[];i?(n.storedMarks&&a.push(...n.storedMarks),a.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,s,c=>{a.push(...c.marks)});const u=a.find(c=>c.type.name===t.name);return u?{...u.attrs}:{}}function ZM(n,e){const t=new z1(n);return e.forEach(r=>{r.steps.forEach(s=>{t.step(s)})}),t}function eI(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function tI(n,e,t){const r=[];return n.nodesBetween(e.from,e.to,(s,i)=>{t(s)&&r.push({node:s,pos:i})}),r}function nI(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function Op(n){return e=>nI(e.$from,n)}function rI(n,e){const t={from:0,to:n.content.size};return Bk(n,t,e)}function sI(n,e){const t=dt(e,n.schema),{from:r,to:s}=n.selection,i=[];n.doc.nodesBetween(r,s,u=>{i.push(u)});const a=i.reverse().find(u=>u.type.name===t.name);return a?{...a.attrs}:{}}function qk(n,e){const t=fc(typeof e=="string"?e:e.name,n.schema);return t==="node"?sI(n,e):t==="mark"?Kk(n,e):{}}function iI(n,e=JSON.stringify){const t={};return n.filter(r=>{const s=e(r);return Object.prototype.hasOwnProperty.call(t,s)?!1:t[s]=!0})}function oI(n){const e=iI(n);return e.length===1?e:e.filter((t,r)=>!e.filter((i,a)=>a!==r).some(i=>t.oldRange.from>=i.oldRange.from&&t.oldRange.to<=i.oldRange.to&&t.newRange.from>=i.newRange.from&&t.newRange.to<=i.newRange.to))}function aI(n){const{mapping:e,steps:t}=n,r=[];return e.maps.forEach((s,i)=>{const a=[];if(s.ranges.length)s.forEach((u,c)=>{a.push({from:u,to:c})});else{const{from:u,to:c}=t[i];if(u===void 0||c===void 0)return;a.push({from:u,to:c})}a.forEach(({from:u,to:c})=>{const h=e.slice(i).map(u,-1),p=e.slice(i).map(c),m=e.invert().map(h,-1),y=e.invert().map(p);r.push({oldRange:{from:m,to:y},newRange:{from:h,to:p}})})}),oI(r)}function Rp(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(s=>{const i=t.resolve(n),a=_p(i,s.type);a&&r.push({mark:s,...a})}):t.nodesBetween(n,e,(s,i)=>{!s||(s==null?void 0:s.nodeSize)===void 0||r.push(...s.marks.map(a=>({from:i,to:i+s.nodeSize,mark:a})))}),r}function ru(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const s=n.find(i=>i.type===e&&i.name===r);return s?s.attribute.keepOnSplit:!1}))}function Pf(n,e,t={}){const{empty:r,ranges:s}=n.selection,i=e?Zr(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(m=>i?i.name===m.type.name:!0).find(m=>xu(m.attrs,t,{strict:!1}));let a=0;const u=[];if(s.forEach(({$from:m,$to:y})=>{const w=m.pos,k=y.pos;n.doc.nodesBetween(w,k,(x,b)=>{if(!x.isText&&!x.marks.length)return;const C=Math.max(w,b),A=Math.min(k,b+x.nodeSize),O=A-C;a+=O,u.push(...x.marks.map(j=>({mark:j,from:C,to:A})))})}),a===0)return!1;const c=u.filter(m=>i?i.name===m.mark.type.name:!0).filter(m=>xu(m.mark.attrs,t,{strict:!1})).reduce((m,y)=>m+y.to-y.from,0),h=u.filter(m=>i?m.mark.type!==i&&m.mark.type.excludes(i):!0).reduce((m,y)=>m+y.to-y.from,0);return(c>0?c+h:c)>=a}function lI(n,e,t={}){if(!e)return fa(n,null,t)||Pf(n,null,t);const r=fc(e,n.schema);return r==="node"?fa(n,e,t):r==="mark"?Pf(n,e,t):!1}function Kv(n,e){const{nodeExtensions:t}=cc(e),r=t.find(a=>a.name===n);if(!r)return!1;const s={name:r.name,options:r.options,storage:r.storage},i=ve(ee(r,"group",s));return typeof i!="string"?!1:i.split(" ").includes("list")}function Np(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var r;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((r=n.text)!==null&&r!==void 0?r:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let s=!0;return n.content.forEach(i=>{s!==!1&&(Np(i,{ignoreWhitespace:t,checkChildren:e})||(s=!1))}),s}return!1}function uI(n){return n instanceof ie}function cI(n,e,t){var r;const{selection:s}=e;let i=null;if(Fk(s)&&(i=s.$cursor),i){const u=(r=n.storedMarks)!==null&&r!==void 0?r:i.marks();return!!t.isInSet(u)||!u.some(c=>c.type.excludes(t))}const{ranges:a}=s;return a.some(({$from:u,$to:c})=>{let h=u.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(u.pos,c.pos,(p,m,y)=>{if(h)return!1;if(p.isInline){const w=!y||y.type.allowsMarkType(t),k=!!t.isInSet(p.marks)||!p.marks.some(x=>x.type.excludes(t));h=w&&k}return!h}),h})}const dI=(n,e={})=>({tr:t,state:r,dispatch:s})=>{const{selection:i}=t,{empty:a,ranges:u}=i,c=Zr(n,r.schema);if(s)if(a){const h=Kk(r,c);t.addStoredMark(c.create({...h,...e}))}else u.forEach(h=>{const p=h.$from.pos,m=h.$to.pos;r.doc.nodesBetween(p,m,(y,w)=>{const k=Math.max(w,p),x=Math.min(w+y.nodeSize,m);y.marks.find(C=>C.type===c)?y.marks.forEach(C=>{c===C.type&&t.addMark(k,x,c.create({...C.attrs,...e}))}):t.addMark(k,x,c.create(e))})});return cI(r,t,c)},hI=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),fI=(n,e={})=>({state:t,dispatch:r,chain:s})=>{const i=dt(n,t.schema);let a;return t.selection.$anchor.sameParent(t.selection.$head)&&(a=t.selection.$anchor.parent.attrs),i.isTextblock?s().command(({commands:u})=>zv(i,{...a,...e})(t)?!0:u.clearNodes()).command(({state:u})=>zv(i,{...a,...e})(u,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},pI=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,s=_s(n,0,r.content.size),i=ie.create(r,s);e.setSelection(i)}return!0},mI=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:s,to:i}=typeof n=="number"?{from:n,to:n}:n,a=pe.atStart(r).from,u=pe.atEnd(r).to,c=_s(s,a,u),h=_s(i,a,u),p=pe.create(r,c,h);e.setSelection(p)}return!0},gI=n=>({state:e,dispatch:t})=>{const r=dt(n,e.schema);return KA(r)(e,t)};function qv(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(s=>e==null?void 0:e.includes(s.type.name));n.tr.ensureMarks(r)}}const yI=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:s})=>{const{selection:i,doc:a}=e,{$from:u,$to:c}=i,h=s.extensionManager.attributes,p=ru(h,u.node().type.name,u.node().attrs);if(i instanceof ie&&i.node.isBlock)return!u.parentOffset||!or(a,u.pos)?!1:(r&&(n&&qv(t,s.extensionManager.splittableMarks),e.split(u.pos).scrollIntoView()),!0);if(!u.parent.isBlock)return!1;const m=c.parentOffset===c.parent.content.size,y=u.depth===0?void 0:eI(u.node(-1).contentMatchAt(u.indexAfter(-1)));let w=m&&y?[{type:y,attrs:p}]:void 0,k=or(e.doc,e.mapping.map(u.pos),1,w);if(!w&&!k&&or(e.doc,e.mapping.map(u.pos),1,y?[{type:y}]:void 0)&&(k=!0,w=y?[{type:y,attrs:p}]:void 0),r){if(k&&(i instanceof pe&&e.deleteSelection(),e.split(e.mapping.map(u.pos),1,w),y&&!m&&!u.parentOffset&&u.parent.type!==y)){const x=e.mapping.map(u.before()),b=e.doc.resolve(x);u.node(-1).canReplaceWith(b.index(),b.index()+1,y)&&e.setNodeMarkup(e.mapping.map(u.before()),y)}n&&qv(t,s.extensionManager.splittableMarks),e.scrollIntoView()}return k},vI=(n,e={})=>({tr:t,state:r,dispatch:s,editor:i})=>{var a;const u=dt(n,r.schema),{$from:c,$to:h}=r.selection,p=r.selection.node;if(p&&p.isBlock||c.depth<2||!c.sameParent(h))return!1;const m=c.node(-1);if(m.type!==u)return!1;const y=i.extensionManager.attributes;if(c.parent.content.size===0&&c.node(-1).childCount===c.indexAfter(-1)){if(c.depth===2||c.node(-3).type!==u||c.index(-2)!==c.node(-2).childCount-1)return!1;if(s){let C=U.empty;const A=c.index(-1)?1:c.index(-2)?2:3;for(let q=c.depth-A;q>=c.depth-3;q-=1)C=U.from(c.node(q).copy(C));const O=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,j={...ru(y,c.node().type.name,c.node().attrs),...e},F=((a=u.contentMatch.defaultType)===null||a===void 0?void 0:a.createAndFill(j))||void 0;C=C.append(U.from(u.createAndFill(null,F)||void 0));const W=c.before(c.depth-(A-1));t.replace(W,c.after(-O),new Y(C,4-A,0));let L=-1;t.doc.nodesBetween(W,t.doc.content.size,(q,he)=>{if(L>-1)return!1;q.isTextblock&&q.content.size===0&&(L=he+1)}),L>-1&&t.setSelection(pe.near(t.doc.resolve(L))),t.scrollIntoView()}return!0}const w=h.pos===c.end()?m.contentMatchAt(0).defaultType:null,k={...ru(y,m.type.name,m.attrs),...e},x={...ru(y,c.node().type.name,c.node().attrs),...e};t.delete(c.pos,h.pos);const b=w?[{type:u,attrs:k},{type:w,attrs:x}]:[{type:u,attrs:k}];if(!or(t.doc,c.pos,2))return!1;if(s){const{selection:C,storedMarks:A}=r,{splittableMarks:O}=i.extensionManager,j=A||C.$to.parentOffset&&C.$from.marks();if(t.split(c.pos,2,b).scrollIntoView(),!j||!s)return!0;const F=j.filter(W=>O.includes(W.type.name));t.ensureMarks(F)}return!0},Fh=(n,e)=>{const t=Op(a=>a.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const s=n.doc.nodeAt(r);return t.node.type===(s==null?void 0:s.type)&&Qr(n.doc,t.pos)&&n.join(t.pos),!0},Hh=(n,e)=>{const t=Op(a=>a.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const s=n.doc.nodeAt(r);return t.node.type===(s==null?void 0:s.type)&&Qr(n.doc,r)&&n.join(r),!0},wI=(n,e,t,r={})=>({editor:s,tr:i,state:a,dispatch:u,chain:c,commands:h,can:p})=>{const{extensions:m,splittableMarks:y}=s.extensionManager,w=dt(n,a.schema),k=dt(e,a.schema),{selection:x,storedMarks:b}=a,{$from:C,$to:A}=x,O=C.blockRange(A),j=b||x.$to.parentOffset&&x.$from.marks();if(!O)return!1;const F=Op(W=>Kv(W.type.name,m))(x);if(O.depth>=1&&F&&O.depth-F.depth<=1){if(F.node.type===w)return h.liftListItem(k);if(Kv(F.node.type.name,m)&&w.validContent(F.node.content)&&u)return c().command(()=>(i.setNodeMarkup(F.pos,w),!0)).command(()=>Fh(i,w)).command(()=>Hh(i,w)).run()}return!t||!j||!u?c().command(()=>p().wrapInList(w,r)?!0:h.clearNodes()).wrapInList(w,r).command(()=>Fh(i,w)).command(()=>Hh(i,w)).run():c().command(()=>{const W=p().wrapInList(w,r),L=j.filter(q=>y.includes(q.type.name));return i.ensureMarks(L),W?!0:h.clearNodes()}).wrapInList(w,r).command(()=>Fh(i,w)).command(()=>Hh(i,w)).run()},kI=(n,e={},t={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:i=!1}=t,a=Zr(n,r.schema);return Pf(r,a,e)?s.unsetMark(a,{extendEmptyMarkRange:i}):s.setMark(a,e)},xI=(n,e,t={})=>({state:r,commands:s})=>{const i=dt(n,r.schema),a=dt(e,r.schema),u=fa(r,i,t);let c;return r.selection.$anchor.sameParent(r.selection.$head)&&(c=r.selection.$anchor.parent.attrs),u?s.setNode(a,c):s.setNode(i,{...c,...t})},SI=(n,e={})=>({state:t,commands:r})=>{const s=dt(n,t.schema);return fa(t,s,e)?r.lift(s):r.wrapIn(s,e)},bI=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const s=t[r];let i;if(s.spec.isInputRules&&(i=s.getState(n))){if(e){const a=n.tr,u=i.transform;for(let c=u.steps.length-1;c>=0;c-=1)a.step(u.steps[c].invert(u.docs[c]));if(i.text){const c=a.doc.resolve(i.from).marks();a.replaceWith(i.from,i.to,n.schema.text(i.text,c))}else a.delete(i.from,i.to)}return!0}}return!1},EI=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:s}=t;return r||e&&s.forEach(i=>{n.removeMark(i.$from.pos,i.$to.pos)}),!0},CI=(n,e={})=>({tr:t,state:r,dispatch:s})=>{var i;const{extendEmptyMarkRange:a=!1}=e,{selection:u}=t,c=Zr(n,r.schema),{$from:h,empty:p,ranges:m}=u;if(!s)return!0;if(p&&a){let{from:y,to:w}=u;const k=(i=h.marks().find(b=>b.type===c))===null||i===void 0?void 0:i.attrs,x=_p(h,c,k);x&&(y=x.from,w=x.to),t.removeMark(y,w,c)}else m.forEach(y=>{t.removeMark(y.$from.pos,y.$to.pos,c)});return t.removeStoredMark(c),!0},_I=(n,e={})=>({tr:t,state:r,dispatch:s})=>{let i=null,a=null;const u=fc(typeof n=="string"?n:n.name,r.schema);return u?(u==="node"&&(i=dt(n,r.schema)),u==="mark"&&(a=Zr(n,r.schema)),s&&t.selection.ranges.forEach(c=>{const h=c.$from.pos,p=c.$to.pos;let m,y,w,k;t.selection.empty?r.doc.nodesBetween(h,p,(x,b)=>{i&&i===x.type&&(w=Math.max(b,h),k=Math.min(b+x.nodeSize,p),m=b,y=x)}):r.doc.nodesBetween(h,p,(x,b)=>{b<h&&i&&i===x.type&&(w=Math.max(b,h),k=Math.min(b+x.nodeSize,p),m=b,y=x),b>=h&&b<=p&&(i&&i===x.type&&t.setNodeMarkup(b,void 0,{...x.attrs,...e}),a&&x.marks.length&&x.marks.forEach(C=>{if(a===C.type){const A=Math.max(b,h),O=Math.min(b+x.nodeSize,p);t.addMark(A,O,a.create({...C.attrs,...e}))}}))}),y&&(m!==void 0&&t.setNodeMarkup(m,void 0,{...y.attrs,...e}),a&&y.marks.length&&y.marks.forEach(x=>{a===x.type&&t.addMark(w,k,a.create({...x.attrs,...e}))}))}),!0):!1},TI=(n,e={})=>({state:t,dispatch:r})=>{const s=dt(n,t.schema);return BA(s,e)(t,r)},OI=(n,e={})=>({state:t,dispatch:r})=>{const s=dt(n,t.schema);return zA(s,e)(t,r)};var RI=Object.freeze({__proto__:null,blur:uM,clearContent:cM,clearNodes:dM,command:hM,createParagraphNear:fM,cut:pM,deleteCurrentNode:mM,deleteNode:gM,deleteRange:yM,deleteSelection:vM,enter:wM,exitCode:kM,extendMarkRange:xM,first:SM,focus:EM,forEach:CM,insertContent:_M,insertContentAt:RM,joinBackward:MM,joinDown:AM,joinForward:IM,joinItemBackward:PM,joinItemForward:DM,joinTextblockBackward:LM,joinTextblockForward:jM,joinUp:NM,keyboardShortcut:BM,lift:zM,liftEmptyBlock:UM,liftListItem:FM,newlineInCode:HM,resetAttributes:VM,scrollIntoView:WM,selectAll:KM,selectNodeBackward:qM,selectNodeForward:GM,selectParentNode:JM,selectTextblockEnd:YM,selectTextblockStart:QM,setContent:XM,setMark:dI,setMeta:hI,setNode:fI,setNodeSelection:pI,setTextSelection:mI,sinkListItem:gI,splitBlock:yI,splitListItem:vI,toggleList:wI,toggleMark:kI,toggleNode:xI,toggleWrap:SI,undoInputRule:bI,unsetAllMarks:EI,unsetMark:CI,updateAttributes:_I,wrapIn:TI,wrapInList:OI});const NI=At.create({name:"commands",addCommands(){return{...RI}}}),AI=At.create({name:"drop",addProseMirrorPlugins(){return[new bt({key:new nn("tiptapDrop"),props:{handleDrop:(n,e,t,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:r})}}})]}}),MI=At.create({name:"editable",addProseMirrorPlugins(){return[new bt({key:new nn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),II=new nn("focusEvents"),PI=At.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new bt({key:II,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),DI=At.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:a})=>[()=>a.undoInputRule(),()=>a.command(({tr:u})=>{const{selection:c,doc:h}=u,{empty:p,$anchor:m}=c,{pos:y,parent:w}=m,k=m.parent.isTextblock&&y>0?u.doc.resolve(y-1):m,x=k.parent.type.spec.isolating,b=m.pos-m.parentOffset,C=x&&k.parent.childCount===1?b===m.pos:ge.atStart(h).from===y;return!p||!w.type.isTextblock||w.textContent.length||!C||C&&m.parent.type.name==="paragraph"?!1:a.clearNodes()}),()=>a.deleteSelection(),()=>a.joinBackward(),()=>a.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:a})=>[()=>a.deleteSelection(),()=>a.deleteCurrentNode(),()=>a.joinForward(),()=>a.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:a})=>[()=>a.newlineInCode(),()=>a.createParagraphNear(),()=>a.liftEmptyBlock(),()=>a.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s={...r},i={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Tp()||Wk()?i:s},addProseMirrorPlugins(){return[new bt({key:new nn("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(x=>x.getMeta("composition")))return;const r=n.some(x=>x.docChanged)&&!e.doc.eq(t.doc),s=n.some(x=>x.getMeta("preventClearDocument"));if(!r||s)return;const{empty:i,from:a,to:u}=e.selection,c=ge.atStart(e.doc).from,h=ge.atEnd(e.doc).to;if(i||!(a===c&&u===h)||!Np(t.doc))return;const y=t.tr,w=lc({state:t,transaction:y}),{commands:k}=new uc({editor:this.editor,state:w});if(k.clearNodes(),!!y.steps.length)return y}})]}}),LI=At.create({name:"paste",addProseMirrorPlugins(){return[new bt({key:new nn("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),jI=At.create({name:"tabindex",addProseMirrorPlugins(){return[new bt({key:new nn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class xs{get name(){return this.node.type.name}constructor(e,t,r=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=s}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new xs(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new xs(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new xs(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,r)=>{const s=t.isBlock&&!t.isTextblock,i=t.isAtom&&!t.isText,a=this.pos+r+(i?0:1);if(a<0||a>this.resolvedPos.doc.nodeSize-2)return;const u=this.resolvedPos.doc.resolve(a);if(!s&&u.depth<=this.depth)return;const c=new xs(u,this.editor,s,s?t:null);s&&(c.actualDepth=this.depth+1),e.push(new xs(u,this.editor,s,s?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,s=this.parent;for(;s&&!r;){if(s.node.type.name===e)if(Object.keys(t).length>0){const i=s.node.attrs,a=Object.keys(t);for(let u=0;u<a.length;u+=1){const c=a[u];if(i[c]!==t[c])break}}else r=s;s=s.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let s=[];if(!this.children||this.children.length===0)return s;const i=Object.keys(t);return this.children.forEach(a=>{r&&s.length>0||(a.node.type.name===e&&i.every(c=>t[c]===a.node.attrs[c])&&s.push(a),!(r&&s.length>0)&&(s=s.concat(a.querySelectorAll(e,t,r))))}),s}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}const $I=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function BI(n,e,t){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute("data-tiptap-style",""),s.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(s),s}let zI=class extends qA{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:r,moved:s})=>this.options.onDrop(t,r,s)),this.on("paste",({event:t,slice:r})=>this.options.onPaste(t,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=BI($I,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const r=$k(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],s=this.state.reconfigure({plugins:r});return this.view.updateState(s),s}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let r=t;if([].concat(e).forEach(i=>{const a=typeof i=="string"?`${i}$`:i.key;r=r.filter(u=>!u.key.startsWith(a))}),t.length===r.length)return;const s=this.state.reconfigure({plugins:r});return this.view.updateState(s),s}createExtensionManager(){var e,t;const s=[...this.options.enableCoreExtensions?[MI,lM.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),NI,PI,DI,jI,AI,LI].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new Oi(s,this)}createCommandManager(){this.commandManager=new uc({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=If(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(a){if(!(a instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(a.message))throw a;this.emit("contentError",{editor:this,error:a,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(u=>u.name!=="collaboration"),this.createExtensionManager()}}),t=If(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=Hk(t,this.options.autofocus);this.view=new bk(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Ti.create({doc:t,selection:r||void 0})});const s=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(s),this.createNodeViews(),this.prependClass();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(a=>{var u;return(u=this.capturedTransaction)===null||u===void 0?void 0:u.step(a)});return}const t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const s=e.getMeta("focus"),i=e.getMeta("blur");s&&this.emit("focus",{editor:this,event:s.event,transaction:e}),i&&this.emit("blur",{editor:this,event:i.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return qk(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,s=typeof e=="string"?t:e;return lI(this.state,r,s)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Ep(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return rI(this.state.doc,{blockSeparator:t,textSerializers:{...zk(this.schema),...r}})}get isEmpty(){return Np(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,t))||null}$nodes(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new xs(t,this)}get $doc(){return this.$pos(0)}};function Li(n){return new dc({find:n.find,handler:({state:e,range:t,match:r})=>{const s=ve(n.getAttributes,void 0,r);if(s===!1||s===null)return null;const{tr:i}=e,a=r[r.length-1],u=r[0];if(a){const c=u.search(/\S/),h=t.from+u.indexOf(a),p=h+a.length;if(Rp(t.from,t.to,e.doc).filter(w=>w.mark.type.excluded.find(x=>x===n.type&&x!==w.mark.type)).filter(w=>w.to>h).length)return null;p<t.to&&i.delete(p,t.to),h>t.from&&i.delete(t.from+c,h);const y=t.from+c+a.length;i.addMark(t.from+c,y,n.type.create(s||{})),i.removeStoredMark(n.type)}}})}function UI(n){return new dc({find:n.find,handler:({state:e,range:t,match:r})=>{const s=ve(n.getAttributes,void 0,r)||{},{tr:i}=e,a=t.from;let u=t.to;const c=n.type.create(s);if(r[1]){const h=r[0].lastIndexOf(r[1]);let p=a+h;p>u?p=u:u=p+r[1].length;const m=r[0][r[0].length-1];i.insertText(m,a+r[0].length-1),i.replaceWith(p,u,c)}else if(r[0]){const h=n.type.isInline?a:a-1;i.insert(h,n.type.create(s)).delete(i.mapping.map(a),i.mapping.map(u))}i.scrollIntoView()}})}function Df(n){return new dc({find:n.find,handler:({state:e,range:t,match:r})=>{const s=e.doc.resolve(t.from),i=ve(n.getAttributes,void 0,r)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,i)}})}function pa(n){return new dc({find:n.find,handler:({state:e,range:t,match:r,chain:s})=>{const i=ve(n.getAttributes,void 0,r)||{},a=e.tr.delete(t.from,t.to),c=a.doc.resolve(t.from).blockRange(),h=c&&lp(c,n.type,i);if(!h)return null;if(a.wrap(c,h),n.keepMarks&&n.editor){const{selection:m,storedMarks:y}=e,{splittableMarks:w}=n.editor.extensionManager,k=y||m.$to.parentOffset&&m.$from.marks();if(k){const x=k.filter(b=>w.includes(b.type.name));a.ensureMarks(x)}}if(n.keepAttributes){const m=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(m,i).run()}const p=a.doc.resolve(t.from-1).nodeBefore;p&&p.type===n.type&&Qr(a.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,p))&&a.join(t.from-1)}})}class Wt{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ve(ee(this,"addOptions",{name:this.name}))),this.storage=ve(ee(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Wt(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>hc(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Wt(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ve(ee(t,"addOptions",{name:t.name})),t.storage=ve(ee(t,"addStorage",{name:t.name,options:t.options})),t}}function $s(n){return new nM({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:s})=>{const i=ve(n.getAttributes,void 0,r,s);if(i===!1||i===null)return null;const{tr:a}=e,u=r[r.length-1],c=r[0];let h=t.to;if(u){const p=c.search(/\S/),m=t.from+c.indexOf(u),y=m+u.length;if(Rp(t.from,t.to,e.doc).filter(k=>k.mark.type.excluded.find(b=>b===n.type&&b!==k.mark.type)).filter(k=>k.to>m).length)return null;y<t.to&&a.delete(y,t.to),m>t.from&&a.delete(t.from+p,m),h=t.from+p+u.length,a.addMark(t.from+p,h,n.type.create(i||{})),a.removeStoredMark(n.type)}}})}function FI(n,e){const{selection:t}=n,{$from:r}=t;if(t instanceof ie){const i=r.index();return r.parent.canReplaceWith(i,i+1,e)}let s=r.depth;for(;s>=0;){const i=r.index(s);if(r.node(s).contentMatchAt(i).matchType(e))return!0;s-=1}return!1}function HI(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Gk={exports:{}},Vh={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gv;function VI(){if(Gv)return Vh;Gv=1;var n=kt;function e(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,s=n.useEffect,i=n.useLayoutEffect,a=n.useDebugValue;function u(m,y){var w=y(),k=r({inst:{value:w,getSnapshot:y}}),x=k[0].inst,b=k[1];return i(function(){x.value=w,x.getSnapshot=y,c(x)&&b({inst:x})},[m,w,y]),s(function(){return c(x)&&b({inst:x}),m(function(){c(x)&&b({inst:x})})},[m]),a(w),w}function c(m){var y=m.getSnapshot;m=m.value;try{var w=y();return!t(m,w)}catch{return!0}}function h(m,y){return y()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return Vh.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:p,Vh}Gk.exports=VI();var Ap=Gk.exports;const WI=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},KI=({contentComponent:n})=>{const e=Ap.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return kt.createElement(kt.Fragment,null,Object.values(e))};function qI(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,r){e={...e,[t]:GE.createPortal(r.reactElement,r.element,t)},n.forEach(s=>s())},removeRenderer(t){const r={...e};delete r[t],e=r,n.forEach(s=>s())}}}class GI extends kt.Component{constructor(e){var t;super(e),this.editorContentRef=kt.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((t=e.editor)===null||t===void 0)&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=qI(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:e,innerRef:t,...r}=this.props;return kt.createElement(kt.Fragment,null,kt.createElement("div",{ref:WI(t,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&kt.createElement(KI,{contentComponent:e.contentComponent}))}}const JI=M.forwardRef((n,e)=>{const t=kt.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return kt.createElement(GI,{key:t,innerRef:e,...n})}),YI=kt.memo(JI);var QI=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,s,i;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(s=r;s--!==0;)if(!n(e[s],t[s]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(s of e.entries())if(!t.has(s[0]))return!1;for(s of e.entries())if(!n(s[1],t.get(s[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(s of e.entries())if(!t.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(s=r;s--!==0;)if(e[s]!==t[s])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[s]))return!1;for(s=r;s--!==0;){var a=i[s];if(!(a==="_owner"&&e.$$typeof)&&!n(e[a],t[a]))return!1}return!0}return e!==e&&t!==t},XI=HI(QI),Jk={exports:{}},Wh={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jv;function ZI(){if(Jv)return Wh;Jv=1;var n=kt,e=Ap;function t(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var r=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,i=n.useRef,a=n.useEffect,u=n.useMemo,c=n.useDebugValue;return Wh.useSyncExternalStoreWithSelector=function(h,p,m,y,w){var k=i(null);if(k.current===null){var x={hasValue:!1,value:null};k.current=x}else x=k.current;k=u(function(){function C(W){if(!A){if(A=!0,O=W,W=y(W),w!==void 0&&x.hasValue){var L=x.value;if(w(L,W))return j=L}return j=W}if(L=j,r(O,W))return L;var q=y(W);return w!==void 0&&w(L,q)?L:(O=W,j=q)}var A=!1,O,j,F=m===void 0?null:m;return[function(){return C(p())},F===null?void 0:function(){return C(F())}]},[p,m,y,w]);var b=s(h,k[0],k[1]);return a(function(){x.hasValue=!0,x.value=b},[b]),c(b),b},Wh}Jk.exports=ZI();var e2=Jk.exports;const t2=typeof window<"u"?M.useLayoutEffect:M.useEffect;class n2{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(s=>s())},r=this.editor;return r.on("transaction",t),()=>{r.off("transaction",t)}}}}function r2(n){var e;const[t]=M.useState(()=>new n2(n.editor)),r=e2.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!==null&&e!==void 0?e:XI);return t2(()=>t.watch(n.editor),[n.editor,t]),M.useDebugValue(r),r}const s2=!1,Lf=typeof window>"u",i2=Lf||!!(typeof window<"u"&&window.next);class Mp{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Lf||i2?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var s,i;return(i=(s=this.options.current).onBeforeCreate)===null||i===void 0?void 0:i.call(s,...r)},onBlur:(...r)=>{var s,i;return(i=(s=this.options.current).onBlur)===null||i===void 0?void 0:i.call(s,...r)},onCreate:(...r)=>{var s,i;return(i=(s=this.options.current).onCreate)===null||i===void 0?void 0:i.call(s,...r)},onDestroy:(...r)=>{var s,i;return(i=(s=this.options.current).onDestroy)===null||i===void 0?void 0:i.call(s,...r)},onFocus:(...r)=>{var s,i;return(i=(s=this.options.current).onFocus)===null||i===void 0?void 0:i.call(s,...r)},onSelectionUpdate:(...r)=>{var s,i;return(i=(s=this.options.current).onSelectionUpdate)===null||i===void 0?void 0:i.call(s,...r)},onTransaction:(...r)=>{var s,i;return(i=(s=this.options.current).onTransaction)===null||i===void 0?void 0:i.call(s,...r)},onUpdate:(...r)=>{var s,i;return(i=(s=this.options.current).onUpdate)===null||i===void 0?void 0:i.call(s,...r)},onContentError:(...r)=>{var s,i;return(i=(s=this.options.current).onContentError)===null||i===void 0?void 0:i.call(s,...r)},onDrop:(...r)=>{var s,i;return(i=(s=this.options.current).onDrop)===null||i===void 0?void 0:i.call(s,...r)},onPaste:(...r)=>{var s,i;return(i=(s=this.options.current).onPaste)===null||i===void 0?void 0:i.call(s,...r)}};return new zI(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((s,i)=>{var a;return s===((a=t.extensions)===null||a===void 0?void 0:a[i])}):e[r]===t[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?Mp.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,s)=>r===e[s]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function o2(n={},e=[]){const t=M.useRef(n);t.current=n;const[r]=M.useState(()=>new Mp(t)),s=Ap.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return M.useDebugValue(s),M.useEffect(r.onRender(e)),r2({editor:s,selector:({transactionNumber:i})=>n.shouldRerenderOnTransaction===!1?null:n.immediatelyRender&&i===0?0:i+1}),s}const a2=M.createContext({editor:null});a2.Consumer;const l2=M.createContext({onDragStart:void 0}),u2=()=>M.useContext(l2);kt.forwardRef((n,e)=>{const{onDragStart:t}=u2(),r=n.as||"div";return kt.createElement(r,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});const c2=/^\s*>\s$/,d2=Wt.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",ht(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[pa({find:c2,type:this.type})]}}),h2=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,f2=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,p2=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,m2=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,g2=Fn.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",ht(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Li({find:h2,type:this.type}),Li({find:p2,type:this.type})]},addPasteRules(){return[$s({find:f2,type:this.type}),$s({find:m2,type:this.type})]}}),y2="listItem",Yv="textStyle",Qv=/^\s*([-+*])\s$/,v2=Wt.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",ht(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(y2,this.editor.getAttributes(Yv)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=pa({find:Qv,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=pa({find:Qv,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Yv),editor:this.editor})),[n]}}),w2=/(^|[^`])`([^`]+)`(?!`)/,k2=/(^|[^`])`([^`]+)`(?!`)/g,x2=Fn.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",ht(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Li({find:w2,type:this.type})]},addPasteRules(){return[$s({find:k2,type:this.type})]}}),S2=/^```([a-z]+)?[\s\n]$/,b2=/^~~~([a-z]+)?[\s\n]$/,E2=Wt.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,i=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(a=>a.startsWith(t)).map(a=>a.replace(t,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",ht(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:s}=t;if(!s||r.parent.type!==this.type)return!1;const i=r.parentOffset===r.parent.nodeSize-2,a=r.parent.textContent.endsWith(`

`);return!i||!a?!1:n.chain().command(({tr:u})=>(u.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:s,empty:i}=t;if(!i||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const u=s.after();return u===void 0?!1:r.nodeAt(u)?n.commands.command(({tr:h})=>(h.setSelection(ge.near(r.resolve(u))),!0)):n.commands.exitCode()}}},addInputRules(){return[Df({find:S2,type:this.type,getAttributes:n=>({language:n[1]})}),Df({find:b2,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new bt({key:new nn("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,i=s==null?void 0:s.mode;if(!t||!i)return!1;const{tr:a,schema:u}=n.state,c=u.text(t.replace(/\r\n?/g,`
`));return a.replaceSelectionWith(this.type.create({language:i},c)),a.selection.$from.parent.type!==this.type&&a.setSelection(pe.near(a.doc.resolve(Math.max(0,a.selection.from-2)))),a.setMeta("paste",!0),n.dispatch(a),!0}}})]}}),C2=Wt.create({name:"doc",topNode:!0,content:"block+"});function _2(n={}){return new bt({view(e){return new T2(e,n)}})}class T2{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let i=a=>{this[s](a)};return e.dom.addEventListener(s,i),{name:s,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r,s=this.editorView.dom,i=s.getBoundingClientRect(),a=i.width/s.offsetWidth,u=i.height/s.offsetHeight;if(t){let m=e.nodeBefore,y=e.nodeAfter;if(m||y){let w=this.editorView.nodeDOM(this.cursorPos-(m?m.nodeSize:0));if(w){let k=w.getBoundingClientRect(),x=m?k.bottom:k.top;m&&y&&(x=(x+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let b=this.width/2*u;r={left:k.left,right:k.right,top:x-b,bottom:x+b}}}}if(!r){let m=this.editorView.coordsAtPos(this.cursorPos),y=this.width/2*a;r={left:m.left-y,right:m.left+y,top:m.top,bottom:m.bottom}}let c=this.editorView.dom.offsetParent;this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let h,p;if(!c||c==document.body&&getComputedStyle(c).position=="static")h=-pageXOffset,p=-pageYOffset;else{let m=c.getBoundingClientRect(),y=m.width/c.offsetWidth,w=m.height/c.offsetHeight;h=m.left-c.scrollLeft*y,p=m.top-c.scrollTop*w}this.element.style.left=(r.left-h)/a+"px",this.element.style.top=(r.top-p)/u+"px",this.element.style.width=(r.right-r.left)/a+"px",this.element.style.height=(r.bottom-r.top)/u+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),s=r&&r.type.spec.disableDropCursor,i=typeof s=="function"?s(this.editorView,t,e):s;if(t&&!i){let a=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let u=D1(this.editorView.state.doc,a,this.editorView.dragging.slice);u!=null&&(a=u)}this.setCursor(a),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const O2=At.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[_2(this.options)]}});class We extends ge{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return We.valid(r)?new We(r):ge.near(r)}content(){return Y.empty}eq(e){return e instanceof We&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new We(e.resolve(t.pos))}getBookmark(){return new Ip(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!R2(e)||!N2(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let s=t.contentMatchAt(e.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&We.valid(e))return e;let s=e.pos,i=null;for(let a=e.depth;;a--){let u=e.node(a);if(t>0?e.indexAfter(a)<u.childCount:e.index(a)>0){i=u.child(t>0?e.indexAfter(a):e.index(a)-1);break}else if(a==0)return null;s+=t;let c=e.doc.resolve(s);if(We.valid(c))return c}for(;;){let a=t>0?i.firstChild:i.lastChild;if(!a){if(i.isAtom&&!i.isText&&!ie.isSelectable(i)){e=e.doc.resolve(s+i.nodeSize*t),r=!1;continue e}break}i=a,s+=t;let u=e.doc.resolve(s);if(We.valid(u))return u}return null}}}We.prototype.visible=!1;We.findFrom=We.findGapCursorFrom;ge.jsonID("gapcursor",We);class Ip{constructor(e){this.pos=e}map(e){return new Ip(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return We.valid(t)?new We(t):ge.near(t)}}function Yk(n){return n.isAtom||n.spec.isolating||n.spec.createGapCursor}function R2(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(t-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||Yk(s.type))return!0;if(s.inlineContent)return!1}}return!0}function N2(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(t);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||Yk(s.type))return!0;if(s.inlineContent)return!1}}return!0}function A2(){return new bt({props:{decorations:D2,createSelectionBetween(n,e,t){return e.pos==t.pos&&We.valid(t)?new We(t):null},handleClick:I2,handleKeyDown:M2,handleDOMEvents:{beforeinput:P2}}})}const M2=Ek({ArrowLeft:Gl("horiz",-1),ArrowRight:Gl("horiz",1),ArrowUp:Gl("vert",-1),ArrowDown:Gl("vert",1)});function Gl(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,s,i){let a=r.selection,u=e>0?a.$to:a.$from,c=a.empty;if(a instanceof pe){if(!i.endOfTextblock(t)||u.depth==0)return!1;c=!1,u=r.doc.resolve(e>0?u.after():u.before())}let h=We.findGapCursorFrom(u,e,c);return h?(s&&s(r.tr.setSelection(new We(h))),!0):!1}}function I2(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!We.valid(r))return!1;let s=n.posAtCoords({left:t.clientX,top:t.clientY});return s&&s.inside>-1&&ie.isSelectable(n.state.doc.nodeAt(s.inside))?!1:(n.dispatch(n.state.tr.setSelection(new We(r))),!0)}function P2(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof We))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let s=U.empty;for(let a=r.length-1;a>=0;a--)s=U.from(r[a].createAndFill(null,s));let i=n.state.tr.replace(t.pos,t.pos,new Y(s,0,0));return i.setSelection(pe.near(i.doc.resolve(t.pos+1))),n.dispatch(i),!1}function D2(n){if(!(n.selection instanceof We))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",tt.create(n.doc,[pn.widget(n.selection.head,e,{key:"gapcursor"})])}const L2=At.create({name:"gapCursor",addProseMirrorPlugins(){return[A2()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=ve(ee(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),j2=Wt.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",ht(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:s,storedMarks:i}=t;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:a}=this.options,{splittableMarks:u}=r.extensionManager,c=i||s.$to.parentOffset&&s.$from.marks();return e().insertContent({type:this.name}).command(({tr:h,dispatch:p})=>{if(p&&c&&a){const m=c.filter(y=>u.includes(y.type.name));h.ensureMarks(m)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),$2=Wt.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,ht(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>Df({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var Su=200,ct=function(){};ct.prototype.append=function(e){return e.length?(e=ct.from(e),!this.length&&e||e.length<Su&&this.leafAppend(e)||this.length<Su&&e.leafPrepend(this)||this.appendInner(e)):this};ct.prototype.prepend=function(e){return e.length?ct.from(e).append(this):this};ct.prototype.appendInner=function(e){return new B2(this,e)};ct.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?ct.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};ct.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};ct.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};ct.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(i,a){return s.push(e(i,a))},t,r),s};ct.from=function(e){return e instanceof ct?e:e&&e.length?new Qk(e):ct.empty};var Qk=(function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(s,i){return s==0&&i==this.length?this:new e(this.values.slice(s,i))},e.prototype.getInner=function(s){return this.values[s]},e.prototype.forEachInner=function(s,i,a,u){for(var c=i;c<a;c++)if(s(this.values[c],u+c)===!1)return!1},e.prototype.forEachInvertedInner=function(s,i,a,u){for(var c=i-1;c>=a;c--)if(s(this.values[c],u+c)===!1)return!1},e.prototype.leafAppend=function(s){if(this.length+s.length<=Su)return new e(this.values.concat(s.flatten()))},e.prototype.leafPrepend=function(s){if(this.length+s.length<=Su)return new e(s.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e})(ct);ct.empty=new Qk([]);var B2=(function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,s,i,a){var u=this.left.length;if(s<u&&this.left.forEachInner(r,s,Math.min(i,u),a)===!1||i>u&&this.right.forEachInner(r,Math.max(s-u,0),Math.min(this.length,i)-u,a+u)===!1)return!1},e.prototype.forEachInvertedInner=function(r,s,i,a){var u=this.left.length;if(s>u&&this.right.forEachInvertedInner(r,s-u,Math.max(i,u)-u,a+u)===!1||i<u&&this.left.forEachInvertedInner(r,Math.min(s,u),i,a)===!1)return!1},e.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var i=this.left.length;return s<=i?this.left.slice(r,s):r>=i?this.right.slice(r-i,s-i):this.left.slice(r,i).append(this.right.slice(0,s-i))},e.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new e(this.left,s)},e.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new e(s,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e})(ct);const z2=500;class On{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,i;t&&(s=this.remapping(r,this.items.length),i=s.maps.length);let a=e.tr,u,c,h=[],p=[];return this.items.forEach((m,y)=>{if(!m.step){s||(s=this.remapping(r,y+1),i=s.maps.length),i--,p.push(m);return}if(s){p.push(new Ln(m.map));let w=m.step.map(s.slice(i)),k;w&&a.maybeStep(w).doc&&(k=a.mapping.maps[a.mapping.maps.length-1],h.push(new Ln(k,void 0,void 0,h.length+p.length))),i--,k&&s.appendMap(k,i)}else a.maybeStep(m.step);if(m.selection)return u=s?m.selection.map(s.slice(i)):m.selection,c=new On(this.items.slice(0,r).append(p.reverse().concat(h)),this.eventCount-1),!1},this.items.length,0),{remaining:c,transform:a,selection:u}}addTransform(e,t,r,s){let i=[],a=this.eventCount,u=this.items,c=!s&&u.length?u.get(u.length-1):null;for(let p=0;p<e.steps.length;p++){let m=e.steps[p].invert(e.docs[p]),y=new Ln(e.mapping.maps[p],m,t),w;(w=c&&c.merge(y))&&(y=w,p?i.pop():u=u.slice(0,u.length-1)),i.push(y),t&&(a++,t=void 0),s||(c=y)}let h=a-r.depth;return h>F2&&(u=U2(u,h),a-=h),new On(u.append(i),a)}remapping(e,t){let r=new aa;return this.items.forEach((s,i)=>{let a=s.mirrorOffset!=null&&i-s.mirrorOffset>=e?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,a)},e,t),r}addMaps(e){return this.eventCount==0?this:new On(this.items.append(e.map(t=>new Ln(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-t),i=e.mapping,a=e.steps.length,u=this.eventCount;this.items.forEach(y=>{y.selection&&u--},s);let c=t;this.items.forEach(y=>{let w=i.getMirror(--c);if(w==null)return;a=Math.min(a,w);let k=i.maps[w];if(y.step){let x=e.steps[w].invert(e.docs[w]),b=y.selection&&y.selection.map(i.slice(c+1,w));b&&u++,r.push(new Ln(k,x,b))}else r.push(new Ln(k))},s);let h=[];for(let y=t;y<a;y++)h.push(new Ln(i.maps[y]));let p=this.items.slice(0,s).append(h).append(r),m=new On(p,u);return m.emptyItemCount()>z2&&(m=m.compress(this.items.length-r.length)),m}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,s=[],i=0;return this.items.forEach((a,u)=>{if(u>=e)s.push(a),a.selection&&i++;else if(a.step){let c=a.step.map(t.slice(r)),h=c&&c.getMap();if(r--,h&&t.appendMap(h,r),c){let p=a.selection&&a.selection.map(t.slice(r));p&&i++;let m=new Ln(h.invert(),c,p),y,w=s.length-1;(y=s.length&&s[w].merge(m))?s[w]=y:s.push(m)}}else a.map&&r--},this.items.length,0),new On(ct.from(s.reverse()),i)}}On.empty=new On(ct.empty,0);function U2(n,e){let t;return n.forEach((r,s)=>{if(r.selection&&e--==0)return t=s,!1}),n.slice(t)}class Ln{constructor(e,t,r,s){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Ln(t.getMap().invert(),t,this.selection)}}}class Dr{constructor(e,t,r,s,i){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=s,this.prevComposition=i}}const F2=20;function H2(n,e,t,r){let s=t.getMeta(Ms),i;if(s)return s.historyState;t.getMeta(K2)&&(n=new Dr(n.done,n.undone,null,0,-1));let a=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(a&&a.getMeta(Ms))return a.getMeta(Ms).redo?new Dr(n.done.addTransform(t,void 0,r,su(e)),n.undone,Xv(t.mapping.maps),n.prevTime,n.prevComposition):new Dr(n.done,n.undone.addTransform(t,void 0,r,su(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(a&&a.getMeta("addToHistory")===!1)){let u=t.getMeta("composition"),c=n.prevTime==0||!a&&n.prevComposition!=u&&(n.prevTime<(t.time||0)-r.newGroupDelay||!V2(t,n.prevRanges)),h=a?Kh(n.prevRanges,t.mapping):Xv(t.mapping.maps);return new Dr(n.done.addTransform(t,c?e.selection.getBookmark():void 0,r,su(e)),On.empty,h,t.time,u??n.prevComposition)}else return(i=t.getMeta("rebased"))?new Dr(n.done.rebased(t,i),n.undone.rebased(t,i),Kh(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new Dr(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),Kh(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function V2(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,s)=>{for(let i=0;i<e.length;i+=2)r<=e[i+1]&&s>=e[i]&&(t=!0)}),t}function Xv(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,s,i,a)=>e.push(i,a));return e}function Kh(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let s=e.map(n[r],1),i=e.map(n[r+1],-1);s<=i&&t.push(s,i)}return t}function W2(n,e,t){let r=su(e),s=Ms.get(e).spec.config,i=(t?n.undone:n.done).popEvent(e,r);if(!i)return null;let a=i.selection.resolve(i.transform.doc),u=(t?n.done:n.undone).addTransform(i.transform,e.selection.getBookmark(),s,r),c=new Dr(t?u:i.remaining,t?i.remaining:u,null,0,-1);return i.transform.setSelection(a).setMeta(Ms,{redo:t,historyState:c})}let qh=!1,Zv=null;function su(n){let e=n.plugins;if(Zv!=e){qh=!1,Zv=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){qh=!0;break}}return qh}const Ms=new nn("history"),K2=new nn("closeHistory");function q2(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new bt({key:Ms,state:{init(){return new Dr(On.empty,On.empty,null,0,-1)},apply(e,t,r){return H2(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,s=r=="historyUndo"?Zk:r=="historyRedo"?ex:null;return!s||!e.editable?!1:(t.preventDefault(),s(e.state,e.dispatch))}}}})}function Xk(n,e){return(t,r)=>{let s=Ms.getState(t);if(!s||(n?s.undone:s.done).eventCount==0)return!1;if(r){let i=W2(s,t,n);i&&r(e?i.scrollIntoView():i)}return!0}}const Zk=Xk(!1,!0),ex=Xk(!0,!0),G2=At.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>Zk(n,e),redo:()=>({state:n,dispatch:e})=>ex(n,e)}},addProseMirrorPlugins(){return[q2(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),J2=Wt.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",ht(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{if(!FI(e,e.schema.nodes[this.name]))return!1;const{selection:t}=e,{$from:r,$to:s}=t,i=n();return r.parentOffset===0?i.insertContentAt({from:Math.max(r.pos-1,0),to:s.pos},{type:this.name}):uI(t)?i.insertContentAt(s.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({tr:a,dispatch:u})=>{var c;if(u){const{$to:h}=a.selection,p=h.end();if(h.nodeAfter)h.nodeAfter.isTextblock?a.setSelection(pe.create(a.doc,h.pos+1)):h.nodeAfter.isBlock?a.setSelection(ie.create(a.doc,h.pos)):a.setSelection(pe.create(a.doc,h.pos));else{const m=(c=h.parent.type.contentMatch.defaultType)===null||c===void 0?void 0:c.create();m&&(a.insert(p,m),a.setSelection(pe.create(a.doc,p+1)))}a.scrollIntoView()}return!0}).run()}}},addInputRules(){return[UI({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),Y2=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Q2=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,X2=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Z2=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,eP=Fn.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",ht(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Li({find:Y2,type:this.type}),Li({find:X2,type:this.type})]},addPasteRules(){return[$s({find:Q2,type:this.type}),$s({find:Z2,type:this.type})]}}),tP=Wt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",ht(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),nP="listItem",ew="textStyle",tw=/^(\d+)\.\s$/,rP=Wt.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",ht(this.options.HTMLAttributes,t),0]:["ol",ht(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(nP,this.editor.getAttributes(ew)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=pa({find:tw,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=pa({find:tw,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(ew)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),sP=Wt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",ht(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),iP=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,oP=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,aP=Fn.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",ht(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Li({find:iP,type:this.type})]},addPasteRules(){return[$s({find:oP,type:this.type})]}}),lP=Wt.create({name:"text",group:"inline"}),uP=At.create({name:"starterKit",addExtensions(){const n=[];return this.options.bold!==!1&&n.push(g2.configure(this.options.bold)),this.options.blockquote!==!1&&n.push(d2.configure(this.options.blockquote)),this.options.bulletList!==!1&&n.push(v2.configure(this.options.bulletList)),this.options.code!==!1&&n.push(x2.configure(this.options.code)),this.options.codeBlock!==!1&&n.push(E2.configure(this.options.codeBlock)),this.options.document!==!1&&n.push(C2.configure(this.options.document)),this.options.dropcursor!==!1&&n.push(O2.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&n.push(L2.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&n.push(j2.configure(this.options.hardBreak)),this.options.heading!==!1&&n.push($2.configure(this.options.heading)),this.options.history!==!1&&n.push(G2.configure(this.options.history)),this.options.horizontalRule!==!1&&n.push(J2.configure(this.options.horizontalRule)),this.options.italic!==!1&&n.push(eP.configure(this.options.italic)),this.options.listItem!==!1&&n.push(tP.configure(this.options.listItem)),this.options.orderedList!==!1&&n.push(rP.configure(this.options.orderedList)),this.options.paragraph!==!1&&n.push(sP.configure(this.options.paragraph)),this.options.strike!==!1&&n.push(aP.configure(this.options.strike)),this.options.text!==!1&&n.push(lP.configure(this.options.text)),n}}),cP=Fn.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["u",ht(this.options.HTMLAttributes,n),0]},addCommands(){return{setUnderline:()=>({commands:n})=>n.setMark(this.name),toggleUnderline:()=>({commands:n})=>n.toggleMark(this.name),unsetUnderline:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),dP="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",hP="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",jf="numeric",$f="ascii",Bf="alpha",Ho="asciinumeric",Do="alphanumeric",zf="domain",tx="emoji",fP="scheme",pP="slashscheme",Gh="whitespace";function mP(n,e){return n in e||(e[n]=[]),e[n]}function Ts(n,e,t){e[jf]&&(e[Ho]=!0,e[Do]=!0),e[$f]&&(e[Ho]=!0,e[Bf]=!0),e[Ho]&&(e[Do]=!0),e[Bf]&&(e[Do]=!0),e[Do]&&(e[zf]=!0),e[tx]&&(e[zf]=!0);for(const r in e){const s=mP(r,t);s.indexOf(n)<0&&s.push(n)}}function gP(n,e){const t={};for(const r in e)e[r].indexOf(n)>=0&&(t[r]=!0);return t}function Ht(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}Ht.groups={};Ht.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let r=0;r<e.jr.length;r++){const s=e.jr[r][0],i=e.jr[r][1];if(i&&s.test(n))return i}return e.jd},has(n,e=!1){return e?n in this.j:!!this.go(n)},ta(n,e,t,r){for(let s=0;s<n.length;s++)this.tt(n[s],e,t,r)},tr(n,e,t,r){r=r||Ht.groups;let s;return e&&e.j?s=e:(s=new Ht(e),t&&r&&Ts(e,t,r)),this.jr.push([n,s]),s},ts(n,e,t,r){let s=this;const i=n.length;if(!i)return s;for(let a=0;a<i-1;a++)s=s.tt(n[a]);return s.tt(n[i-1],e,t,r)},tt(n,e,t,r){r=r||Ht.groups;const s=this;if(e&&e.j)return s.j[n]=e,e;const i=e;let a,u=s.go(n);if(u?(a=new Ht,Object.assign(a.j,u.j),a.jr.push.apply(a.jr,u.jr),a.jd=u.jd,a.t=u.t):a=new Ht,i){if(r)if(a.t&&typeof a.t=="string"){const c=Object.assign(gP(a.t,r),t);Ts(i,c,r)}else t&&Ts(i,t,r);a.t=i}return s.j[n]=a,a}};const me=(n,e,t,r,s)=>n.ta(e,t,r,s),He=(n,e,t,r,s)=>n.tr(e,t,r,s),nw=(n,e,t,r,s)=>n.ts(e,t,r,s),V=(n,e,t,r,s)=>n.tt(e,t,r,s),tr="WORD",Uf="UWORD",nx="ASCIINUMERICAL",rx="ALPHANUMERICAL",ma="LOCALHOST",Ff="TLD",Hf="UTLD",iu="SCHEME",Ci="SLASH_SCHEME",Pp="NUM",Vf="WS",Dp="NL",Vo="OPENBRACE",Wo="CLOSEBRACE",bu="OPENBRACKET",Eu="CLOSEBRACKET",Cu="OPENPAREN",_u="CLOSEPAREN",Tu="OPENANGLEBRACKET",Ou="CLOSEANGLEBRACKET",Ru="FULLWIDTHLEFTPAREN",Nu="FULLWIDTHRIGHTPAREN",Au="LEFTCORNERBRACKET",Mu="RIGHTCORNERBRACKET",Iu="LEFTWHITECORNERBRACKET",Pu="RIGHTWHITECORNERBRACKET",Du="FULLWIDTHLESSTHAN",Lu="FULLWIDTHGREATERTHAN",ju="AMPERSAND",$u="APOSTROPHE",Bu="ASTERISK",Lr="AT",zu="BACKSLASH",Uu="BACKTICK",Fu="CARET",Br="COLON",Lp="COMMA",Hu="DOLLAR",jn="DOT",Vu="EQUALS",jp="EXCLAMATION",dn="HYPHEN",Ko="PERCENT",Wu="PIPE",Ku="PLUS",qu="POUND",qo="QUERY",$p="QUOTE",sx="FULLWIDTHMIDDLEDOT",Bp="SEMI",$n="SLASH",Go="TILDE",Gu="UNDERSCORE",ix="EMOJI",Ju="SYM";var ox=Object.freeze({__proto__:null,ALPHANUMERICAL:rx,AMPERSAND:ju,APOSTROPHE:$u,ASCIINUMERICAL:nx,ASTERISK:Bu,AT:Lr,BACKSLASH:zu,BACKTICK:Uu,CARET:Fu,CLOSEANGLEBRACKET:Ou,CLOSEBRACE:Wo,CLOSEBRACKET:Eu,CLOSEPAREN:_u,COLON:Br,COMMA:Lp,DOLLAR:Hu,DOT:jn,EMOJI:ix,EQUALS:Vu,EXCLAMATION:jp,FULLWIDTHGREATERTHAN:Lu,FULLWIDTHLEFTPAREN:Ru,FULLWIDTHLESSTHAN:Du,FULLWIDTHMIDDLEDOT:sx,FULLWIDTHRIGHTPAREN:Nu,HYPHEN:dn,LEFTCORNERBRACKET:Au,LEFTWHITECORNERBRACKET:Iu,LOCALHOST:ma,NL:Dp,NUM:Pp,OPENANGLEBRACKET:Tu,OPENBRACE:Vo,OPENBRACKET:bu,OPENPAREN:Cu,PERCENT:Ko,PIPE:Wu,PLUS:Ku,POUND:qu,QUERY:qo,QUOTE:$p,RIGHTCORNERBRACKET:Mu,RIGHTWHITECORNERBRACKET:Pu,SCHEME:iu,SEMI:Bp,SLASH:$n,SLASH_SCHEME:Ci,SYM:Ju,TILDE:Go,TLD:Ff,UNDERSCORE:Gu,UTLD:Hf,UWORD:Uf,WORD:tr,WS:Vf});const Xn=/[a-z]/,No=new RegExp("\\p{L}","u"),Jh=new RegExp("\\p{Emoji}","u"),Zn=/\d/,Yh=/\s/,rw="\r",Qh=`
`,yP="",vP="",Xh="";let Jl=null,Yl=null;function wP(n=[]){const e={};Ht.groups=e;const t=new Ht;Jl==null&&(Jl=sw(dP)),Yl==null&&(Yl=sw(hP)),V(t,"'",$u),V(t,"{",Vo),V(t,"}",Wo),V(t,"[",bu),V(t,"]",Eu),V(t,"(",Cu),V(t,")",_u),V(t,"<",Tu),V(t,">",Ou),V(t,"",Ru),V(t,"",Nu),V(t,"",Au),V(t,"",Mu),V(t,"",Iu),V(t,"",Pu),V(t,"",Du),V(t,"",Lu),V(t,"&",ju),V(t,"*",Bu),V(t,"@",Lr),V(t,"`",Uu),V(t,"^",Fu),V(t,":",Br),V(t,",",Lp),V(t,"$",Hu),V(t,".",jn),V(t,"=",Vu),V(t,"!",jp),V(t,"-",dn),V(t,"%",Ko),V(t,"|",Wu),V(t,"+",Ku),V(t,"#",qu),V(t,"?",qo),V(t,'"',$p),V(t,"/",$n),V(t,";",Bp),V(t,"~",Go),V(t,"_",Gu),V(t,"\\",zu),V(t,"",sx);const r=He(t,Zn,Pp,{[jf]:!0});He(r,Zn,r);const s=He(r,Xn,nx,{[Ho]:!0}),i=He(r,No,rx,{[Do]:!0}),a=He(t,Xn,tr,{[$f]:!0});He(a,Zn,s),He(a,Xn,a),He(s,Zn,s),He(s,Xn,s);const u=He(t,No,Uf,{[Bf]:!0});He(u,Xn),He(u,Zn,i),He(u,No,u),He(i,Zn,i),He(i,Xn),He(i,No,i);const c=V(t,Qh,Dp,{[Gh]:!0}),h=V(t,rw,Vf,{[Gh]:!0}),p=He(t,Yh,Vf,{[Gh]:!0});V(t,Xh,p),V(h,Qh,c),V(h,Xh,p),He(h,Yh,p),V(p,rw),V(p,Qh),He(p,Yh,p),V(p,Xh,p);const m=He(t,Jh,ix,{[tx]:!0});V(m,"#"),He(m,Jh,m),V(m,yP,m);const y=V(m,vP);V(y,"#"),He(y,Jh,m);const w=[[Xn,a],[Zn,s]],k=[[Xn,null],[No,u],[Zn,i]];for(let x=0;x<Jl.length;x++)Rr(t,Jl[x],Ff,tr,w);for(let x=0;x<Yl.length;x++)Rr(t,Yl[x],Hf,Uf,k);Ts(Ff,{tld:!0,ascii:!0},e),Ts(Hf,{utld:!0,alpha:!0},e),Rr(t,"file",iu,tr,w),Rr(t,"mailto",iu,tr,w),Rr(t,"http",Ci,tr,w),Rr(t,"https",Ci,tr,w),Rr(t,"ftp",Ci,tr,w),Rr(t,"ftps",Ci,tr,w),Ts(iu,{scheme:!0,ascii:!0},e),Ts(Ci,{slashscheme:!0,ascii:!0},e),n=n.sort((x,b)=>x[0]>b[0]?1:-1);for(let x=0;x<n.length;x++){const b=n[x][0],A=n[x][1]?{[fP]:!0}:{[pP]:!0};b.indexOf("-")>=0?A[zf]=!0:Xn.test(b)?Zn.test(b)?A[Ho]=!0:A[$f]=!0:A[jf]=!0,nw(t,b,b,A)}return nw(t,"localhost",ma,{ascii:!0}),t.jd=new Ht(Ju),{start:t,tokens:Object.assign({groups:e},ox)}}function ax(n,e){const t=kP(e.replace(/[A-Z]/g,u=>u.toLowerCase())),r=t.length,s=[];let i=0,a=0;for(;a<r;){let u=n,c=null,h=0,p=null,m=-1,y=-1;for(;a<r&&(c=u.go(t[a]));)u=c,u.accepts()?(m=0,y=0,p=u):m>=0&&(m+=t[a].length,y++),h+=t[a].length,i+=t[a].length,a++;i-=m,a-=y,h-=m,s.push({t:p.t,v:e.slice(i-h,i),s:i-h,e:i})}return s}function kP(n){const e=[],t=n.length;let r=0;for(;r<t;){let s=n.charCodeAt(r),i,a=s<55296||s>56319||r+1===t||(i=n.charCodeAt(r+1))<56320||i>57343?n[r]:n.slice(r,r+2);e.push(a),r+=a.length}return e}function Rr(n,e,t,r,s){let i;const a=e.length;for(let u=0;u<a-1;u++){const c=e[u];n.j[c]?i=n.j[c]:(i=new Ht(r),i.jr=s.slice(),n.j[c]=i),n=i}return i=new Ht(t),i.jr=s.slice(),n.j[e[a-1]]=i,i}function sw(n){const e=[],t=[];let r=0,s="0123456789";for(;r<n.length;){let i=0;for(;s.indexOf(n[r+i])>=0;)i++;if(i>0){e.push(t.join(""));for(let a=parseInt(n.substring(r,r+i),10);a>0;a--)t.pop();r+=i}else t.push(n[r]),r++}return e}const ga={defaultProtocol:"http",events:null,format:iw,formatHref:iw,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function zp(n,e=null){let t=Object.assign({},ga);n&&(t=Object.assign(t,n instanceof zp?n.o:n));const r=t.ignoreTags,s=[];for(let i=0;i<r.length;i++)s.push(r[i].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=s}zp.prototype={o:ga,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const r=e!=null;let s=this.o[n];return s&&(typeof s=="object"?(s=t.t in s?s[t.t]:ga[n],typeof s=="function"&&r&&(s=s(e,t))):typeof s=="function"&&r&&(s=s(e,t.t,t)),s)},getObj(n,e,t){let r=this.o[n];return typeof r=="function"&&e!=null&&(r=r(e,t.t,t)),r},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function iw(n){return n}function lx(n,e){this.t="token",this.v=n,this.tk=e}lx.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),r=n.get("format",e,this);return t&&r.length>t?r.substring(0,t)+"":r},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=ga.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),r=n.get("formatHref",t,this),s=n.get("tagName",t,e),i=this.toFormattedString(n),a={},u=n.get("className",t,e),c=n.get("target",t,e),h=n.get("rel",t,e),p=n.getObj("attributes",t,e),m=n.getObj("events",t,e);return a.href=r,u&&(a.class=u),c&&(a.target=c),h&&(a.rel=h),p&&Object.assign(a,p),{tagName:s,attributes:a,content:i,eventListeners:m}}};function pc(n,e){class t extends lx{constructor(s,i){super(s,i),this.t=n}}for(const r in e)t.prototype[r]=e[r];return t.t=n,t}const ow=pc("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),aw=pc("text"),xP=pc("nl"),Ql=pc("url",{isLink:!0,toHref(n=ga.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==ma&&n[1].t===Br}}),cn=n=>new Ht(n);function SP({groups:n}){const e=n.domain.concat([ju,Bu,Lr,zu,Uu,Fu,Hu,Vu,dn,Pp,Ko,Wu,Ku,qu,$n,Ju,Go,Gu]),t=[$u,Br,Lp,jn,jp,Ko,qo,$p,Bp,Tu,Ou,Vo,Wo,Eu,bu,Cu,_u,Ru,Nu,Au,Mu,Iu,Pu,Du,Lu],r=[ju,$u,Bu,zu,Uu,Fu,Hu,Vu,dn,Vo,Wo,Ko,Wu,Ku,qu,qo,$n,Ju,Go,Gu],s=cn(),i=V(s,Go);me(i,r,i),me(i,n.domain,i);const a=cn(),u=cn(),c=cn();me(s,n.domain,a),me(s,n.scheme,u),me(s,n.slashscheme,c),me(a,r,i),me(a,n.domain,a);const h=V(a,Lr);V(i,Lr,h),V(u,Lr,h),V(c,Lr,h);const p=V(i,jn);me(p,r,i),me(p,n.domain,i);const m=cn();me(h,n.domain,m),me(m,n.domain,m);const y=V(m,jn);me(y,n.domain,m);const w=cn(ow);me(y,n.tld,w),me(y,n.utld,w),V(h,ma,w);const k=V(m,dn);V(k,dn,k),me(k,n.domain,m),me(w,n.domain,m),V(w,jn,y),V(w,dn,k);const x=V(w,Br);me(x,n.numeric,ow);const b=V(a,dn),C=V(a,jn);V(b,dn,b),me(b,n.domain,a),me(C,r,i),me(C,n.domain,a);const A=cn(Ql);me(C,n.tld,A),me(C,n.utld,A),me(A,n.domain,a),me(A,r,i),V(A,jn,C),V(A,dn,b),V(A,Lr,h);const O=V(A,Br),j=cn(Ql);me(O,n.numeric,j);const F=cn(Ql),W=cn();me(F,e,F),me(F,t,W),me(W,e,F),me(W,t,W),V(A,$n,F),V(j,$n,F);const L=V(u,Br),q=V(c,Br),he=V(q,$n),De=V(he,$n);me(u,n.domain,a),V(u,jn,C),V(u,dn,b),me(c,n.domain,a),V(c,jn,C),V(c,dn,b),me(L,n.domain,F),V(L,$n,F),V(L,qo,F),me(De,n.domain,F),me(De,e,F),V(De,$n,F);const Ke=[[Vo,Wo],[bu,Eu],[Cu,_u],[Tu,Ou],[Ru,Nu],[Au,Mu],[Iu,Pu],[Du,Lu]];for(let ft=0;ft<Ke.length;ft++){const[nt,pt]=Ke[ft],rt=V(F,nt);V(W,nt,rt),V(rt,pt,F);const te=cn(Ql);me(rt,e,te);const fe=cn();me(rt,t),me(te,e,te),me(te,t,fe),me(fe,e,te),me(fe,t,fe),V(te,pt,F),V(fe,pt,F)}return V(s,ma,A),V(s,Dp,xP),{start:s,tokens:ox}}function bP(n,e,t){let r=t.length,s=0,i=[],a=[];for(;s<r;){let u=n,c=null,h=null,p=0,m=null,y=-1;for(;s<r&&!(c=u.go(t[s].t));)a.push(t[s++]);for(;s<r&&(h=c||u.go(t[s].t));)c=null,u=h,u.accepts()?(y=0,m=u):y>=0&&y++,s++,p++;if(y<0)s-=p,s<r&&(a.push(t[s]),s++);else{a.length>0&&(i.push(Zh(aw,e,a)),a=[]),s-=y,p-=y;const w=m.t,k=t.slice(s-p,s);i.push(Zh(w,e,k))}}return a.length>0&&i.push(Zh(aw,e,a)),i}function Zh(n,e,t){const r=t[0].s,s=t[t.length-1].e,i=e.slice(r,s);return new n(i,t)}const EP=typeof console<"u"&&console&&console.warn||(()=>{}),CP="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Pe={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function _P(){return Ht.groups={},Pe.scanner=null,Pe.parser=null,Pe.tokenQueue=[],Pe.pluginQueue=[],Pe.customSchemes=[],Pe.initialized=!1,Pe}function lw(n,e=!1){if(Pe.initialized&&EP(`linkifyjs: already initialized - will not register custom scheme "${n}" ${CP}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Pe.customSchemes.push([n,e])}function TP(){Pe.scanner=wP(Pe.customSchemes);for(let n=0;n<Pe.tokenQueue.length;n++)Pe.tokenQueue[n][1]({scanner:Pe.scanner});Pe.parser=SP(Pe.scanner.tokens);for(let n=0;n<Pe.pluginQueue.length;n++)Pe.pluginQueue[n][1]({scanner:Pe.scanner,parser:Pe.parser});return Pe.initialized=!0,Pe}function Up(n){return Pe.initialized||TP(),bP(Pe.parser.start,n,ax(Pe.scanner.start,n))}Up.scan=ax;function ux(n,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const r=new zp(t),s=Up(n),i=[];for(let a=0;a<s.length;a++){const u=s[a];u.isLink&&(!e||u.t===e)&&r.check(u)&&i.push(u.toFormattedObject(r))}return i}const Fp="[\0- -\u2029]",OP=new RegExp(Fp),RP=new RegExp(`${Fp}$`),NP=new RegExp(Fp,"g");function AP(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function MP(n){return new bt({key:new nn("autolink"),appendTransaction:(e,t,r)=>{const s=e.some(h=>h.docChanged)&&!t.doc.eq(r.doc),i=e.some(h=>h.getMeta("preventAutolink"));if(!s||i)return;const{tr:a}=r,u=ZM(t.doc,[...e]);if(aI(u).forEach(({newRange:h})=>{const p=tI(r.doc,h,w=>w.isTextblock);let m,y;if(p.length>1)m=p[0],y=r.doc.textBetween(m.pos,m.pos+m.node.nodeSize,void 0," ");else if(p.length){const w=r.doc.textBetween(h.from,h.to," "," ");if(!RP.test(w))return;m=p[0],y=r.doc.textBetween(m.pos,h.to,void 0," ")}if(m&&y){const w=y.split(OP).filter(Boolean);if(w.length<=0)return!1;const k=w[w.length-1],x=m.pos+y.lastIndexOf(k);if(!k)return!1;const b=Up(k).map(C=>C.toObject(n.defaultProtocol));if(!AP(b))return!1;b.filter(C=>C.isLink).map(C=>({...C,from:x+C.start+1,to:x+C.end+1})).filter(C=>r.schema.marks.code?!r.doc.rangeHasMark(C.from,C.to,r.schema.marks.code):!0).filter(C=>n.validate(C.value)).filter(C=>n.shouldAutoLink(C.value)).forEach(C=>{Rp(C.from,C.to,r.doc).some(A=>A.mark.type===n.type)||a.addMark(C.from,C.to,n.type.create({href:C.href}))})}}),!!a.steps.length)return a}})}function IP(n){return new bt({key:new nn("handleClickLink"),props:{handleClick:(e,t,r)=>{var s,i;if(r.button!==0||!e.editable)return!1;let a=r.target;const u=[];for(;a.nodeName!=="DIV";)u.push(a),a=a.parentNode;if(!u.find(y=>y.nodeName==="A"))return!1;const c=qk(e.state,n.type.name),h=r.target,p=(s=h==null?void 0:h.href)!==null&&s!==void 0?s:c.href,m=(i=h==null?void 0:h.target)!==null&&i!==void 0?i:c.target;return h&&p?(window.open(p,m),!0):!1}}})}function PP(n){return new bt({key:new nn("handlePasteLink"),props:{handlePaste:(e,t,r)=>{const{state:s}=e,{selection:i}=s,{empty:a}=i;if(a)return!1;let u="";r.content.forEach(h=>{u+=h.textContent});const c=ux(u,{defaultProtocol:n.defaultProtocol}).find(h=>h.isLink&&h.value===u);return!u||!c?!1:n.editor.commands.setMark(n.type,{href:c.href})}}})}function gs(n,e){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const s=typeof r=="string"?r:r.scheme;s&&t.push(s)}),!n||n.replace(NP,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const DP=Fn.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(n=>{if(typeof n=="string"){lw(n);return}lw(n.scheme,n.optionalSlashes)})},onDestroy(){_P()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(n,e)=>!!gs(n,e.protocols),validate:n=>!!n,shouldAutoLink:n=>!!n}},addAttributes(){return{href:{default:null,parseHTML(n){return n.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{const e=n.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:t=>!!gs(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:n}){return this.options.isAllowedUri(n.href,{defaultValidate:e=>!!gs(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",ht(this.options.HTMLAttributes,n),0]:["a",ht(this.options.HTMLAttributes,{...n,href:""}),0]},addCommands(){return{setLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!gs(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,n).setMeta("preventAutolink",!0).run():!1},toggleLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!gs(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[$s({find:n=>{const e=[];if(n){const{protocols:t,defaultProtocol:r}=this.options,s=ux(n).filter(i=>i.isLink&&this.options.isAllowedUri(i.value,{defaultValidate:a=>!!gs(a,t),protocols:t,defaultProtocol:r}));s.length&&s.forEach(i=>e.push({text:i.value,data:{href:i.href},index:i.start}))}return e},type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[],{protocols:e,defaultProtocol:t}=this.options;return this.options.autolink&&n.push(MP({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:s=>!!gs(s,e),protocols:e,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&n.push(IP({type:this.type})),this.options.linkOnPaste&&n.push(PP({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),n}}),LP=At.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:n=>{const e=n.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:n=>n.textAlign?{style:`text-align: ${n.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:n=>({commands:e})=>this.options.alignments.includes(n)?this.options.types.map(t=>e.updateAttributes(t,{textAlign:n})).every(t=>t):!1,unsetTextAlign:()=>({commands:n})=>this.options.types.map(e=>n.resetAttributes(e,"textAlign")).every(e=>e),toggleTextAlign:n=>({editor:e,commands:t})=>this.options.alignments.includes(n)?e.isActive({textAlign:n})?t.unsetTextAlign():t.setTextAlign(n):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}});function jP({editor:n}){return n?E.jsxs("div",{className:"flex items-center gap-1 p-1",children:[E.jsx(Nr,{onClick:()=>n.chain().focus().toggleBold().run(),isActive:n.isActive("bold"),title:"Bold (Ctrl+B)",children:E.jsx(sC,{size:18})}),E.jsx(Nr,{onClick:()=>n.chain().focus().toggleItalic().run(),isActive:n.isActive("italic"),title:"Italic (Ctrl+I)",children:E.jsx(fC,{size:18})}),E.jsx(Nr,{onClick:()=>n.chain().focus().toggleUnderline().run(),isActive:n.isActive("underline"),title:"Underline (Ctrl+U)",children:E.jsx(bC,{size:18})}),E.jsx("div",{className:"w-px h-6 bg-gray-200 mx-1.5"}),E.jsx(Nr,{onClick:()=>n.chain().focus().setTextAlign("left").run(),isActive:n.isActive({textAlign:"left"}),title:"Align Left",children:E.jsx(ZE,{size:18})}),E.jsx(Nr,{onClick:()=>n.chain().focus().setTextAlign("center").run(),isActive:n.isActive({textAlign:"center"}),title:"Align Center",children:E.jsx(XE,{size:18})}),E.jsx(Nr,{onClick:()=>n.chain().focus().setTextAlign("right").run(),isActive:n.isActive({textAlign:"right"}),title:"Align Right",children:E.jsx(eC,{size:18})}),E.jsx("div",{className:"w-px h-6 bg-gray-200 mx-1.5"}),E.jsx(Nr,{onClick:()=>n.chain().focus().toggleBulletList().run(),isActive:n.isActive("bulletList"),title:"Bullet List",children:E.jsx(vC,{size:18})}),E.jsx(Nr,{onClick:()=>n.chain().focus().toggleOrderedList().run(),isActive:n.isActive("orderedList"),title:"Ordered List",children:E.jsx(yC,{size:18})})]}):null}function Nr({onClick:n,isActive:e,children:t,title:r}){return E.jsx("button",{onClick:n,title:r,className:Yo("p-1.5 rounded-md transition-all duration-200",e?"bg-indigo-50 text-indigo-600 shadow-sm":"text-gray-500 hover:bg-gray-100 hover:text-gray-900"),children:t})}const uw=[{id:"101",name:"Hng ng thc ng nh",grade:"Lp 8"},{id:"102",name:"Phn tch a thc thnh nhn t",grade:"Lp 8"},{id:"103",name:"Quy tc chuyn v",grade:"Lp 7"},{id:"104",name:"Ly tha vi s m t nhin",grade:"Lp 7"}];function cw(){const{id:n}=Cw(),e=Bi(),{title:t,setTitle:r,grade:s,setGrade:i,content:a,setContent:u,customCss:c,setCustomCss:h,prerequisites:p,setPrerequisites:m,isSaving:y,status:w,saveLesson:k}=FO(n),[x,b]=M.useState(""),[C,A]=M.useState(!1),[O,j]=M.useState("visual"),[F,W]=M.useState("settings"),[L,q]=M.useState(""),[he,De]=M.useState([{role:"ai",text:"Hello! I am your Lesson Assistant. How can I help you write this lesson today?"}]),Ke=o2({extensions:[uP,cP,DP.configure({openOnClick:!1}),LP.configure({types:["heading","paragraph"]})],content:a,onUpdate:({editor:te})=>{u(te.getHTML())}});M.useEffect(()=>{Ke&&a&&Ke.getHTML()!==a&&!Ke.isFocused&&Ke.commands.setContent(a)},[a,Ke]);const ft=uw.filter(te=>te.name.toLowerCase().includes(x.toLowerCase())&&!p.has(te.id)),nt=te=>{const fe=new Set(p);fe.add(te),m(fe),b(""),A(!1)},pt=te=>{const fe=new Set(p);fe.delete(te),m(fe)},rt=()=>{if(!L.trim())return;const te={role:"user",text:L};De(fe=>[...fe,te]),q(""),setTimeout(()=>{De(fe=>[...fe,{role:"ai",text:`That's a great point about "${te.text}". I can help you expand on that in the main content. Would you like me to draft a paragraph?`}])},1e3)};return E.jsxs("div",{className:"flex flex-col h-[calc(100vh-4rem)] bg-white animate-in fade-in zoom-in-95 duration-200",children:[E.jsxs("div",{className:"h-16 border-b border-gray-200 flex items-center justify-between px-6 bg-white z-20 flex-shrink-0",children:[E.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[E.jsx("button",{onClick:()=>e("/"),className:"text-gray-400 hover:text-gray-700 p-2 rounded-full hover:bg-gray-100 transition-colors group",title:"Quay li",children:E.jsx(tC,{size:24,className:"group-hover:-translate-x-1 transition-transform"})}),E.jsx("div",{className:"h-6 w-px bg-gray-200"}),E.jsx("input",{type:"text",value:t,onChange:te=>r(te.target.value),className:"text-lg font-bold text-gray-900 border-none outline-none focus:ring-0 w-full placeholder-gray-300 bg-transparent",placeholder:"Nhp tn bi hc..."})]}),E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsxs("div",{className:"bg-gray-100 p-1 rounded-lg flex gap-1 mr-2",children:[E.jsx("button",{onClick:()=>j("visual"),className:`p-1.5 rounded-md transition-all ${O==="visual"?"bg-white text-indigo-600 shadow-sm":"text-gray-400 hover:text-gray-600"}`,title:"Visual Editor",children:E.jsx(mC,{size:18})}),E.jsx("button",{onClick:()=>j("code"),className:`p-1.5 rounded-md transition-all ${O==="code"?"bg-white text-indigo-600 shadow-sm":"text-gray-400 hover:text-gray-600"}`,title:"Code Editor (HTML/CSS)",children:E.jsx(Xy,{size:18})})]}),E.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[E.jsx(lC,{size:14})," ",w||" lu"]}),E.jsxs("button",{onClick:k,disabled:y,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2 rounded-lg text-sm font-medium shadow-sm transition-all hover:shadow-md flex items-center gap-2 disabled:opacity-70",children:[y?E.jsx("span",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}):E.jsx(rf,{size:18}),y?"ang lu...":"Lu & ng"]})]})]}),E.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[E.jsx("div",{className:"flex-1 flex flex-col overflow-hidden border-r border-gray-200 bg-gray-50/30",children:O==="visual"?E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"sticky top-0 z-10 bg-white/80 backdrop-blur border-b border-gray-200 px-6 py-2 flex items-center justify-between shadow-sm",children:[E.jsx("div",{className:"flex items-center gap-2",children:E.jsx(jP,{editor:Ke})}),E.jsxs("button",{className:"text-xs text-indigo-600 font-semibold hover:bg-indigo-50 px-3 py-1.5 rounded-full flex items-center gap-1 transition-colors border border-transparent hover:border-indigo-100",onClick:()=>W("ai"),children:[E.jsx(CC,{size:16})," Ask AI"]})]}),E.jsx("style",{children:c}),E.jsx("div",{className:"flex-1 overflow-y-auto cursor-text",onClick:()=>Ke==null?void 0:Ke.chain().focus().run(),children:E.jsx("div",{className:"max-w-3xl mx-auto py-12 px-8 min-h-full bg-white shadow-sm my-4 rounded-xl",children:E.jsx(YI,{editor:Ke,className:"prose prose-lg max-w-none focus:outline-none"})})})]}):E.jsx("div",{className:"editor-code-mode h-full flex flex-col",children:E.jsxs("div",{className:"flex-1 flex min-h-0",children:[E.jsxs("div",{className:"editor-code-mode__panel flex-1 flex flex-col border-r border-gray-200",children:[E.jsxs("div",{className:"editor-code-mode__header bg-gray-50 px-4 py-2 border-b border-gray-200 flex justify-between items-center",children:[E.jsx("span",{className:"font-mono text-xs font-bold text-gray-500",children:"HTML CONTENT"}),E.jsx(uC,{size:14,className:"text-gray-400"})]}),E.jsx("textarea",{className:"editor-code-mode__textarea flex-1 p-4 font-mono text-sm resize-none focus:outline-none",value:a,onChange:te=>u(te.target.value),placeholder:"Enter HTML content here...",spellCheck:!1})]}),E.jsxs("div",{className:"editor-code-mode__panel flex-1 flex flex-col",children:[E.jsxs("div",{className:"editor-code-mode__header bg-gray-50 px-4 py-2 border-b border-gray-200 flex justify-between items-center",children:[E.jsx("span",{className:"font-mono text-xs font-bold text-gray-500",children:"CUSTOM CSS"}),E.jsx(Xy,{size:14,className:"text-gray-400"})]}),E.jsx("textarea",{className:"editor-code-mode__textarea editor-code-mode__textarea--css flex-1 p-4 font-mono text-sm resize-none focus:outline-none text-blue-600",value:c,onChange:te=>h(te.target.value),placeholder:".my-class { color: red; }",spellCheck:!1})]})]})})}),E.jsxs("div",{className:"w-80 bg-white flex flex-col border-l border-gray-200 flex-shrink-0 shadow-lg z-30",children:[E.jsxs("div",{className:"flex border-b border-gray-200",children:[E.jsxs("button",{onClick:()=>W("settings"),className:`flex-1 py-3 text-sm font-medium flex items-center justify-center gap-2 border-b-2 transition-colors ${F==="settings"?"border-indigo-600 text-indigo-600 bg-indigo-50/30":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[E.jsx(Zf,{size:16})," Cu hnh"]}),E.jsxs("button",{onClick:()=>W("ai"),className:`flex-1 py-3 text-sm font-medium flex items-center justify-center gap-2 border-b-2 transition-colors ${F==="ai"?"border-indigo-600 text-indigo-600 bg-indigo-50/30":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[E.jsx(oC,{size:16})," Tr l AI"]})]}),E.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50/30",children:F==="settings"?E.jsxs("div",{className:"p-5 space-y-8",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Lp"}),E.jsxs("div",{className:"relative",children:[E.jsxs("select",{value:s,onChange:te=>i(te.target.value),className:"w-full text-sm border-gray-200 rounded-lg shadow-sm border p-2.5 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none appearance-none bg-white text-gray-700",children:[E.jsx("option",{value:"8",children:"Lp 8"}),E.jsx("option",{value:"9",children:"Lp 9"})]}),E.jsx(Dw,{className:"absolute right-3 top-3 text-gray-400 pointer-events-none",size:18})]})]}),E.jsxs("div",{className:"bg-white rounded-xl border border-indigo-100 shadow-sm p-4 relative overflow-visible",children:[E.jsx("div",{className:"absolute -top-3 left-3 bg-white px-2",children:E.jsxs("label",{className:"flex items-center gap-1.5 text-sm font-bold text-indigo-600",children:[E.jsx(wC,{size:18}),"Bi hc lin quan"]})}),E.jsx("p",{className:"text-xs text-gray-500 mb-4 mt-2",children:"Gn th cc bi hc c (Lp 7, 8)  hc sinh n tp trc."}),E.jsxs("div",{className:"relative group mb-4",children:[E.jsx(Bw,{className:"absolute left-3 top-2.5 text-gray-400 group-focus-within:text-indigo-500 transition-colors",size:18}),E.jsx("input",{type:"text",value:x,onChange:te=>b(te.target.value),onFocus:()=>{x&&A(!0)},className:"w-full text-sm border border-gray-200 rounded-lg pl-9 pr-3 py-2 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 outline-none transition-all placeholder-gray-400",placeholder:"Tm kin thc c..."}),C&&x&&E.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border border-gray-100 rounded-xl shadow-xl z-50 max-h-56 overflow-y-auto animate-in fade-in zoom-in-95 duration-100",children:ft.length>0?ft.map(te=>E.jsxs("div",{onClick:()=>nt(te.id),className:"px-4 py-3 hover:bg-indigo-50 cursor-pointer border-b border-gray-50 last:border-0 flex justify-between items-center group transition-colors",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx(cC,{className:"text-gray-400 group-hover:text-indigo-500",size:16}),E.jsx("span",{className:"text-sm text-gray-700 group-hover:text-indigo-700 font-medium",children:te.name})]}),E.jsx("span",{className:"text-[10px] bg-gray-100 text-gray-500 px-2 py-0.5 rounded-full group-hover:bg-white border group-hover:border-indigo-100",children:te.grade})]},te.id)):E.jsx("div",{className:"px-4 py-3 text-xs text-gray-400 text-center italic",children:"Khng tm thy"})}),C&&E.jsx("div",{className:"fixed inset-0 z-40 bg-transparent",onClick:()=>A(!1)})]}),E.jsx("div",{className:"space-y-2",children:p.size===0?E.jsxs("div",{className:"text-center py-6 border-2 border-dashed border-gray-100 rounded-lg bg-gray-50/50",children:[E.jsx(jw,{className:"text-gray-300 mx-auto mb-1",size:30}),E.jsx("p",{className:"text-xs text-gray-400 font-medium",children:"Cha c lin kt no"})]}):Array.from(p).map(te=>{const fe=uw.find(G=>G.id===te);return fe?E.jsxs("div",{className:"flex items-center justify-between bg-white border border-gray-200 shadow-sm rounded-lg px-3 py-2 text-sm group hover:border-indigo-300 transition-all",children:[E.jsxs("div",{className:"flex flex-col overflow-hidden",children:[E.jsx("span",{className:"text-gray-800 font-medium text-xs truncate w-40",title:fe.name,children:fe.name}),E.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[E.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${fe.grade==="Lp 8"?"bg-green-500":"bg-orange-500"}`}),E.jsx("span",{className:"text-[10px] text-gray-400",children:fe.grade})]})]}),E.jsx("button",{onClick:()=>pt(te),className:"text-gray-300 hover:text-red-500 hover:bg-red-50 rounded p-1 transition-colors",children:E.jsx(_C,{size:16})})]},te):null})})]})]}):E.jsxs("div",{className:"flex flex-col h-full",children:[E.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:he.map((te,fe)=>E.jsx("div",{className:`flex ${te.role==="user"?"justify-end":"justify-start"}`,children:E.jsx("div",{className:`max-w-[85%] rounded-2xl p-3 text-sm ${te.role==="user"?"bg-indigo-600 text-white rounded-br-none":"bg-white border border-gray-200 text-gray-800 rounded-bl-none shadow-sm"}`,children:te.text})},fe))}),E.jsxs("div",{className:"p-3 bg-white border-t border-gray-200",children:[E.jsxs("div",{className:"relative",children:[E.jsx("textarea",{value:L,onChange:te=>q(te.target.value),onKeyDown:te=>{te.key==="Enter"&&!te.shiftKey&&(te.preventDefault(),rt())},placeholder:"G yu cu ca bn...",className:"w-full bg-gray-50 border-gray-200 rounded-xl pl-3 pr-10 py-3 text-sm focus:ring-2 focus:ring-indigo-100 focus:border-indigo-400 outline-none resize-none no-scrollbar h-12 max-h-32"}),E.jsx("button",{onClick:rt,disabled:!L.trim(),className:"absolute right-2 top-2 p-1.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:hover:bg-indigo-600 transition-colors",children:E.jsx(SC,{size:14})})]}),E.jsx("p",{className:"text-[10px] text-gray-400 text-center mt-2",children:"AI c th mc li. Vui lng kim tra li."})]})]})})]})]})]})}const $P={async getAll(n){let e=bs.from("math_concepts").select("*").order("grade",{ascending:!0}).order("id",{ascending:!0});n&&(e=e.eq("grade",n));const{data:t,error:r}=await e;if(r)throw r;return t},async getById(n){const{data:e,error:t}=await bs.from("math_concepts").select("*").eq("id",n).single();if(t)throw t;return e},async getPrerequisites(n){const{data:e,error:t}=await bs.from("concept_relationships").select(`
        *,
        source:math_concepts!source_id(*),
        target:math_concepts!target_id(*)
      `).eq("source_id",n).eq("relationship_type","requires");if(t)throw t;return e}};function BP(){const[n,e]=M.useState([]),[t,r]=M.useState(),[s,i]=M.useState(!0),[a,u]=M.useState(null),c=M.useCallback(async()=>{i(!0),u(null);try{const h=await $P.getAll(t);e(h)}catch(h){console.error(h),u("Failed to load concepts"),e([])}finally{i(!1)}},[t]);return M.useEffect(()=>{c()},[c]),{concepts:n,loading:s,error:a,selectedGrade:t,setSelectedGrade:r,refresh:c}}function Wf({className:n,variant:e="primary",size:t="md",...r}){return E.jsx("button",{className:Yo("btn",`btn--${e}`,`btn--${t}`,n),...r})}function zP(){const{concepts:n,loading:e,error:t,selectedGrade:r,setSelectedGrade:s,refresh:i}=BP();return E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"page-header",children:[E.jsxs("div",{children:[E.jsx("h1",{className:"page-header__title",children:"Knowledge Graph"}),E.jsx("p",{className:"page-header__subtitle",children:"Manage math concepts and their relationships"})]}),E.jsxs(Wf,{variant:"primary",className:"gap-2",children:[E.jsx($w,{size:20}),"Add Concept"]})]}),E.jsxs("div",{className:"filter-bar",children:[E.jsxs("div",{className:"filter-bar__label",children:[E.jsx(dC,{size:18}),E.jsx("span",{children:"Filter by Grade:"})]}),E.jsx("div",{className:"filter-bar__options",children:[void 0,6,7,8,9].map(a=>E.jsx("button",{onClick:()=>s(a),className:Yo("filter-bar__btn",r===a&&"filter-bar__btn--active"),children:a?`Grade ${a}`:"All"},a??"all"))}),E.jsx("button",{onClick:i,className:"btn--ghost p-2",title:"Refresh",children:E.jsx(xC,{size:18})})]}),e?E.jsx("div",{className:"text-center py-12 text-text-light",children:"Loading concepts..."}):t?E.jsx("div",{className:"text-center py-12 text-danger",children:t}):n.length===0?E.jsxs("div",{className:"empty-state",children:[E.jsx("div",{className:"empty-state__icon",children:E.jsx(iC,{size:32,className:"text-text-light"})}),E.jsx("h3",{className:"empty-state__title",children:"No concepts found"}),E.jsx("p",{className:"empty-state__desc",children:"Start building your knowledge graph by adding concepts."}),E.jsx(Wf,{variant:"outline",children:"Add First Concept"})]}):E.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:n.map(a=>E.jsxs("div",{className:"concept-card group",children:[E.jsxs("div",{className:"concept-card__header",children:[E.jsxs("span",{className:"concept-card__badge",children:["Grade ",a.grade]}),E.jsx("span",{className:"concept-card__id",children:a.id})]}),E.jsx("h3",{className:"concept-card__title",children:a.name}),a.definition&&E.jsx("p",{className:"concept-card__desc",children:a.definition}),a.tags&&a.tags.length>0&&E.jsx("div",{className:"concept-card__tags",children:a.tags.map((u,c)=>E.jsx("span",{className:"concept-card__tag",children:u},c))}),E.jsxs("div",{className:"concept-card__footer",children:[E.jsx(gC,{size:14}),E.jsx("span",{children:"View relationships"})]})]},a.id))})]})}function UP(){const[n,e]=M.useState(""),[t,r]=M.useState("");M.useEffect(()=>{const i=localStorage.getItem("gemini_api_key");i&&e(i)},[]);const s=()=>{localStorage.setItem("gemini_api_key",n),r("Settings saved successfully!"),setTimeout(()=>r(""),2e3)};return E.jsxs("div",{className:"min-h-screen bg-gray-50/50 p-6 md:p-8 animate-in fade-in zoom-in-95 duration-200",children:[E.jsxs("div",{className:"max-w-4xl mx-auto mb-8",children:[E.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[E.jsx(rf,{className:"text-indigo-600",size:28}),"Settings"]}),E.jsx("p",{className:"text-gray-500 mt-1 ml-9",children:"Manage your API keys and application preferences."})]}),E.jsx("div",{className:"max-w-4xl mx-auto space-y-6",children:E.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[E.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 bg-gray-50/50 flex justify-between items-center",children:[E.jsx("h2",{className:"font-semibold text-gray-800",children:"AI Configuration"}),t&&E.jsx("span",{className:"text-xs font-bold text-green-600 bg-green-50 px-2 py-1 rounded-full animate-in fade-in",children:t})]}),E.jsxs("div",{className:"p-6",children:[E.jsxs("div",{className:"mb-6",children:[E.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Gemini API Key"}),E.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Required for AI lesson generation. The key is stored locally in your browser for security."}),E.jsx("div",{className:"relative",children:E.jsx("input",{type:"password",className:"w-full text-sm border-gray-200 rounded-lg shadow-sm border p-3 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all placeholder-gray-400",placeholder:"Enter your Google Gemini API Key (starts with AIza...)",value:n,onChange:i=>e(i.target.value)})})]}),E.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-100",children:E.jsxs(Wf,{variant:"primary",onClick:s,className:"bg-indigo-600 hover:bg-indigo-700 text-white shadow-md hover:shadow-lg transition-all",children:[E.jsx(rf,{size:16,className:"mr-2"}),"Save Preferences"]})})]})]})})]})}function FP(){return E.jsx($E,{children:E.jsx(pE,{children:E.jsxs(er,{element:E.jsx(OC,{}),children:[E.jsx(er,{path:"/",element:E.jsx(e0,{})}),E.jsx(er,{path:"/group/:groupId",element:E.jsx(NC,{})}),E.jsx(er,{path:"/dashboard",element:E.jsx(e0,{})}),E.jsx(er,{path:"/editor",element:E.jsx(cw,{})}),E.jsx(er,{path:"/editor/:id",element:E.jsx(cw,{})}),E.jsx(er,{path:"/concepts",element:E.jsx(zP,{})}),E.jsx(er,{path:"/settings",element:E.jsx(UP,{})})]})})})}pb.createRoot(document.getElementById("root")).render(E.jsx(kt.StrictMode,{children:E.jsx(FP,{})}));
